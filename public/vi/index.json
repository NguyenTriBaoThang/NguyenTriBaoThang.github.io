[
{
	"uri": "//localhost:1313/vi/3-creating-lambda-functions/3.1-create-the-getstudentdata-function/",
	"title": "C·∫•u h√¨nh Lambda Function getStudentData",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o v√† c·∫•u h√¨nh h√†m Lambda getStudentData ƒë·ªÉ truy xu·∫•t to√†n b·ªô d·ªØ li·ªáu sinh vi√™n t·ª´ b·∫£ng DynamoDB studentData, bao g·ªìm c√°c tr∆∞·ªùng M√£ sinh vi√™n (studentid), H·ªç t√™n (name), L·ªõp (class), Ng√†y sinh (birthdate), v√† Email (email). H√†m n√†y s·ª≠ d·ª•ng thao t√°c Scan ƒë·ªÉ l·∫•y d·ªØ li·ªáu v√† tr·∫£ v·ªÅ k·∫øt qu·∫£ d∆∞·ªõi d·∫°ng JSON, h·ªó tr·ª£ t√≠ch h·ª£p v·ªõi giao di·ªán web th√¥ng qua API Gateway.\nH√†m s·ª≠ d·ª•ng Python 3.13, ki·∫øn tr√∫c x86_64, g√°n vai tr√≤ IAM LambdaGetStudentRole (t·∫°o ·ªü m·ª•c 2.1), v√† t√≠ch h·ª£p v·ªõi DynamoDB.\nY√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh c√°c b∆∞·ªõc chu·∫©n b·ªã ·ªü m·ª•c 2 (IAM Role LambdaGetStudentRole, b·∫£ng DynamoDB studentData) tr∆∞·ªõc khi t·∫°o h√†m. ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1.\nT·ªïng Quan v·ªÅ H√†m getStudentData H√†m getStudentData th·ª±c hi·ªán c√°c ch·ª©c nƒÉng sau:\nK·∫øt n·ªëi t·ªõi b·∫£ng DynamoDB studentData trong v√πng AWS (m·∫∑c ƒë·ªãnh us-east-1). Th·ª±c hi·ªán thao t√°c Scan ƒë·ªÉ l·∫•y to√†n b·ªô d·ªØ li·ªáu sinh vi√™n, x·ª≠ l√Ω ph√¢n trang n·∫øu b·∫£ng l·ªõn. Tr·∫£ v·ªÅ d·ªØ li·ªáu d∆∞·ªõi d·∫°ng JSON v·ªõi header CORS (Access-Control-Allow-Origin: '*') ƒë·ªÉ giao di·ªán web (ch·∫°y tr√™n CloudFront) c√≥ th·ªÉ truy c·∫≠p th√¥ng qua API Gateway. Ghi log v√†o CloudWatch ƒë·ªÉ gi√°m s√°t v√† g·ª° l·ªói (h·ªó tr·ª£ b·ªüi ch√≠nh s√°ch AWSLambdaBasicExecutionRole). H√†nh ƒê·ªông Chi Ti·∫øt Truy C·∫≠p AWS Management Console\nM·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p Lambda v√† ch·ªçn AWS Lambda ƒë·ªÉ v√†o giao di·ªán qu·∫£n l√Ω.\nƒê·∫£m b·∫£o v√πng AWS l√† us-east-1 (kh·ªõp v·ªõi b·∫£ng studentData), ki·ªÉm tra ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm Lambda.\nƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c Functions\nTrong giao di·ªán ch√≠nh c·ªßa AWS Lambda, nh√¨n v√†o menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn Functions (H√†m) ƒë·ªÉ xem danh s√°ch c√°c h√†m Lambda hi·ªán c√≥. N·∫øu ch∆∞a t·∫°o h√†m n√†o, danh s√°ch s·∫Ω tr·ªëng.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn Functions.\nKh·ªüi T·∫°o Qu√° Tr√¨nh T·∫°o H√†m\nTrong giao di·ªán Functions, nh·∫•n n√∫t Create function (T·∫°o h√†m) ·ªü g√≥c tr√™n b√™n ph·∫£i ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh h√†m m·ªõi.\nH√¨nh 3: N√∫t Create function trong giao di·ªán Functions.\nC·∫•u H√¨nh Th√¥ng Tin C∆° B·∫£n c·ªßa H√†m\nTrong m·ª•c Function type, ch·ªçn Author from scratch (T·∫°o t·ª´ ƒë·∫ßu).\nTrong m·ª•c Function name, nh·∫≠p ch√≠nh x√°c getStudentData.\nTrong m·ª•c Runtime, ch·ªçn Python 3.13. N·∫øu kh√¥ng c√≥ Python 3.13, ch·ªçn phi√™n b·∫£n m·ªõi nh·∫•t (v√≠ d·ª•: Python 3.12 ho·∫∑c 3.11).\nTrong m·ª•c Architecture, ch·ªçn x86_64.\nH√¨nh 4: Giao di·ªán c·∫•u h√¨nh th√¥ng tin c∆° b·∫£n c·ªßa h√†m.\nTrong m·ª•c Permissions, ch·ªçn Use an existing role (S·ª≠ d·ª•ng vai tr√≤ hi·ªán c√≥), ch·ªçn LambdaGetStudentRole (t·∫°o ·ªü m·ª•c 2.1, bao g·ªìm AWSLambdaBasicExecutionRole, AmazonDynamoDBReadOnlyAccess, AmazonS3FullAccess, CloudFrontFullAccess).\nL∆∞u √Ω: AmazonS3FullAccess v√† CloudFrontFullAccess kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng trong m√£ hi·ªán t·∫°i, nh∆∞ng ƒë∆∞·ª£c gi·ªØ l·∫°i theo y√™u c·∫ßu tr∆∞·ªõc ƒë√≥.\nGi·ªØ c√°c thi·∫øt l·∫≠p kh√°c m·∫∑c ƒë·ªãnh v√† nh·∫•n Create function.\nH√¨nh 5: Ch·ªçn vai tr√≤ LambdaGetStudentRole v√† nh·∫•n Create function.\nKi·ªÉm Tra Tr·∫°ng Th√°i T·∫°o H√†m\nSau khi nh·∫•n Create function, b·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang chi ti·∫øt c·ªßa h√†m getStudentData.\nGiao di·ªán hi·ªÉn th·ªã th√¥ng b√°o t∆∞∆°ng t·ª±: \u0026ldquo;Successfully created the function getStudentData. You can now change its code and configuration. To invoke your function with a test event, choose Test.\u0026rdquo;\nN·∫øu kh√¥ng th·∫•y th√¥ng b√°o ho·∫∑c g·∫∑p l·ªói, ki·ªÉm tra LambdaGetStudentRole c√≥ t·ªìn t·∫°i v√† t√†i kho·∫£n AWS c√≥ quy·ªÅn lambda:CreateFunction.\nH√¨nh 6: Trang chi ti·∫øt c·ªßa h√†m getStudentData sau khi t·∫°o.\nC·∫•u H√¨nh M√£ Ngu·ªìn\nTrong tab Code, cu·ªôn xu·ªëng ph·∫ßn Code source. Trong t·ªáp lambda_function.py, x√≥a m√£ m·∫∑c ƒë·ªãnh v√† d√°n m√£ sau: import json import boto3 def lambda_handler(event, context): # K·∫øt n·ªëi t·ªõi DynamoDB trong v√πng us-east-1 dynamodb = boto3.resource(\u0026#39;dynamodb\u0026#39;, region_name=\u0026#39;us-east-1\u0026#39;) table = dynamodb.Table(\u0026#39;studentData\u0026#39;) # L·∫•y to√†n b·ªô d·ªØ li·ªáu t·ª´ b·∫£ng studentData response = table.scan() data = response[\u0026#39;Items\u0026#39;] # Ti·∫øp t·ª•c qu√©t n·∫øu c√≤n d·ªØ li·ªáu (ph√¢n trang) while \u0026#39;LastEvaluatedKey\u0026#39; in response: response = table.scan(ExclusiveStartKey=response[\u0026#39;LastEvaluatedKey\u0026#39;]) data.extend(response[\u0026#39;Items\u0026#39;]) # Tr·∫£ v·ªÅ d·ªØ li·ªáu ·ªü d·∫°ng JSON return { \u0026#39;statusCode\u0026#39;: 200, \u0026#39;body\u0026#39;: json.dumps(data), \u0026#39;headers\u0026#39;: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, \u0026#39;Access-Control-Allow-Origin\u0026#39;: \u0026#39;*\u0026#39; } } Gi·∫£i th√≠ch m√£:\nK·∫øt n·ªëi DynamoDB: S·ª≠ d·ª•ng boto3.resource('dynamodb', region_name='us-east-1') ƒë·ªÉ k·∫øt n·ªëi ƒë·∫øn DynamoDB trong v√πng us-east-1. Thay us-east-1 n·∫øu b·∫£ng ·ªü v√πng kh√°c (v√≠ d·ª•: us-west-2). Truy xu·∫•t d·ªØ li·ªáu: Thao t√°c table.scan() l·∫•y to√†n b·ªô d·ªØ li·ªáu t·ª´ b·∫£ng studentData. V√≤ng l·∫∑p while x·ª≠ l√Ω ph√¢n trang (DynamoDB gi·ªõi h·∫°n 1MB m·ªói l·∫ßn Scan). Ph·∫£n h·ªìi: Tr·∫£ v·ªÅ d·ªØ li·ªáu JSON v·ªõi m√£ tr·∫°ng th√°i 200, k√®m header Content-Type: application/json v√† Access-Control-Allow-Origin: '*' ƒë·ªÉ h·ªó tr·ª£ CORS cho giao di·ªán web (CloudFront) qua API Gateway. Ki·ªÉm tra region_name='us-east-1' kh·ªõp v·ªõi v√πng AWS.\nNh·∫•n Deploy ƒë·ªÉ l∆∞u v√† tri·ªÉn khai m√£.\nH√¨nh 7: Giao di·ªán ch·ªânh s·ª≠a m√£ ngu·ªìn getStudentData.\nSau khi tri·ªÉn khai, giao di·ªán hi·ªÉn th·ªã th√¥ng b√°o: \u0026ldquo;Successfully updated the function getStudentData.\u0026rdquo;\nH√¨nh 8: Th√¥ng b√°o tri·ªÉn khai th√†nh c√¥ng.\nC·∫•u H√¨nh Timeout v√† B·ªô Nh·ªõ\nTrong tab Configuration \u0026gt; General configuration, nh·∫•n Edit. ƒê·∫∑t Timeout: 30 gi√¢y (ƒë·ªß cho thao t√°c Scan tr√™n b·∫£ng l·ªõn). ƒê·∫∑t Memory: 128 MB (m·∫∑c ƒë·ªãnh, ƒë·ªß cho h√†m n√†y). Nh·∫•n Save. Ki·ªÉm Tra H√†m\nTrong tab Test, nh·∫•n Create new test event. ƒê·∫∑t t√™n s·ª± ki·ªán (v√≠ d·ª•: testGetStudentData). S·ª≠ d·ª•ng JSON m·∫´u (c√≥ th·ªÉ ƒë·ªÉ tr·ªëng): {} Nh·∫•n Create ƒë·ªÉ l∆∞u s·ª± ki·ªán, sau ƒë√≥ nh·∫•n Test ƒë·ªÉ ch·∫°y h√†m. Ki·ªÉm tra k·∫øt qu·∫£: N·∫øu b·∫£ng studentData c√≥ d·ªØ li·ªáu (t·∫°o ·ªü m·ª•c 2.4), h√†m tr·∫£ v·ªÅ danh s√°ch JSON, v√≠ d·ª•: [ {\u0026#34;studentid\u0026#34;: \u0026#34;SV001\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Nguyen Van A\u0026#34;, \u0026#34;class\u0026#34;: \u0026#34;CNTT01\u0026#34;, \u0026#34;birthdate\u0026#34;: \u0026#34;2000-01-01\u0026#34;, \u0026#34;email\u0026#34;: \u0026#34;student1@example.com\u0026#34;}, {\u0026#34;studentid\u0026#34;: \u0026#34;SV002\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Tran Thi B\u0026#34;, \u0026#34;class\u0026#34;: \u0026#34;CNTT02\u0026#34;, \u0026#34;birthdate\u0026#34;: \u0026#34;2001-02-02\u0026#34;, \u0026#34;email\u0026#34;: \u0026#34;student2@example.com\u0026#34;} ] N·∫øu b·∫£ng tr·ªëng, h√†m tr·∫£ v·ªÅ []. N·∫øu l·ªói, ki·ªÉm tra log trong CloudWatch (Monitor \u0026gt; Logs). C√°c l·ªói ph·ªï bi·∫øn: \u0026ldquo;AccessDenied\u0026rdquo;: Ki·ªÉm tra LambdaGetStudentRole c√≥ ch√≠nh s√°ch AmazonDynamoDBReadOnlyAccess. \u0026ldquo;ResourceNotFoundException\u0026rdquo;: ƒê·∫£m b·∫£o b·∫£ng studentData ƒë√£ t·∫°o (m·ª•c 2.4). \u0026ldquo;Invalid region\u0026rdquo;: Ki·ªÉm tra region_name kh·ªõp v·ªõi v√πng AWS. L∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt IAM Role S·ª≠ d·ª•ng LambdaGetStudentRole (m·ª•c 2.1) v·ªõi AWSLambdaBasicExecutionRole, AmazonDynamoDBReadOnlyAccess, AmazonS3FullAccess, CloudFrontFullAccess. Lo·∫°i b·ªè AmazonS3FullAccess, CloudFrontFullAccess n·∫øu kh√¥ng d√πng ƒë·ªÉ tu√¢n th·ªß least privilege. B·∫£ng DynamoDB B·∫£ng studentData ph·∫£i t·ªìn t·∫°i v·ªõi studentid (Partition Key, String), name, class, birthdate, email. Ho√†n th√†nh m·ª•c 2.4 tr∆∞·ªõc. CORS Header Access-Control-Allow-Origin: '*' c·∫ßn cho giao di·ªán web (CloudFront) g·ªçi qua API Gateway. C·∫•u h√¨nh CORS trong API Gateway sau. V√πng AWS ƒê·∫£m b·∫£o region_name='us-east-1' trong m√£ kh·ªõp v·ªõi v√πng c·ªßa b·∫£ng studentData. C·∫≠p nh·∫≠t n·∫øu d√πng v√πng kh√°c (v√≠ d·ª•: us-west-2). X·ª≠ l√Ω l·ªói Ki·ªÉm tra log trong CloudWatch (/aws/lambda/getStudentData) n·∫øu l·ªói. D√πng CloudTrail ho·∫∑c IAM Access Advisor ƒë·ªÉ x√°c ƒë·ªãnh v·∫•n ƒë·ªÅ quy·ªÅn. T·ªëi ∆∞u h√≥a Thao t√°c Scan t·ªën k√©m v·ªõi b·∫£ng l·ªõn. C√¢n nh·∫Øc d√πng Query v·ªõi ch·ªâ m·ª•c n·∫øu c·∫ßn l·ªçc d·ªØ li·ªáu (v√≠ d·ª•: theo class). Th√™m d·ªØ li·ªáu m·∫´u v√†o studentData ƒë·ªÉ th·ª≠ nghi·ªám. Ki·ªÉm tra s·ªõm Ch·∫°y ki·ªÉm tra ƒë·ªÉ x√°c minh d·ªØ li·ªáu tr·∫£ v·ªÅ ƒë√∫ng tr∆∞·ªõc khi t√≠ch h·ª£p v·ªõi API Gateway. M·∫πo th·ª±c ti·ªÖn: Th√™m d·ªØ li·ªáu m·∫´u v√†o b·∫£ng studentData v√† ki·ªÉm tra log CloudWatch ƒë·ªÉ g·ª° l·ªói tr∆∞·ªõc khi t√≠ch h·ª£p.\nK·∫øt Lu·∫≠n H√†m Lambda getStudentData ƒë√£ ƒë∆∞·ª£c t·∫°o ƒë·ªÉ truy xu·∫•t d·ªØ li·ªáu sinh vi√™n t·ª´ b·∫£ng studentData. H√†m s·∫µn s√†ng t√≠ch h·ª£p v·ªõi API Gateway.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn T·∫°o h√†m insertStudentData ƒë·ªÉ ti·∫øp t·ª•c!\n"
},
{
	"uri": "//localhost:1313/vi/1-introduction/",
	"title": "Gi·ªõi Thi·ªáu",
	"tags": [],
	"description": "",
	"content": " Kh√°m ph√° t∆∞∆°ng lai c·ªßa ph√°t tri·ªÉn web!\nWorkshop n√†y s·∫Ω d·∫´n b·∫°n qua h√†nh tr√¨nh x√¢y d·ª±ng m·ªôt ·ª©ng d·ª•ng web serverless ti√™n ti·∫øn, t·∫≠n d·ª•ng s·ª©c m·∫°nh c·ªßa AWS ƒë·ªÉ qu·∫£n l√Ω th√¥ng tin sinh vi√™n m·ªôt c√°ch an to√†n, hi·ªáu qu·∫£, v√† ti·∫øt ki·ªám chi ph√≠.\nTrong b·ªëi c·∫£nh c√¥ng ngh·ªá hi·ªán ƒë·∫°i, vi·ªác x√¢y d·ª±ng c√°c ·ª©ng d·ª•ng web hi·ªáu qu·∫£, linh ho·∫°t v√† ti·∫øt ki·ªám chi ph√≠ l√† m·ª•c ti√™u h√†ng ƒë·∫ßu c·ªßa c√°c nh√† ph√°t tri·ªÉn. Workshop \u0026ldquo;Tri·ªÉn khai Website Serverless Qu·∫£n L√Ω Th√¥ng Tin Sinh Vi√™n v·ªõi D·ªãch V·ª• AWS\u0026rdquo; h∆∞·ªõng d·∫´n b·∫°n t·ª´ng b∆∞·ªõc ph√°t tri·ªÉn m·ªôt website serverless, t·∫≠n d·ª•ng c√°c d·ªãch v·ª• m·∫°nh m·∫Ω c·ªßa AWS ƒë·ªÉ qu·∫£n l√Ω th√¥ng tin sinh vi√™n m·ªôt c√°ch an to√†n v√† t·ªëi ∆∞u.\n·ª®ng d·ª•ng h·ªó tr·ª£:\nNh·∫≠p v√† truy xu·∫•t d·ªØ li·ªáu sinh vi√™n v·ªõi c√°c tr∆∞·ªùng th√¥ng tin: M√£ sinh vi√™n, H·ªç t√™n, L·ªõp, Ng√†y sinh, v√† Email. Giao di·ªán tr·ª±c quan ƒë∆∞·ª£c thi·∫øt k·∫ø b·∫±ng Tailwind CSS, mang l·∫°i tr·∫£i nghi·ªám ng∆∞·ªùi d√πng m∆∞·ª£t m√†. Ki·∫øn tr√∫c serverless, lo·∫°i b·ªè nhu c·∫ßu qu·∫£n l√Ω m√°y ch·ªß. T√≠nh nƒÉng n√¢ng cao: B·∫£o m·∫≠t, th√¥ng b√°o qua email, v√† sao l∆∞u t·ª± ƒë·ªông ƒë·ªÉ ƒë√°p ·ª©ng nhu c·∫ßu th·ª±c ti·ªÖn. L·ª£i √çch c·ªßa ·ª®ng D·ª•ng Serverless Ki·∫øn tr√∫c serverless c·ªßa AWS mang l·∫°i nh·ªØng ∆∞u ƒëi·ªÉm v∆∞·ª£t tr·ªôi, gi√∫p b·∫°n x√¢y d·ª±ng m·ªôt h·ªá th·ªëng qu·∫£n l√Ω th√¥ng tin sinh vi√™n kh√¥ng ch·ªâ hi·ªáu qu·∫£ m√† c√≤n d·ªÖ d√†ng m·ªü r·ªông v√† duy tr√¨. D∆∞·ªõi ƒë√¢y l√† c√°c l·ª£i √≠ch ch√≠nh:\n1. T·ª± ƒê·ªông M·ªü R·ªông AWS Lambda t·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh t√†i nguy√™n theo l∆∞u l∆∞·ª£ng truy c·∫≠p, ƒë·∫£m b·∫£o ·ª©ng d·ª•ng ho·∫°t ƒë·ªông m∆∞·ª£t m√† d√π s·ªë l∆∞·ª£ng ng∆∞·ªùi d√πng tƒÉng ƒë·ªôt bi·∫øn.\nV√≠ d·ª• th·ª±c ti·ªÖn: Khi h√†ng trƒÉm sinh vi√™n truy c·∫≠p c√πng l√∫c ƒë·ªÉ xem ho·∫∑c c·∫≠p nh·∫≠t th√¥ng tin, Lambda t·ª± ƒë·ªông ph√¢n b·ªï t√†i nguy√™n m√† kh√¥ng c·∫ßn b·∫°n can thi·ªáp, gi√∫p:\nT·ªëi ∆∞u h√≥a chi ph√≠ v·∫≠n h√†nh. Tr√°nh l√£ng ph√≠ t√†i nguy√™n khi h·ªá th·ªëng √≠t s·ª≠ d·ª•ng. 2. B·∫£o M·∫≠t T·ªëi ∆Øu API Gateway s·ª≠ d·ª•ng API Key ƒë·ªÉ x√°c th·ª±c c√°c y√™u c·∫ßu, ƒë·∫£m b·∫£o ch·ªâ nh·ªØng ng∆∞·ªùi d√πng ƒë∆∞·ª£c ph√©p m·ªõi c√≥ th·ªÉ truy c·∫≠p d·ªØ li·ªáu. H·ªá th·ªëng t√≠ch h·ª£p IAM (Identity and Access Management) v·ªõi c√°c vai tr√≤ ri√™ng bi·ªát nh∆∞:\nLambdaGetStudentRole LambdaInsertStudentRole DynamoDBBackupRole V√≠ d·ª• th·ª±c ti·ªÖn: H√†m Lambda truy xu·∫•t d·ªØ li·ªáu ch·ªâ ƒë∆∞·ª£c ph√©p ƒë·ªçc t·ª´ DynamoDB, trong khi h√†m sao l∆∞u ch·ªâ ghi v√†o S3, tu√¢n th·ªß nguy√™n t·∫Øc quy·ªÅn t·ªëi thi·ªÉu (least privilege).\nL·ª£i √≠ch:\nB·∫£o v·ªá d·ªØ li·ªáu nh·∫°y c·∫£m. Gi·∫£m nguy c∆° t·∫•n c√¥ng ho·∫∑c r√≤ r·ªâ th√¥ng tin. 3. Th√¥ng B√°o Qua Email AWS SES (Simple Email Service) cung c·∫•p th√¥ng b√°o t·ª± ƒë·ªông:\nX√°c nh·∫≠n l∆∞u d·ªØ li·ªáu: G·ª≠i email ch·ª©a chi ti·∫øt v·ªÅ M√£ sinh vi√™n, H·ªç t√™n, L·ªõp, v√† Ng√†y sinh khi d·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u v√†o DynamoDB. Sao l∆∞u d·ªØ li·ªáu: G·ª≠i email v·ªõi pre-signed URL (h·∫øt h·∫°n sau 1 gi·ªù) khi d·ªØ li·ªáu ƒë∆∞·ª£c sao l∆∞u v√†o S3. L·ª£i √≠ch: C·∫≠p nh·∫≠t tr·∫°ng th√°i h·ªá th·ªëng t·ª©c th·ªùi, ƒë·∫£m b·∫£o th√¥ng b√°o ƒë√°ng tin c·∫≠y v√† chuy√™n nghi·ªáp.\n4. Ti·∫øt Ki·ªám Chi Ph√≠ M√¥ h√¨nh serverless ch·ªâ t√≠nh ph√≠ d·ª±a tr√™n t√†i nguy√™n th·ª±c t·∫ø s·ª≠ d·ª•ng:\nLambda: T√≠nh ph√≠ theo s·ªë l·∫ßn th·ª±c thi v√† th·ªùi gian ch·∫°y. S3: T√≠nh ph√≠ theo dung l∆∞·ª£ng l∆∞u tr·ªØ. CloudFront: T√≠nh ph√≠ d·ª±a tr√™n d·ªØ li·ªáu truy·ªÅn t·∫£i. V√≠ d·ª• th·ª±c ti·ªÖn: Ph√π h·ª£p cho c√°c ·ª©ng d·ª•ng c√≥ l∆∞u l∆∞·ª£ng truy c·∫≠p kh√¥ng ·ªïn ƒë·ªãnh, gi√∫p gi·∫£m chi ph√≠ v·∫≠n h√†nh ƒë√°ng k·ªÉ so v·ªõi m√¥ h√¨nh m√°y ch·ªß truy·ªÅn th·ªëng.\n5. Hi·ªáu Su·∫•t Cao AWS CloudFront, m·ªôt d·ªãch v·ª• CDN (Content Delivery Network), ph√¢n ph·ªëi n·ªôi dung tƒ©nh (HTML, JavaScript) t·ª´ S3 ƒë·∫øn ng∆∞·ªùi d√πng tr√™n to√†n c·∫ßu v·ªõi ƒë·ªô tr·ªÖ th·∫•p.\nC√°ch ho·∫°t ƒë·ªông: L∆∞u tr·ªØ n·ªôi dung t·∫°i c√°c Edge Locations g·∫ßn ng∆∞·ªùi d√πng.\nV√≠ d·ª• th·ª±c ti·ªÖn: Sinh vi√™n truy c·∫≠p t·ª´ Vi·ªát Nam, M·ªπ, hay ch√¢u √Çu ƒë·ªÅu c√≥ tr·∫£i nghi·ªám m∆∞·ª£t m√†, nhanh ch√≥ng.\nL·ª£i √≠ch: TƒÉng t·ªëc ƒë·ªô t·∫£i trang, c·∫£i thi·ªán tr·∫£i nghi·ªám ng∆∞·ªùi d√πng.\n6. Sao L∆∞u T·ª± ƒê·ªông H·ªá th·ªëng t·ª± ƒë·ªông sao l∆∞u d·ªØ li·ªáu t·ª´ DynamoDB v√†o S3 theo l·ªãch tr√¨nh ƒë∆∞·ª£c thi·∫øt l·∫≠p qua EventBridge (m·∫∑c ƒë·ªãnh: 7:00 AM +07 h√†ng ng√†y).\nQuy tr√¨nh: H√†m Lambda BackupDynamoDBAndSendEmail t·∫°o t·ªáp JSON ch·ª©a to√†n b·ªô d·ªØ li·ªáu sinh vi√™n, l∆∞u v√†o bucket S3 v√† g·ª≠i pre-signed URL (h·∫øt h·∫°n sau 1 gi·ªù).\nV√≠ d·ª• th·ª±c ti·ªÖn: D·ªÖ d√†ng kh√¥i ph·ª•c d·ªØ li·ªáu sau s·ª± c·ªë, ƒë·∫£m b·∫£o an to√†n d·ªØ li·ªáu.\nL·ª£i √≠ch:\nB·∫£o v·ªá d·ªØ li·ªáu l√¢u d√†i. T·ª± ƒë·ªông h√≥a quy tr√¨nh sao l∆∞u, ti·∫øt ki·ªám th·ªùi gian. M·ª•c Ti√™u c·ªßa Workshop Workshop n√†y kh√¥ng ch·ªâ gi√∫p b·∫°n tri·ªÉn khai m·ªôt website qu·∫£n l√Ω th√¥ng tin sinh vi√™n m√† c√≤n cung c·∫•p ki·∫øn th·ª©c th·ª±c ti·ªÖn v·ªÅ c√°ch t√≠ch h·ª£p c√°c d·ªãch v·ª• AWS trong m·ªôt ki·∫øn tr√∫c serverless. B·∫°n s·∫Ω h·ªçc c√°ch:\nM·ª•c Ti√™u C√¥ng Ngh·ªá K·∫øt Qu·∫£ Thi·∫øt k·∫ø giao di·ªán web hi·ªán ƒë·∫°i Tailwind CSS Giao di·ªán tr·ª±c quan, th√¢n thi·ªán v·ªõi ng∆∞·ªùi d√πng T·∫°o v√† b·∫£o m·∫≠t API API Gateway, API Key API an to√†n, d·ªÖ t√≠ch h·ª£p v√† m·ªü r·ªông X·ª≠ l√Ω v√† l∆∞u tr·ªØ d·ªØ li·ªáu Lambda, DynamoDB Qu·∫£n l√Ω d·ªØ li·ªáu hi·ªáu qu·∫£, ƒë√°ng tin c·∫≠y G·ª≠i th√¥ng b√°o qua email SES Th√¥ng b√°o t·ª©c th·ªùi, chuy√™n nghi·ªáp Ph√¢n ph·ªëi n·ªôi dung to√†n c·∫ßu CloudFront Truy c·∫≠p nhanh, ƒë·ªô tr·ªÖ th·∫•p t·ª´ m·ªçi khu v·ª±c T·ª± ƒë·ªông h√≥a sao l∆∞u d·ªØ li·ªáu S3, EventBridge D·ªØ li·ªáu an to√†n, d·ªÖ kh√¥i ph·ª•c Gi√°m s√°t ho·∫°t ƒë·ªông h·ªá th·ªëng CloudWatch Theo d√µi v√† t·ªëi ∆∞u hi·ªáu su·∫•t h·ªá th·ªëng B·∫Øt ƒê·∫ßu H√†nh Tr√¨nh C·ªßa B·∫°n! B·∫±ng c√°ch ho√†n th√†nh workshop, b·∫°n s·∫Ω s·ªü h·ªØu:\nM·ªôt ·ª©ng d·ª•ng serverless ho√†n ch·ªânh, s·∫µn s√†ng s·ª≠ d·ª•ng trong th·ª±c t·∫ø. K·ªπ nƒÉng chuy√™n s√¢u ƒë·ªÉ ph√°t tri·ªÉn c√°c ·ª©ng d·ª•ng serverless v·ªõi AWS. T·ª± tin trong vi·ªác t√≠ch h·ª£p c√°c d·ªãch v·ª• cloud v√†o d·ª± √°n c√° nh√¢n ho·∫∑c doanh nghi·ªáp. S·∫µn s√†ng tham gia? Chuy·ªÉn ƒë·∫øn C√°c b∆∞·ªõc chu·∫©n b·ªã ƒë·ªÉ kh√°m ph√° chi ti·∫øt c√°c b∆∞·ªõc chu·∫©n b·ªã!\n"
},
{
	"uri": "//localhost:1313/vi/4-creating-a-restful-api/4.1-creating-a-rest-api/",
	"title": "T·∫°o REST API m·ªõi tr√™n API Gateway",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o m·ªôt REST API m·ªõi trong AWS API Gateway v·ªõi t√™n student v√† lo·∫°i endpoint Edge-optimized, ƒë·ªÉ t√≠ch h·ª£p v·ªõi c√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail) v√† giao di·ªán web (ch·∫°y tr√™n CloudFront). API n√†y s·∫Ω cung c·∫•p c√°c endpoint ƒë·ªÉ truy xu·∫•t, l∆∞u tr·ªØ, v√† sao l∆∞u d·ªØ li·ªáu sinh vi√™n, ƒë·ªìng th·ªùi ƒë∆∞·ª£c b·∫£o m·∫≠t b·∫±ng API Key v√† h·ªó tr·ª£ CORS.\nT·ªïng Quan v·ªÅ REST API trong API Gateway AWS API Gateway l√† d·ªãch v·ª• serverless cho ph√©p t·∫°o c√°c API RESTful ho·∫∑c HTTP, k·∫øt n·ªëi giao di·ªán web v·ªõi c√°c d·ªãch v·ª• backend nh∆∞ Lambda, DynamoDB, ho·∫∑c S3. API student s·∫Ω bao g·ªìm c√°c endpoint: GET /students: G·ªçi h√†m getStudentData ƒë·ªÉ l·∫•y danh s√°ch sinh vi√™n t·ª´ b·∫£ng DynamoDB studentData. POST /students: G·ªçi h√†m insertStudentData ƒë·ªÉ l∆∞u th√¥ng tin sinh vi√™n v√† g·ª≠i email x√°c nh·∫≠n qua SES. POST /backup: G·ªçi h√†m BackupDynamoDBAndSendEmail ƒë·ªÉ sao l∆∞u d·ªØ li·ªáu v√†o S3 v√† g·ª≠i email th√¥ng b√°o. Edge-optimized endpoint s·ª≠ d·ª•ng m·∫°ng CloudFront ƒë·ªÉ gi·∫£m ƒë·ªô tr·ªÖ, ph√π h·ª£p v·ªõi giao di·ªán web ph√¢n ph·ªëi qua CloudFront. Y√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh c√°c b∆∞·ªõc ·ªü m·ª•c 3 (t·∫°o c√°c h√†m Lambda getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, SES email x√°c minh). ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1.\nH√†nh ƒê·ªông Chi Ti·∫øt Truy C·∫≠p AWS Management Console\nM·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS c·ªßa b·∫°n.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p API Gateway v√† ch·ªçn d·ªãch v·ª• Amazon API Gateway ƒë·ªÉ v√†o giao di·ªán qu·∫£n l√Ω.\nKi·ªÉm tra v√πng AWS: ƒê·∫£m b·∫£o b·∫°n ƒëang l√†m vi·ªác trong v√πng AWS ch√≠nh (v√≠ d·ª•: us-east-1), ki·ªÉm tra v√πng ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. V√πng n√†y ph·∫£i kh·ªõp v·ªõi c√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail), b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, v√† SES.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm API Gateway.\nƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c APIs\nTrong giao di·ªán ch√≠nh c·ªßa Amazon API Gateway, nh√¨n v√†o menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn APIs ƒë·ªÉ xem danh s√°ch c√°c API hi·ªán c√≥. N·∫øu b·∫°n ch∆∞a t·∫°o API n√†o, danh s√°ch s·∫Ω tr·ªëng.\nGiao di·ªán s·∫Ω hi·ªÉn th·ªã c√°c t√πy ch·ªçn ƒë·ªÉ t·∫°o ho·∫∑c qu·∫£n l√Ω API.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn APIs.\nKh·ªüi T·∫°o Qu√° Tr√¨nh T·∫°o API\nTrong giao di·ªán APIs, nh·∫•n n√∫t Create API (T·∫°o API) ·ªü g√≥c tr√™n b√™n ph·∫£i ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh API m·ªõi.\nN·∫øu b·∫°n th·∫•y t√πy ch·ªçn REST API ngay l·∫≠p t·ª©c, nh·∫£y sang b∆∞·ªõc 4. N·∫øu kh√¥ng, giao di·ªán s·∫Ω li·ªát k√™ c√°c lo·∫°i API (REST API, HTTP API, WebSocket API).\nH√¨nh 3: N√∫t Create API trong giao di·ªán APIs.\nCh·ªçn REST API v√† Build\nTrong giao di·ªán Create API, t√¨m ph·∫ßn REST API (kh√¥ng ph·∫£i REST API Private ho·∫∑c HTTP API).\nNh·∫•n Build b√™n d∆∞·ªõi REST API ƒë·ªÉ b·∫Øt ƒë·∫ßu t·∫°o API RESTful.\nL∆∞u √Ω v·ªÅ REST API:\nREST API h·ªó tr·ª£ c√°c t√≠nh nƒÉng nh∆∞ API Key, CORS, v√† t√≠ch h·ª£p Lambda Proxy, ph√π h·ª£p v·ªõi h·ªá th·ªëng n√†y. So s√°nh v·ªõi HTTP API (nh·∫π h∆°n, chi ph√≠ th·∫•p h∆°n) v√† REST API Private (ch·ªâ truy c·∫≠p trong VPC), REST API l√† l·ª±a ch·ªçn t·ªët nh·∫•t cho ·ª©ng d·ª•ng c√¥ng khai t√≠ch h·ª£p v·ªõi CloudFront. H√¨nh 4: Giao di·ªán ch·ªçn REST API v√† nh·∫•n Build.\nC·∫•u H√¨nh Chi Ti·∫øt API\nTrong m·ª•c API Details: Ch·ªçn New API ƒë·ªÉ t·∫°o API m·ªõi t·ª´ ƒë·∫ßu. API name: Nh·∫≠p ch√≠nh x√°c student (kh√°c v·ªõi StudentManagementAPI ·ªü m·ª•c 4 tr∆∞·ªõc ƒë√≥, t√¥i s·∫Ω s·ª≠ d·ª•ng student nh∆∞ y√™u c·∫ßu). Description: Nh·∫≠p REST API cho h·ªá th·ªëng qu·∫£n l√Ω sinh vi√™n, t√≠ch h·ª£p v·ªõi Lambda v√† CloudFront. API endpoint Type: Ch·ªçn Edge-optimized. Gi·∫£i th√≠ch: Edge-optimized: API ƒë∆∞·ª£c ph√¢n ph·ªëi qua m·∫°ng CloudFront, s·ª≠ d·ª•ng c√°c edge locations ƒë·ªÉ gi·∫£m ƒë·ªô tr·ªÖ cho ng∆∞·ªùi d√πng to√†n c·∫ßu. Ph√π h·ª£p v·ªõi giao di·ªán web ch·∫°y tr√™n CloudFront. Regional: API ch·ªâ ph·ª•c v·ª• trong m·ªôt v√πng AWS, ph√π h·ª£p n·∫øu kh√¥ng c·∫ßn t·ªëi ∆∞u ƒë·ªô tr·ªÖ to√†n c·∫ßu. Private: Ch·ªâ truy c·∫≠p trong VPC, kh√¥ng ph√π h·ª£p v·ªõi ·ª©ng d·ª•ng c√¥ng khai. Gi·ªØ c√°c thi·∫øt l·∫≠p kh√°c ·ªü gi√° tr·ªã m·∫∑c ƒë·ªãnh. H√¨nh 5: Giao di·ªán c·∫•u h√¨nh chi ti·∫øt API.\nNh·∫•n Create API ƒë·ªÉ t·∫°o.\nH√¨nh 6: Nh·∫•n n√∫t Create API. Ki·ªÉm Tra Tr·∫°ng Th√°i T·∫°o API\nSau khi nh·∫•n Create API, b·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang qu·∫£n l√Ω API student. Giao di·ªán s·∫Ω hi·ªÉn th·ªã th√¥ng b√°o: \u0026ldquo;Successfully created REST API ‚Äòstudent‚Äô.\u0026rdquo; N·∫øu kh√¥ng th·∫•y th√¥ng b√°o ho·∫∑c g·∫∑p l·ªói: Ki·ªÉm tra quy·ªÅn IAM c·ªßa t√†i kho·∫£n AWS c√≥ bao g·ªìm apigateway:POST ƒë·ªÉ t·∫°o API. ƒê·∫£m b·∫£o b·∫°n ƒë√£ ch·ªçn REST API v√† Edge-optimized ƒë√∫ng c√°ch. Trong menu b√™n tr√°i, ch·ªçn Resources ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh c√°c resource v√† method (s·∫Ω th·ª±c hi·ªán ·ªü c√°c m·ª•c 4.4, 4.5, 4.6). H√¨nh 7: Trang qu·∫£n l√Ω API student sau khi t·∫°o. L∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt T√™n API T√™n student ph·∫£i ƒë∆∞·ª£c nh·∫≠p ch√≠nh x√°c, v√¨ n√≥ s·∫Ω xu·∫•t hi·ªán trong URL Invoke (v√≠ d·ª•: https://api-id.execute-api.us-east-1.amazonaws.com/prod). Edge-optimized vs Regional Edge-optimized ph√π h·ª£p v·ªõi h·ªá th·ªëng n√†y v√¨ giao di·ªán web s·ª≠ d·ª•ng CloudFront. URL Invoke s·∫Ω c√≥ ƒë·ªãnh d·∫°ng s·ª≠ d·ª•ng CloudFront edge locations. N·∫øu b·∫°n c·∫ßn t√≠ch h·ª£p v·ªõi m·ªôt domain t√πy ch·ªânh (v√≠ d·ª•: api.system.edu.vn), ƒë·∫£m b·∫£o c·∫•u h√¨nh domain trong API Gateway v√† CloudFront sau khi t·∫°o API. V√πng AWS ƒê·∫£m b·∫£o v√πng us-east-1 kh·ªõp v·ªõi c√°c h√†m Lambda, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, v√† SES. N·∫øu s·ª≠ d·ª•ng v√πng kh√°c (v√≠ d·ª•: us-west-2), b·∫°n c·∫ßn ƒëi·ªÅu ch·ªânh khi c·∫•u h√¨nh t√≠ch h·ª£p Lambda (c√°c m·ª•c 4.4, 4.5, 4.6). X·ª≠ l√Ω l·ªói N·∫øu g·∫∑p l·ªói \u0026ldquo;AccessDenied\u0026rdquo;, ki·ªÉm tra quy·ªÅn IAM c·ªßa t√†i kho·∫£n AWS. N·∫øu API kh√¥ng hi·ªÉn th·ªã, l√†m m·ªõi trang ho·∫∑c ki·ªÉm tra l·∫°i v√πng AWS. T·ªëi ∆∞u h√≥a Sau khi t·∫°o API, b·∫°n c√≥ th·ªÉ th√™m m√¥ t·∫£ chi ti·∫øt h∆°n trong Settings (menu b√™n tr√°i) ho·∫∑c b·∫≠t logging API Gateway ƒë·ªÉ gi√°m s√°t: - V√†o Settings \u0026gt; CloudWatch Logs \u0026gt; Ch·ªçn Enable CloudWatch Logs v√† ƒë·∫∑t m·ª©c log (v√≠ d·ª•: INFO). - ƒêi·ªÅu n√†y gi√∫p g·ª° l·ªói khi t√≠ch h·ª£p v·ªõi Lambda ho·∫∑c giao di·ªán web. Ki·ªÉm tra s·ªõm Sau khi t·∫°o API, x√°c minh API xu·∫•t hi·ªán trong danh s√°ch APIs tr∆∞·ªõc khi c·∫•u h√¨nh resource v√† method. M·∫πo th·ª±c ti·ªÖn: X√°c minh API student xu·∫•t hi·ªán trong danh s√°ch APIs v√† ki·ªÉm tra URL Invoke sau khi tri·ªÉn khai (m·ª•c 4.8) ƒë·ªÉ ƒë·∫£m b·∫£o API s·∫µn s√†ng t√≠ch h·ª£p.\nK·∫øt Lu·∫≠n REST API student ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng trong AWS API Gateway v·ªõi lo·∫°i endpoint Edge-optimized, s·∫µn s√†ng ƒë·ªÉ c·∫•u h√¨nh c√°c resource v√† method trong c√°c b∆∞·ªõc ti·∫øp theo.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn T·∫°o API Key ƒë·ªÉ b·∫£o v·ªá truy c·∫≠p ƒë·ªÉ ti·∫øp t·ª•c!\n"
},
{
	"uri": "//localhost:1313/vi/",
	"title": "Website Serverless",
	"tags": [],
	"description": "",
	"content": "Tri·ªÉn Khai Website Serverless Qu·∫£n L√Ω Th√¥ng Tin Sinh Vi√™n v·ªõi AWS Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi workshop th·ª±c ti·ªÖn!\nX√¢y d·ª±ng m·ªôt ·ª©ng d·ª•ng web serverless hi·ªán ƒë·∫°i, t·∫≠n d·ª•ng c√°c d·ªãch v·ª• AWS ƒë·ªÉ qu·∫£n l√Ω th√¥ng tin sinh vi√™n m·ªôt c√°ch an to√†n, hi·ªáu qu·∫£, v√† ti·∫øt ki·ªám chi ph√≠.\nT·ªïng Quan Workshop n√†y h∆∞·ªõng d·∫´n b·∫°n t·ª´ng b∆∞·ªõc x√¢y d·ª±ng m·ªôt website serverless s·ª≠ d·ª•ng c√°c d·ªãch v·ª• AWS m·∫°nh m·∫Ω ƒë·ªÉ qu·∫£n l√Ω th√¥ng tin sinh vi√™n. ·ª®ng d·ª•ng h·ªó tr·ª£:\nNh·∫≠p v√† xu·∫•t d·ªØ li·ªáu sinh vi√™n v·ªõi c√°c tr∆∞·ªùng: M√£ sinh vi√™n, H·ªç t√™n, L·ªõp, Ng√†y sinh, v√† Email. Giao di·ªán tr·ª±c quan ƒë∆∞·ª£c thi·∫øt k·∫ø v·ªõi Tailwind CSS, mang l·∫°i tr·∫£i nghi·ªám ng∆∞·ªùi d√πng m∆∞·ª£t m√†. B·∫£o m·∫≠t: S·ª≠ d·ª•ng API Key qua API Gateway ƒë·ªÉ x√°c th·ª±c y√™u c·∫ßu. Th√¥ng b√°o: G·ª≠i email x√°c nh·∫≠n v√† sao l∆∞u qua AWS SES. Sao l∆∞u t·ª± ƒë·ªông: L∆∞u d·ªØ li·ªáu t·ª´ DynamoDB v√†o S3 theo l·ªãch tr√¨nh. B·∫±ng c√°ch s·ª≠ d·ª•ng c√°c d·ªãch v·ª• serverless nh∆∞ S3, DynamoDB, Lambda, API Gateway, CloudFront, v√† SES, b·∫°n s·∫Ω h·ªçc c√°ch tri·ªÉn khai m·ªôt ·ª©ng d·ª•ng:\nKh√¥ng c·∫ßn qu·∫£n l√Ω m√°y ch·ªß. Ti·∫øt ki·ªám chi ph√≠ v·ªõi m√¥ h√¨nh tr·∫£ ph√≠ theo s·ª≠ d·ª•ng. T·ª± ƒë·ªông m·ªü r·ªông theo l∆∞u l∆∞·ª£ng truy c·∫≠p. T·ªëi ∆∞u hi·ªáu su·∫•t to√†n c·∫ßu v·ªõi ƒë·ªô tr·ªÖ th·∫•p. Ki·∫øn tr√∫c h·ªá th·ªëng t·ªïng quan:\nH√¨nh 1: S∆° ƒë·ªì t·ªïng quan ki·∫øn tr√∫c ·ª©ng d·ª•ng serverless v·ªõi c√°c d·ªãch v·ª• AWS.\nN·ªôi Dung Workshop Workshop bao g·ªìm c√°c b∆∞·ªõc chi ti·∫øt ƒë·ªÉ x√¢y d·ª±ng ·ª©ng d·ª•ng serverless ho√†n ch·ªânh. D∆∞·ªõi ƒë√¢y l√† danh s√°ch c√°c n·ªôi dung:\nB∆∞·ªõc N·ªôi Dung M√¥ T·∫£ 1 Gi·ªõi thi·ªáu T·ªïng quan v·ªÅ workshop, l·ª£i √≠ch c·ªßa ki·∫øn tr√∫c serverless, v√† m·ª•c ti√™u h·ªçc t·∫≠p. 2 C√°c b∆∞·ªõc chu·∫©n b·ªã H∆∞·ªõng d·∫´n thi·∫øt l·∫≠p t√†i kho·∫£n AWS, c√†i ƒë·∫∑t c√¥ng c·ª• c·∫ßn thi·∫øt, v√† chu·∫©n b·ªã m√¥i tr∆∞·ªùng. 3 C·∫•u h√¨nh Lambda Functions T·∫°o c√°c h√†m Lambda ƒë·ªÉ x·ª≠ l√Ω logic, nh∆∞ truy xu·∫•t v√† l∆∞u tr·ªØ d·ªØ li·ªáu sinh vi√™n. 4 T·∫°o RESTful API C·∫•u h√¨nh API Gateway ƒë·ªÉ t·∫°o API an to√†n, t√≠ch h·ª£p v·ªõi Lambda. 5 Vi·∫øt giao di·ªán cho Website Thi·∫øt k·∫ø giao di·ªán web v·ªõi Tailwind CSS ƒë·ªÉ nh·∫≠p/xu·∫•t d·ªØ li·ªáu sinh vi√™n. 6 C·∫•u h√¨nh S3 Bucket T·∫°o v√† c·∫•u h√¨nh bucket S3 ƒë·ªÉ l∆∞u tr·ªØ n·ªôi dung tƒ©nh v√† d·ªØ li·ªáu sao l∆∞u. 7 Tri·ªÉn khai CloudFront S·ª≠ d·ª•ng CloudFront ƒë·ªÉ ph√¢n ph·ªëi n·ªôi dung to√†n c·∫ßu v·ªõi ƒë·ªô tr·ªÖ th·∫•p. 8 Thi·∫øt l·∫≠p Backup h·ªá th·ªëng T·ª± ƒë·ªông h√≥a sao l∆∞u d·ªØ li·ªáu t·ª´ DynamoDB v√†o S3 v·ªõi EventBridge. 9 Ki·ªÉm tra k·∫øt qu·∫£ X√°c minh ho·∫°t ƒë·ªông c·ªßa ·ª©ng d·ª•ng qua c√°c k·ªãch b·∫£n ki·ªÉm th·ª≠. 10 Xem Logs ho·∫°t ƒë·ªông b·∫±ng CloudWatch Theo d√µi v√† ph√¢n t√≠ch log h·ªá th·ªëng ƒë·ªÉ t·ªëi ∆∞u hi·ªáu su·∫•t. 11 Video Demo tham kh·∫£o Xem video h∆∞·ªõng d·∫´n minh h·ªça c√°ch ·ª©ng d·ª•ng ho·∫°t ƒë·ªông. 12 D·ªçn d·∫πp t√†i nguy√™n H∆∞·ªõng d·∫´n x√≥a c√°c t√†i nguy√™n AWS ƒë·ªÉ tr√°nh chi ph√≠ kh√¥ng c·∫ßn thi·∫øt. L∆∞u √Ω: M·ªói b∆∞·ªõc ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ b·∫°n th·ª±c h√†nh t·ª´ng ph·∫ßn c·ªßa ·ª©ng d·ª•ng, t·ª´ c·∫•u h√¨nh c∆° s·ªü d·ªØ li·ªáu ƒë·∫øn tri·ªÉn khai giao di·ªán v√† gi√°m s√°t h·ªá th·ªëng. H√£y l√†m theo th·ª© t·ª± ƒë·ªÉ ƒë·∫°t k·∫øt qu·∫£ t·ªët nh·∫•t.\nB·∫Øt ƒê·∫ßu H√†nh Tr√¨nh Ho√†n th√†nh workshop n√†y, b·∫°n s·∫Ω:\nS·ªü h·ªØu m·ªôt ·ª©ng d·ª•ng serverless ho√†n ch·ªânh, s·∫µn s√†ng s·ª≠ d·ª•ng trong th·ª±c t·∫ø. N·∫Øm v·ªØng k·ªπ nƒÉng th·ª±c ti·ªÖn ƒë·ªÉ t√≠ch h·ª£p c√°c d·ªãch v·ª• AWS nh∆∞ Lambda, DynamoDB, API Gateway, S3, CloudFront, SES, v√† CloudWatch. T·ª± tin ph√°t tri·ªÉn c√°c ·ª©ng d·ª•ng serverless kh√°c trong t∆∞∆°ng lai. S·∫µn s√†ng b·∫Øt ƒë·∫ßu?\nChuy·ªÉn ƒë·∫øn Gi·ªõi thi·ªáu ƒë·ªÉ kh√°m ph√° chi ti·∫øt v·ªÅ ·ª©ng d·ª•ng v√† l·ª£i √≠ch c·ªßa ki·∫øn tr√∫c serverless!\n"
},
{
	"uri": "//localhost:1313/vi/2-preparation-steps/",
	"title": "C√°c B∆∞·ªõc Chu·∫©n B·ªã",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: Thi·∫øt l·∫≠p m√¥i tr∆∞·ªùng c·∫ßn thi·∫øt ƒë·ªÉ tri·ªÉn khai ·ª©ng d·ª•ng serverless qu·∫£n l√Ω th√¥ng tin sinh vi√™n, bao g·ªìm t√†i kho·∫£n AWS, c√°c IAM Role, b·∫£ng DynamoDB, v√† d·ªãch v·ª• SES.\nƒê·ªÉ b·∫Øt ƒë·∫ßu workshop Tri·ªÉn khai Website Serverless Qu·∫£n L√Ω Th√¥ng Tin Sinh Vi√™n v·ªõi AWS, b·∫°n c·∫ßn chu·∫©n b·ªã c√°c th√†nh ph·∫ßn c∆° b·∫£n ƒë·ªÉ ƒë·∫£m b·∫£o t√≠ch h·ª£p m∆∞·ª£t m√† v·ªõi c√°c d·ªãch v·ª• AWS nh∆∞ Lambda, DynamoDB, API Gateway, S3, CloudFront, v√† SES.\nY√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn c√≥ m·ªôt t√†i kho·∫£n AWS ƒë·ªÉ th·ª±c hi·ªán c√°c b∆∞·ªõc trong workshop. N·∫øu ch∆∞a c√≥, h√£y t·∫°o t√†i kho·∫£n tr∆∞·ªõc khi ti·∫øp t·ª•c.\nƒê·ªÉ t√¨m hi·ªÉu c√°ch t·∫°o t√†i kho·∫£n AWS, tham kh·∫£o h∆∞·ªõng d·∫´n chi ti·∫øt t·∫°i:\nH∆∞·ªõng d·∫´n t·∫°o t√†i kho·∫£n AWS C√°c B∆∞·ªõc Chu·∫©n B·ªã D∆∞·ªõi ƒë√¢y l√† c√°c b∆∞·ªõc c·ª• th·ªÉ ƒë·ªÉ chu·∫©n b·ªã m√¥i tr∆∞·ªùng cho ·ª©ng d·ª•ng serverless:\nB∆∞·ªõc N·ªôi Dung M√¥ T·∫£ 2.1 T·∫°o IAM Role cho Lambda Get T·∫°o vai tr√≤ IAM cho h√†m Lambda x·ª≠ l√Ω truy xu·∫•t d·ªØ li·ªáu sinh vi√™n t·ª´ DynamoDB, ƒë·∫£m b·∫£o quy·ªÅn truy c·∫≠p an to√†n v√† t·ªëi thi·ªÉu. 2.2 T·∫°o IAM Role cho Lambda Post T·∫°o vai tr√≤ IAM cho h√†m Lambda x·ª≠ l√Ω l∆∞u tr·ªØ d·ªØ li·ªáu sinh vi√™n v√†o DynamoDB, tu√¢n th·ªß nguy√™n t·∫Øc quy·ªÅn t·ªëi thi·ªÉu. 2.3 T·∫°o IAM Role cho DynamoDB Backup T·∫°o vai tr√≤ IAM cho h√†m Lambda th·ª±c hi·ªán sao l∆∞u d·ªØ li·ªáu t·ª´ DynamoDB v√†o S3, bao g·ªìm quy·ªÅn ghi v√†o S3 v√† g·ª≠i email qua SES. 2.4 T·∫°o b·∫£ng trong DynamoDB Thi·∫øt l·∫≠p b·∫£ng studentData v·ªõi kh√≥a ch√≠nh studentid (String) ƒë·ªÉ l∆∞u tr·ªØ th√¥ng tin sinh vi√™n (M√£ sinh vi√™n, H·ªç t√™n, L·ªõp, Ng√†y sinh, Email). 2.5 C·∫•u h√¨nh SES C·∫•u h√¨nh AWS SES ƒë·ªÉ g·ª≠i email x√°c nh·∫≠n khi l∆∞u d·ªØ li·ªáu v√† th√¥ng b√°o sao l∆∞u v·ªõi pre-signed URL. L∆∞u √Ω: Th·ª±c hi·ªán c√°c b∆∞·ªõc theo th·ª© t·ª± ƒë·ªÉ ƒë·∫£m b·∫£o m√¥i tr∆∞·ªùng ƒë∆∞·ª£c thi·∫øt l·∫≠p ch√≠nh x√°c. M·ªói b∆∞·ªõc s·∫Ω ƒë∆∞·ª£c h∆∞·ªõng d·∫´n chi ti·∫øt trong c√°c t√†i li·ªáu t∆∞∆°ng ·ª©ng.\nK·∫øt Lu·∫≠n Ho√†n th√†nh c√°c b∆∞·ªõc chu·∫©n b·ªã n√†y, b·∫°n s·∫Ω c√≥:\nM·ªôt t√†i kho·∫£n AWS s·∫µn s√†ng ƒë·ªÉ tri·ªÉn khai ·ª©ng d·ª•ng. C√°c IAM Role ƒë∆∞·ª£c c·∫•u h√¨nh ƒë·ªÉ ƒë·∫£m b·∫£o b·∫£o m·∫≠t v√† quy·ªÅn truy c·∫≠p t·ªëi thi·ªÉu. B·∫£ng studentData trong DynamoDB ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu sinh vi√™n. D·ªãch v·ª• SES ƒë∆∞·ª£c thi·∫øt l·∫≠p ƒë·ªÉ g·ª≠i th√¥ng b√°o qua email. S·∫µn s√†ng ti·∫øp t·ª•c?\nChuy·ªÉn ƒë·∫øn T·∫°o IAM Role cho Lambda Get ƒë·ªÉ b·∫Øt ƒë·∫ßu thi·∫øt l·∫≠p vai tr√≤ IAM cho h√†m Lambda ƒë·∫ßu ti√™n!\n"
},
{
	"uri": "//localhost:1313/vi/3-creating-lambda-functions/3.2-create-the-insertstudentdata-function/",
	"title": "C·∫•u h√¨nh Lambda Function insertStudentData",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o v√† c·∫•u h√¨nh h√†m Lambda insertStudentData ƒë·ªÉ nh·∫≠n th√¥ng tin sinh vi√™n t·ª´ giao di·ªán web, l∆∞u v√†o b·∫£ng DynamoDB studentData, v√† g·ª≠i email x√°c nh·∫≠n qua SES. H√†m n√†y x·ª≠ l√Ω d·ªØ li·ªáu c√°c tr∆∞·ªùng M√£ sinh vi√™n (studentid), H·ªç t√™n (name), L·ªõp (class), Ng√†y sinh (birthdate), v√† Email (email), ƒë·ªìng th·ªùi ki·ªÉm tra t√≠nh h·ª£p l·ªá v√† tr√πng l·∫∑p tr∆∞·ªõc khi l∆∞u. H√†m s·ª≠ d·ª•ng Python 3.13, ki·∫øn tr√∫c x86_64, v√† g√°n vai tr√≤ IAM LambdaInsertStudentRole (s·ª≠a l·ªói t·ª´ LambdaGetStudentRole trong y√™u c·∫ßu). H√†m s·∫Ω tr·∫£ v·ªÅ ph·∫£n h·ªìi JSON ƒë·ªÉ t√≠ch h·ª£p v·ªõi giao di·ªán web qua API Gateway.\nT·ªïng Quan v·ªÅ H√†m insertStudentData H√†m insertStudentData th·ª±c hi·ªán c√°c ch·ª©c nƒÉng sau:\nNh·∫≠n d·ªØ li·ªáu t·ª´ event['body'] (g·ª≠i t·ª´ giao di·ªán web qua API Gateway). Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o (ƒë·∫£m b·∫£o t·∫•t c·∫£ c√°c tr∆∞·ªùng b·∫Øt bu·ªôc ƒë∆∞·ª£c cung c·∫•p). Ki·ªÉm tra tr√πng studentid b·∫±ng thao t√°c GetItem ƒë·ªÉ tr√°nh l∆∞u d·ªØ li·ªáu tr√πng l·∫∑p. L∆∞u d·ªØ li·ªáu v√†o b·∫£ng studentData b·∫±ng thao t√°c PutItem. G·ª≠i email x√°c nh·∫≠n qua SES v·ªõi n·ªôi dung chi ti·∫øt (m√£ sinh vi√™n, h·ªç t√™n, l·ªõp, ng√†y sinh). Ghi log chi ti·∫øt v√†o CloudWatch ƒë·ªÉ gi√°m s√°t v√† g·ª° l·ªói. Tr·∫£ v·ªÅ ph·∫£n h·ªìi JSON v·ªõi header CORS (Access-Control-Allow-Origin: '*') ƒë·ªÉ h·ªó tr·ª£ giao di·ªán web. Y√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh c√°c b∆∞·ªõc chu·∫©n b·ªã ·ªü m·ª•c 2 (IAM Role LambdaInsertStudentRole, b·∫£ng DynamoDB studentData, SES email x√°c minh) tr∆∞·ªõc khi t·∫°o h√†m. ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1.\nH√†nh ƒê·ªông Chi Ti·∫øt Truy C·∫≠p AWS Management Console\nM·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS c·ªßa b·∫°n.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p Lambda v√† ch·ªçn d·ªãch v·ª• AWS Lambda ƒë·ªÉ v√†o giao di·ªán qu·∫£n l√Ω.\nƒê·∫£m b·∫£o b·∫°n ƒëang l√†m vi·ªác trong v√πng AWS ch√≠nh (v√≠ d·ª•: us-east-1), ki·ªÉm tra v√πng ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. V√πng n√†y ph·∫£i kh·ªõp v·ªõi b·∫£ng DynamoDB studentData v√† SES.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm Lambda.\nƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c Functions\nTrong giao di·ªán ch√≠nh c·ªßa AWS Lambda, nh√¨n v√†o menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn Functions (H√†m) ƒë·ªÉ xem danh s√°ch c√°c h√†m Lambda hi·ªán c√≥. N·∫øu b·∫°n ch∆∞a t·∫°o h√†m n√†o, danh s√°ch s·∫Ω tr·ªëng.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn Functions.\nKh·ªüi T·∫°o Qu√° Tr√¨nh T·∫°o H√†m\nTrong giao di·ªán Functions, nh·∫•n n√∫t Create function (T·∫°o h√†m) ·ªü g√≥c tr√™n b√™n ph·∫£i ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh h√†m m·ªõi.\nH√¨nh 3: N√∫t Create function trong giao di·ªán Functions.\nC·∫•u H√¨nh Th√¥ng Tin C∆° B·∫£n c·ªßa H√†m\nTrong m·ª•c Function type, ch·ªçn Author from scratch (T·∫°o t·ª´ ƒë·∫ßu) ƒë·ªÉ t·ª± vi·∫øt m√£ cho h√†m. Trong m·ª•c Function name, nh·∫≠p ch√≠nh x√°c insertStudentData. T√™n n√†y s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng khi t√≠ch h·ª£p v·ªõi API Gateway. Trong m·ª•c Runtime, ch·ªçn Python 3.13 (phi√™n b·∫£n Python m·ªõi nh·∫•t ƒë∆∞·ª£c y√™u c·∫ßu). N·∫øu Python 3.13 kh√¥ng c√≥ s·∫µn, ch·ªçn phi√™n b·∫£n Python m·ªõi nh·∫•t ƒë∆∞·ª£c h·ªó tr·ª£ (v√≠ d·ª•: Python 3.12 ho·∫∑c 3.11). Trong m·ª•c Architecture, ch·ªçn x86_64 ƒë·ªÉ ƒë·∫£m b·∫£o t∆∞∆°ng th√≠ch v·ªõi ki·∫øn tr√∫c ti√™u chu·∫©n. H√¨nh 4: Giao di·ªán c·∫•u h√¨nh th√¥ng tin c∆° b·∫£n c·ªßa h√†m.\nTrong m·ª•c Permissions, ch·ªçn Use an existing role (S·ª≠ d·ª•ng vai tr√≤ hi·ªán c√≥).\nTrong danh s√°ch vai tr√≤, ch·ªçn LambdaInsertStudentRole (ƒë√£ t·∫°o ·ªü m·ª•c 2.2). L∆∞u √Ω quan tr·ªçng: Y√™u c·∫ßu ban ƒë·∫ßu ch·ªâ ƒë·ªãnh LambdaGetStudentRole, nh∆∞ng vai tr√≤ n√†y kh√¥ng ph√π h·ª£p v√¨ thi·∫øu quy·ªÅn dynamodb:PutItem v√† ses:SendEmail. Vai tr√≤ LambdaInsertStudentRole bao g·ªìm AWSLambdaBasicExecutionRole, AmazonDynamoDBReadOnlyAccess, AmazonSESFullAccess, AmazonS3FullAccess, v√† CloudFrontFullAccess, nh∆∞ng AmazonDynamoDBReadOnlyAccess kh√¥ng h·ªó tr·ª£ PutItem. C·∫ßn thay b·∫±ng AmazonDynamoDBFullAccess ho·∫∑c ch√≠nh s√°ch t√πy ch·ªânh (xem L∆∞u √Ω). Gi·ªØ c√°c thi·∫øt l·∫≠p kh√°c ·ªü gi√° tr·ªã m·∫∑c ƒë·ªãnh v√† nh·∫•n Create function ƒë·ªÉ t·∫°o h√†m.\nH√¨nh 5: Ch·ªçn vai tr√≤ LambdaInsertStudentRole v√† nh·∫•n Create function.\nKi·ªÉm Tra Tr·∫°ng Th√°i T·∫°o H√†m\nSau khi nh·∫•n Create function, b·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang chi ti·∫øt c·ªßa h√†m insertStudentData.\nGiao di·ªán s·∫Ω hi·ªÉn th·ªã th√¥ng b√°o t∆∞∆°ng t·ª±: \u0026ldquo;Successfully created the function insertStudentData. You can now change its code and configuration. To invoke your function with a test event, choose Test.\u0026rdquo;\nN·∫øu kh√¥ng th·∫•y th√¥ng b√°o ho·∫∑c g·∫∑p l·ªói, ki·ªÉm tra l·∫°i vai tr√≤ LambdaInsertStudentRole c√≥ t·ªìn t·∫°i v√† t√†i kho·∫£n AWS c·ªßa b·∫°n c√≥ quy·ªÅn lambda:CreateFunction hay kh√¥ng.\nH√¨nh 6: Trang chi ti·∫øt c·ªßa h√†m insertStudentData sau khi t·∫°o.\nC·∫•u H√¨nh M√£ Ngu·ªìn\nTrong giao di·ªán chi ti·∫øt c·ªßa h√†m insertStudentData, t·∫°i tab Code, cu·ªôn xu·ªëng ph·∫ßn Code source. Trong t·ªáp lambda_function.py, x√≥a m√£ m·∫∑c ƒë·ªãnh v√† d√°n m√£ sau: import json import boto3 import logging # Thi·∫øt l·∫≠p logging logger = logging.getLogger() logger.setLevel(logging.INFO) # Kh·ªüi t·∫°o k·∫øt n·ªëi DynamoDB v√† SES dynamodb = boto3.resource(\u0026#39;dynamodb\u0026#39;) table = dynamodb.Table(\u0026#39;studentData\u0026#39;) ses = boto3.client(\u0026#39;ses\u0026#39;, region_name=\u0026#39;us-east-1\u0026#39;) def lambda_handler(event, context): logger.info(\u0026#34;Event nh·∫≠n ƒë∆∞·ª£c: %s\u0026#34;, json.dumps(event)) # X·ª≠ l√Ω request body try: if isinstance(event.get(\u0026#39;body\u0026#39;), str): body = json.loads(event[\u0026#39;body\u0026#39;]) elif isinstance(event.get(\u0026#39;body\u0026#39;), dict): body = event[\u0026#39;body\u0026#39;] else: body = {} except Exception as e: logger.error(\u0026#34;L·ªói khi parse JSON: %s\u0026#34;, str(e)) return _response(400, \u0026#34;D·ªØ li·ªáu g·ª≠i l√™n kh√¥ng h·ª£p l·ªá.\u0026#34;) # L·∫•y c√°c tr∆∞·ªùng student_id = body.get(\u0026#39;studentid\u0026#39;) name = body.get(\u0026#39;name\u0026#39;) student_class = body.get(\u0026#39;class\u0026#39;) birthdate = body.get(\u0026#39;birthdate\u0026#39;) email = body.get(\u0026#39;email\u0026#39;) # Ki·ªÉm tra d·ªØ li·ªáu h·ª£p l·ªá if not all([student_id, name, student_class, birthdate, email]): logger.error(\u0026#34;Thi·∫øu c√°c tr∆∞·ªùng: studentid=%s, name=%s, class=%s, birthdate=%s, email=%s\u0026#34;, student_id, name, student_class, birthdate, email) return _response(400, \u0026#34;Thi·∫øu th√¥ng tin sinh vi√™n c·∫ßn thi·∫øt.\u0026#34;) # Ki·ªÉm tra tr√πng m√£ sinh vi√™n try: existing = table.get_item(Key={\u0026#39;studentid\u0026#39;: student_id}) if \u0026#39;Item\u0026#39; in existing: logger.error(\u0026#34;M√£ sinh vi√™n %s ƒë√£ t·ªìn t·∫°i\u0026#34;, student_id) return _response(409, f\u0026#34;M√£ sinh vi√™n \u0026#39;{student_id}\u0026#39; ƒë√£ t·ªìn t·∫°i.\u0026#34;) except Exception as e: logger.error(\u0026#34;L·ªói khi ki·ªÉm tra m√£ sinh vi√™n: %s\u0026#34;, str(e)) return _response(500, \u0026#34;L·ªói khi ki·ªÉm tra d·ªØ li·ªáu.\u0026#34;) # L∆∞u d·ªØ li·ªáu v√†o DynamoDB try: table.put_item( Item={ \u0026#39;studentid\u0026#39;: student_id, \u0026#39;name\u0026#39;: name, \u0026#39;class\u0026#39;: student_class, \u0026#39;birthdate\u0026#39;: birthdate, \u0026#39;email\u0026#39;: email } ) logger.info(\u0026#34;L∆∞u d·ªØ li·ªáu th√†nh c√¥ng cho studentid: %s\u0026#34;, student_id) except Exception as e: logger.error(\u0026#34;L·ªói khi l∆∞u v√†o DynamoDB: %s\u0026#34;, str(e)) return _response(500, \u0026#34;L·ªói khi l∆∞u d·ªØ li·ªáu v√†o h·ªá th·ªëng.\u0026#34;) # G·ª≠i email th√¥ng b√°o email_error = None try: ses.send_email( Source=\u0026#39;baothangvip@gmail.com\u0026#39;, Destination={\u0026#39;ToAddresses\u0026#39;: [email]}, Message={ \u0026#39;Subject\u0026#39;: {\u0026#39;Data\u0026#39;: \u0026#39;D·ªØ Li·ªáu Sinh Vi√™n ƒê√£ ƒê∆∞·ª£c L∆∞u\u0026#39;}, \u0026#39;Body\u0026#39;: { \u0026#39;Text\u0026#39;: { \u0026#39;Data\u0026#39;: ( f\u0026#39;üì¢ TH√îNG B√ÅO T·ª™ H·ªÜ TH·ªêNG QU·∫¢N L√ù SINH VI√äN HUTECH\\n\\n\u0026#39; f\u0026#39;Ch√†o b·∫°n {name},\\n\\n\u0026#39; f\u0026#39;‚úÖ Th√¥ng tin sinh vi√™n c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c l∆∞u th√†nh c√¥ng tr√™n h·ªá th·ªëng.\\n\\n\u0026#39; f\u0026#39;üîπ M√£ sinh vi√™n: {student_id}\\n\u0026#39; f\u0026#39;üîπ H·ªç t√™n: {name}\\n\u0026#39; f\u0026#39;üîπ L·ªõp: {student_class}\\n\u0026#39; f\u0026#39;üîπ Ng√†y sinh: {birthdate}\\n\\n\u0026#39; f\u0026#39;üì¨ Vui l√≤ng gi·ªØ email n√†y ƒë·ªÉ ƒë·ªëi chi·∫øu khi c·∫ßn thi·∫øt.\\n\\n\u0026#39; f\u0026#39;Th√¢n m·∫øn,\\n\u0026#39; f\u0026#39;üìò H·ªá th·ªëng qu·∫£n l√Ω sinh vi√™n\\n\u0026#39; f\u0026#39;üìß Email: hutech@system.edu.vn (n·∫øu b·∫°n mu·ªën d√πng t√™n mi·ªÅn ri√™ng)\\n\u0026#39; ) } } } ) logger.info(\u0026#34;G·ª≠i email th√†nh c√¥ng t·ªõi: %s\u0026#34;, email) except Exception as e: email_error = str(e) logger.error(\u0026#34;L·ªói khi g·ª≠i email t·ªõi %s: %s\u0026#34;, email, email_error) # Tr·∫£ k·∫øt qu·∫£ if email_error: return _response(200, f\u0026#34;D·ªØ li·ªáu sinh vi√™n ƒë√£ ƒë∆∞·ª£c l∆∞u nh∆∞ng g·ª≠i email t·ªõi {email} th·∫•t b·∫°i: {email_error}\u0026#34;) return _response(200, \u0026#34;D·ªØ li·ªáu sinh vi√™n ƒë√£ ƒë∆∞·ª£c l∆∞u v√† email th√¥ng b√°o ƒë√£ ƒë∆∞·ª£c g·ª≠i!\u0026#34;) # H√†m tr·∫£ v·ªÅ response chu·∫©n def _response(status_code, message): return { \u0026#39;statusCode\u0026#39;: status_code, \u0026#39;body\u0026#39;: json.dumps({\u0026#39;message\u0026#39;: message}), \u0026#39;headers\u0026#39;: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, \u0026#39;Access-Control-Allow-Origin\u0026#39;: \u0026#39;*\u0026#39; } } Gi·∫£i th√≠ch m√£:\nLogging: S·ª≠ d·ª•ng logging ƒë·ªÉ ghi log chi ti·∫øt v√†o CloudWatch (m·ª©c INFO v√† ERROR), h·ªó tr·ª£ gi√°m s√°t v√† g·ª° l·ªói. X·ª≠ l√Ω ƒë·∫ßu v√†o: Ki·ªÉm tra event['body'] l√† chu·ªói JSON ho·∫∑c dict, x·ª≠ l√Ω l·ªói parse JSON. Ki·ªÉm tra d·ªØ li·ªáu: ƒê·∫£m b·∫£o t·∫•t c·∫£ c√°c tr∆∞·ªùng studentid, name, class, birthdate, email ƒë∆∞·ª£c cung c·∫•p. Ki·ªÉm tra tr√πng l·∫∑p: S·ª≠ d·ª•ng GetItem ƒë·ªÉ ki·ªÉm tra studentid ƒë√£ t·ªìn t·∫°i trong b·∫£ng studentData. L∆∞u d·ªØ li·ªáu: Thao t√°c PutItem l∆∞u d·ªØ li·ªáu sinh vi√™n v√†o b·∫£ng studentData. G·ª≠i email: G·ª≠i email x√°c nh·∫≠n qua SES v·ªõi n·ªôi dung chi ti·∫øt, s·ª≠ d·ª•ng baothangvip@gmail.com l√†m ngu·ªìn (ph·∫£i ƒë∆∞·ª£c x√°c minh trong SES). Ph·∫£n h·ªìi: Tr·∫£ v·ªÅ JSON v·ªõi m√£ tr·∫°ng th√°i (200, 400, 409, 500) v√† header CORS ƒë·ªÉ t√≠ch h·ª£p v·ªõi giao di·ªán web. Ki·ªÉm tra v√† thay ƒë·ªïi:\nV√πng AWS: Thay region_name='us-east-1' trong d√≤ng ses = boto3.client('ses', region_name='us-east-1') n·∫øu b·∫°n s·ª≠ d·ª•ng v√πng kh√°c (v√≠ d·ª•: us-west-2). L∆∞u √Ω r·∫±ng dynamodb = boto3.resource('dynamodb') kh√¥ng ch·ªâ ƒë·ªãnh v√πng ƒë·ªÉ linh ho·∫°t h∆°n, nh∆∞ng b·∫°n n√™n th√™m region_name='us-east-1' cho ƒë·ªìng b·ªô: dynamodb = boto3.resource(\u0026#39;dynamodb\u0026#39;, region_name=\u0026#39;us-east-1\u0026#39;) Email ngu·ªìn: Thay baothangvip@gmail.com b·∫±ng email ƒë√£ x√°c minh trong SES (m·ª•c 2.5). N·∫øu ch∆∞a x√°c minh, h√†m s·∫Ω b√°o l·ªói \u0026ldquo;Email address is not verified\u0026rdquo;. Nh·∫•n Deploy ƒë·ªÉ l∆∞u v√† tri·ªÉn khai m√£.\nH√¨nh 7: Giao di·ªán ch·ªânh s·ª≠a m√£ ngu·ªìn insertStudentData.\nSau khi tri·ªÉn khai, giao di·ªán s·∫Ω hi·ªÉn th·ªã th√¥ng b√°o: \u0026ldquo;Successfully updated the function insertStudentData.\u0026rdquo;\nH√¨nh 8: Th√¥ng b√°o tri·ªÉn khai th√†nh c√¥ng.\nC·∫•u H√¨nh Timeout v√† B·ªô Nh·ªõ\nTrong tab Configuration \u0026gt; General configuration, nh·∫•n Edit. ƒê·∫∑t Timeout: 30 gi√¢y (ƒë·ªß cho thao t√°c PutItem, GetItem, v√† g·ª≠i email qua SES). ƒê·∫∑t Memory: 128 MB (m·∫∑c ƒë·ªãnh, ƒë·ªß cho h√†m n√†y v√¨ c√°c thao t√°c ƒë∆°n gi·∫£n). Nh·∫•n Save ƒë·ªÉ l∆∞u thay ƒë·ªïi. Ki·ªÉm Tra H√†m\nTrong tab Test, nh·∫•n Create new test event. ƒê·∫∑t t√™n s·ª± ki·ªán (v√≠ d·ª•: testInsertStudentData). S·ª≠ d·ª•ng JSON m·∫´u: { \u0026#34;body\u0026#34;: \u0026#34;{\\\u0026#34;studentid\\\u0026#34;: \\\u0026#34;SV001\\\u0026#34;, \\\u0026#34;name\\\u0026#34;: \\\u0026#34;Nguyen Van A\\\u0026#34;, \\\u0026#34;class\\\u0026#34;: \\\u0026#34;CNTT01\\\u0026#34;, \\\u0026#34;birthdate\\\u0026#34;: \\\u0026#34;2000-01-01\\\u0026#34;, \\\u0026#34;email\\\u0026#34;: \\\u0026#34;baothangvip@gmail.com\\\u0026#34;}\u0026#34; } Nh·∫•n Create ƒë·ªÉ l∆∞u s·ª± ki·ªán ki·ªÉm tra, sau ƒë√≥ nh·∫•n Test ƒë·ªÉ ch·∫°y h√†m. Ki·ªÉm tra k·∫øt qu·∫£: N·∫øu th√†nh c√¥ng, h√†m tr·∫£ v·ªÅ: { \u0026#34;statusCode\u0026#34;: 200, \u0026#34;body\u0026#34;: \u0026#34;{\\\u0026#34;message\\\u0026#34;: \\\u0026#34;D·ªØ li·ªáu sinh vi√™n ƒë√£ ƒë∆∞·ª£c l∆∞u v√† email th√¥ng b√°o ƒë√£ ƒë∆∞·ª£c g·ª≠i!\\\u0026#34;}\u0026#34;, \u0026#34;headers\u0026#34;: { \u0026#34;Content-Type\u0026#34;: \u0026#34;application/json\u0026#34;, \u0026#34;Access-Control-Allow-Origin\u0026#34;: \u0026#34;*\u0026#34; } } Ki·ªÉm tra b·∫£ng studentData trong DynamoDB Console ƒë·ªÉ x√°c minh d·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c l∆∞u (v√†o DynamoDB \u0026gt; Tables \u0026gt; studentData \u0026gt; Explore items). Ki·ªÉm tra h·ªôp th∆∞ c·ªßa email nh·∫≠n (baothangvip@gmail.com, bao g·ªìm Spam/Junk) ƒë·ªÉ xem email x√°c nh·∫≠n. N·∫øu g·∫∑p l·ªói, ki·ªÉm tra log trong CloudWatch (v√†o Monitor \u0026gt; Logs \u0026gt; ch·ªçn log group /aws/lambda/insertStudentData). C√°c l·ªói ph·ªï bi·∫øn: \u0026ldquo;AccessDenied\u0026rdquo; (DynamoDB): Vai tr√≤ LambdaInsertStudentRole thi·∫øu quy·ªÅn PutItem. Thay AmazonDynamoDBReadOnlyAccess b·∫±ng ch√≠nh s√°ch t√πy ch·ªânh ho·∫∑c AmazonDynamoDBFullAccess. \u0026ldquo;Email address is not verified\u0026rdquo; (SES): ƒê·∫£m b·∫£o email baothangvip@gmail.com ƒë√£ ƒë∆∞·ª£c x√°c minh trong SES (m·ª•c 2.5). N·∫øu SES ·ªü ch·∫ø ƒë·ªô sandbox, email nh·∫≠n c≈©ng ph·∫£i ƒë∆∞·ª£c x√°c minh. \u0026ldquo;ResourceNotFoundException\u0026rdquo;: ƒê·∫£m b·∫£o b·∫£ng studentData ƒë√£ ƒë∆∞·ª£c t·∫°o (m·ª•c 2.4). \u0026ldquo;Invalid JSON\u0026rdquo;: Ki·ªÉm tra JSON trong s·ª± ki·ªán ki·ªÉm tra c√≥ ƒë√∫ng ƒë·ªãnh d·∫°ng kh√¥ng. L∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt S·ª≠a l·ªói vai tr√≤ IAM Y√™u c·∫ßu ban ƒë·∫ßu s·ª≠ d·ª•ng LambdaGetStudentRole, nh∆∞ng vai tr√≤ n√†y kh√¥ng ph√π h·ª£p v√¨ thi·∫øu quy·ªÅn dynamodb:PutItem v√† ses:SendEmail. S·ª≠ d·ª•ng LambdaInsertStudentRole (t·∫°o ·ªü m·ª•c 2.2) l√† ƒë√∫ng. N·∫øu b·∫°n c·ªë √Ω mu·ªën d√πng LambdaGetStudentRole, c·∫ßn th√™m c√°c ch√≠nh s√°ch AmazonDynamoDBFullAccess v√† AmazonSESFullAccess v√†o vai tr√≤ n√†y trong IAM Console: - V√†o IAM \u0026gt; Roles \u0026gt; LambdaGetStudentRole \u0026gt; Add permissions \u0026gt; Attach policies. - T√¨m v√† ch·ªçn AmazonDynamoDBFullAccess v√† AmazonSESFullAccess. Tuy nhi√™n, ƒë·ªÉ tr√°nh nh·∫ßm l·∫´n, n√™n s·ª≠ d·ª•ng LambdaInsertStudentRole nh∆∞ h∆∞·ªõng d·∫´n. DynamoDB quy·ªÅn Ch√≠nh s√°ch AmazonDynamoDBReadOnlyAccess trong LambdaInsertStudentRole kh√¥ng h·ªó tr·ª£ PutItem. C·∫ßn thay b·∫±ng AmazonDynamoDBFullAccess ho·∫∑c ch√≠nh s√°ch t√πy ch·ªânh nh∆∞ sau: - V√†o IAM \u0026gt; Policies \u0026gt; Create Policy. - Ch·ªçn JSON, d√°n ch√≠nh s√°ch t√πy ch·ªânh (thay your-account-id b·∫±ng ID t√†i kho·∫£n AWS). - ƒê·∫∑t t√™n (v√≠ d·ª•: DynamoDBPutItemStudentData) v√† g·∫Øn v√†o LambdaInsertStudentRole. SES Sandbox ƒê·∫£m b·∫£o email ngu·ªìn (baothangvip@gmail.com) ƒë√£ ƒë∆∞·ª£c x√°c minh trong SES (m·ª•c 2.5). N·∫øu SES ·ªü ch·∫ø ƒë·ªô sandbox, email nh·∫≠n (body['email']) c≈©ng ph·∫£i ƒë∆∞·ª£c x√°c minh. Tho√°t sandbox ƒë·ªÉ g·ª≠i email ƒë·∫øn ƒë·ªãa ch·ªâ b·∫•t k·ª≥. B·∫£ng DynamoDB B·∫£ng studentData ph·∫£i t·ªìn t·∫°i v·ªõi studentid (Partition Key, String), name, class, birthdate, email. Ho√†n th√†nh m·ª•c 2.4 tr∆∞·ªõc. CORS Header Access-Control-Allow-Origin: '*' c·∫ßn cho giao di·ªán web (CloudFront) g·ªçi qua API Gateway. C·∫•u h√¨nh CORS trong API Gateway sau. V√πng AWS ƒê·∫£m b·∫£o region_name='us-east-1' trong m√£ kh·ªõp v·ªõi v√πng c·ªßa b·∫£ng studentData v√† SES. C·∫≠p nh·∫≠t n·∫øu d√πng v√πng kh√°c (v√≠ d·ª•: us-west-2). X·ª≠ l√Ω l·ªói Ki·ªÉm tra log trong CloudWatch (/aws/lambda/insertStudentData) n·∫øu l·ªói. D√πng CloudTrail ho·∫∑c IAM Access Advisor ƒë·ªÉ x√°c ƒë·ªãnh v·∫•n ƒë·ªÅ quy·ªÅn. T·ªëi ∆∞u h√≥a Thao t√°c PutItem v√† GetItem hi·ªáu qu·∫£ h∆°n Scan. Th√™m d·ªØ li·ªáu m·∫´u v√†o studentData ƒë·ªÉ th·ª≠ nghi·ªám. Ki·ªÉm tra s·ªõm Ch·∫°y ki·ªÉm tra ƒë·ªÉ x√°c minh d·ªØ li·ªáu l∆∞u ƒë√∫ng v√† email ƒë∆∞·ª£c g·ª≠i tr∆∞·ªõc khi t√≠ch h·ª£p v·ªõi API Gateway. M·∫πo th·ª±c ti·ªÖn: Th√™m d·ªØ li·ªáu m·∫´u v√†o b·∫£ng studentData, ki·ªÉm tra log CloudWatch, v√† x√°c minh email nh·∫≠n ƒë·ªÉ g·ª° l·ªói tr∆∞·ªõc khi t√≠ch h·ª£p.\nK·∫øt Lu·∫≠n H√†m Lambda insertStudentData ƒë√£ ƒë∆∞·ª£c t·∫°o ƒë·ªÉ nh·∫≠n v√† l∆∞u d·ªØ li·ªáu sinh vi√™n v√†o b·∫£ng studentData, ƒë·ªìng th·ªùi g·ª≠i email x√°c nh·∫≠n qua SES. H√†m s·∫µn s√†ng t√≠ch h·ª£p v·ªõi API Gateway.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn T·∫°o h√†m BackupDynamoDBAndSendEmail ƒë·ªÉ ti·∫øp t·ª•c!\n"
},
{
	"uri": "//localhost:1313/vi/4-creating-a-restful-api/4.2-creating-an-api-key/",
	"title": "T·∫°o API Key ƒë·ªÉ b·∫£o v·ªá truy c·∫≠p",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o m·ªôt API Key c√≥ t√™n StudentApiKey trong AWS API Gateway ƒë·ªÉ b·∫£o v·ªá c√°c endpoint c·ªßa API student (t·∫°o ·ªü m·ª•c 4.1), ƒë·∫£m b·∫£o ch·ªâ c√°c y√™u c·∫ßu t·ª´ giao di·ªán web (ch·∫°y tr√™n CloudFront) ho·∫∑c client ƒë∆∞·ª£c c·∫•p key h·ª£p l·ªá m·ªõi c√≥ th·ªÉ truy c·∫≠p. API Key s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng trong header x-api-key khi g·ªçi c√°c endpoint (GET /students, POST /students, POST /backup) v√† s·∫Ω ƒë∆∞·ª£c li√™n k·∫øt v·ªõi Usage Plan (m·ª•c 4.3) ƒë·ªÉ qu·∫£n l√Ω gi·ªõi h·∫°n truy c·∫≠p.\nT·ªïng Quan v·ªÅ API Key trong API Gateway API Key l√† m·ªôt chu·ªói k√Ω t·ª± d√πng ƒë·ªÉ x√°c th·ª±c c√°c y√™u c·∫ßu g·ª≠i ƒë·∫øn API Gateway, ngƒÉn ch·∫∑n truy c·∫≠p tr√°i ph√©p. API Key ƒë∆∞·ª£c g·ª≠i trong header x-api-key c·ªßa m·ªói y√™u c·∫ßu HTTP (v√≠ d·ª•: GET https://api-id.execute-api.us-east-1.amazonaws.com/prod/students). Trong h·ªá th·ªëng n√†y, StudentApiKey s·∫Ω b·∫£o m·∫≠t c√°c endpoint t√≠ch h·ª£p v·ªõi c√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail). API Key s·∫Ω ƒë∆∞·ª£c t√≠ch h·ª£p v√†o giao di·ªán web (s·ª≠ d·ª•ng Tailwind CSS, ch·∫°y tr√™n CloudFront) ƒë·ªÉ g·ªçi API m·ªôt c√°ch an to√†n. Y√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh m·ª•c 4.1 (t·∫°o API student) v√† m·ª•c 3 (t·∫°o c√°c h√†m Lambda getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, SES email x√°c minh). ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1.\nH√†nh ƒê·ªông Chi Ti·∫øt Truy C·∫≠p AWS Management Console\nM·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS c·ªßa b·∫°n.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p API Gateway v√† ch·ªçn d·ªãch v·ª• Amazon API Gateway ƒë·ªÉ v√†o giao di·ªán qu·∫£n l√Ω.\nKi·ªÉm tra v√πng AWS: ƒê·∫£m b·∫£o b·∫°n ƒëang l√†m vi·ªác trong v√πng AWS ch√≠nh (v√≠ d·ª•: us-east-1), ki·ªÉm tra v√πng ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. V√πng n√†y ph·∫£i kh·ªõp v·ªõi API student (t·∫°o ·ªü m·ª•c 4.1) v√† c√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail).\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm API Gateway.\nƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c API Keys\nTrong giao di·ªán ch√≠nh c·ªßa Amazon API Gateway, nh√¨n v√†o menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn API Keys ƒë·ªÉ xem danh s√°ch c√°c API Key hi·ªán c√≥. N·∫øu b·∫°n ch∆∞a t·∫°o key n√†o, danh s√°ch s·∫Ω tr·ªëng.\nGiao di·ªán s·∫Ω hi·ªÉn th·ªã c√°c t√πy ch·ªçn ƒë·ªÉ t·∫°o ho·∫∑c qu·∫£n l√Ω API Key.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn API Keys.\nKh·ªüi T·∫°o Qu√° Tr√¨nh T·∫°o API Key\nTrong giao di·ªán API Keys, nh·∫•n n√∫t Create API Key (T·∫°o API Key) ·ªü g√≥c tr√™n b√™n ph·∫£i ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh key m·ªõi.\nH√¨nh 3: N√∫t Create API Key trong giao di·ªán API Keys.\nC·∫•u H√¨nh API Key\nTrong m·ª•c Create API Key:\nName: Nh·∫≠p ch√≠nh x√°c StudentApiKey. T√™n n√†y gi√∫p b·∫°n d·ªÖ d√†ng nh·∫≠n di·ªán key khi li√™n k·∫øt v·ªõi Usage Plan. Description: Nh·∫≠p API Key ƒë·ªÉ b·∫£o v·ªá truy c·∫≠p v√†o StudentManagementAPI (ho·∫∑c m√¥ t·∫£ t∆∞∆°ng t·ª± ƒë·ªÉ r√µ r√†ng m·ª•c ƒë√≠ch). API Key: Ch·ªçn Auto Generate ƒë·ªÉ AWS t·∫°o m·ªôt chu·ªói ng·∫´u nhi√™n, ƒë·∫£m b·∫£o t√≠nh b·∫£o m·∫≠t. L∆∞u √Ω: B·∫°n c√≥ th·ªÉ nh·∫≠p key t√πy ch·ªânh, nh∆∞ng Auto Generate ƒë∆∞·ª£c khuy·∫øn ngh·ªã ƒë·ªÉ tr√°nh key d·ªÖ ƒëo√°n. Enabled: ƒê·∫£m b·∫£o t√πy ch·ªçn n√†y ƒë∆∞·ª£c ch·ªçn ƒë·ªÉ key c√≥ th·ªÉ s·ª≠ d·ª•ng ngay sau khi t·∫°o. Nh·∫•n Save ƒë·ªÉ t·∫°o API Key.\nH√¨nh 4: Giao di·ªán c·∫•u h√¨nh API Key.\nKi·ªÉm Tra Tr·∫°ng Th√°i v√† Sao Ch√©p API Key\nSau khi nh·∫•n Save, b·∫°n s·∫Ω th·∫•y th√¥ng b√°o: \u0026ldquo;Successfully created API Key ‚ÄòStudentApiKey‚Äô.\u0026rdquo;\nTrong danh s√°ch API Keys, ch·ªçn StudentApiKey ƒë·ªÉ xem chi ti·∫øt.\nNh·∫•n Show b√™n c·∫°nh API Key ƒë·ªÉ hi·ªÉn th·ªã gi√° tr·ªã key (v√≠ d·ª•: xxxxxxxxxxxxxxxxxxxx).\nSao ch√©p API Key:\nSao ch√©p gi√° tr·ªã key v√† l∆∞u ·ªü n∆°i an to√†n (v√≠ d·ª•: t·ªáp b·∫£o m·∫≠t c·ª•c b·ªô, AWS Secrets Manager, ho·∫∑c tr√¨nh qu·∫£n l√Ω m·∫≠t kh·∫©u). L∆∞u √Ω quan tr·ªçng: API Key ch·ªâ hi·ªÉn th·ªã m·ªôt l·∫ßn ngay sau khi t·∫°o. N·∫øu m·∫•t, b·∫°n ph·∫£i t·∫°o key m·ªõi v√† c·∫≠p nh·∫≠t trong Usage Plan (m·ª•c 4.3) v√† giao di·ªán web. API Key n√†y s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng trong giao di·ªán web ƒë·ªÉ g·ªçi c√°c endpoint (GET /students, POST /students, POST /backup) b·∫±ng c√°ch th√™m v√†o header x-api-key.\nH√¨nh 5: Th√¥ng b√°o th√†nh c√¥ng v√† chi ti·∫øt API Key.\nL∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt B·∫£o m·∫≠t API Key Kh√¥ng nh√∫ng API Key tr·ª±c ti·∫øp trong m√£ JavaScript c·ªßa giao di·ªán web (ch·∫°y tr√™n CloudFront). Thay v√†o ƒë√≥, s·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng ho·∫∑c AWS Secrets Manager ƒë·ªÉ l∆∞u tr·ªØ v√† truy xu·∫•t key an to√†n. - V√†o AWS Secrets Manager \u0026gt; Store a new secret \u0026gt; Ch·ªçn Other type of secret \u0026gt; Nh·∫≠p API Key. - ƒê·∫∑t t√™n b√≠ m·∫≠t (v√≠ d·ª•: student-api-key) v√† truy xu·∫•t trong m√£ giao di·ªán web th√¥ng qua AWS SDK. V√πng AWS API Key ho·∫°t ƒë·ªông tr√™n to√†n b·ªô t√†i kho·∫£n AWS, kh√¥ng b·ªã gi·ªõi h·∫°n b·ªüi v√πng. Tuy nhi√™n, ƒë·∫£m b·∫£o API student v√† c√°c h√†m Lambda ƒë·ªÅu ·ªü c√πng v√πng (us-east-1) ƒë·ªÉ tr√°nh l·ªói t√≠ch h·ª£p. X·ª≠ l√Ω l·ªói N·∫øu kh√¥ng th·∫•y th√¥ng b√°o th√†nh c√¥ng ho·∫∑c g·∫∑p l·ªói \u0026ldquo;AccessDenied\u0026rdquo;: - Ki·ªÉm tra quy·ªÅn IAM c·ªßa t√†i kho·∫£n AWS c√≥ bao g·ªìm apigateway:POST ƒë·ªÉ t·∫°o API Key. - ƒê·∫£m b·∫£o b·∫°n ƒëang ·ªü ƒë√∫ng v√πng AWS (us-east-1). N·∫øu API Key kh√¥ng hi·ªÉn th·ªã, l√†m m·ªõi trang ho·∫∑c ki·ªÉm tra l·∫°i danh s√°ch API Keys. T·ªëi ∆∞u h√≥a - Sau khi t·∫°o, li√™n k·∫øt API Key v·ªõi Usage Plan (m·ª•c 4.3) ƒë·ªÉ √°p d·ª•ng gi·ªõi h·∫°n truy c·∫≠p (rate limiting, quota). - C√¢n nh·∫Øc s·ª≠ d·ª•ng AWS WAF v·ªõi API Gateway ƒë·ªÉ b·∫£o v·ªá th√™m kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng (v√≠ d·ª•: DDoS). - N·∫øu c·∫ßn nhi·ªÅu API Key (cho c√°c client kh√°c nhau), t·∫°o th√™m key v√† qu·∫£n l√Ω trong c√πng Usage Plan. Ki·ªÉm tra s·ªõm - Sau khi t·∫°o API Key, x√°c minh key xu·∫•t hi·ªán trong danh s√°ch API Keys v√† gi√° tr·ªã key ƒë∆∞·ª£c sao ch√©p an to√†n. - Ki·ªÉm tra key b·∫±ng c√°ch g·ªçi th·ª≠ API (sau khi c·∫•u h√¨nh method v√† deploy ·ªü c√°c m·ª•c 4.4‚Äì4.8) s·ª≠ d·ª•ng Postman ho·∫∑c curl: curl -X GET https://api-id.execute-api.us-east-1.amazonaws.com/prod/students -H \u0026quot;x-api-key: xxxxxxxxxxxxxxxxxxxx\u0026quot; Ki·ªÉm tra t√≠ch h·ª£p v·ªõi giao di·ªán web - Sau khi t·∫°o API Key, nh√∫ng key n√†y v√†o giao di·ªán web (s·ª≠ d·ª•ng Tailwind CSS, ch·∫°y tr√™n CloudFront) ƒë·ªÉ g·ªçi c√°c endpoint. - ƒê·∫£m b·∫£o API Key ƒë∆∞·ª£c g·ª≠i trong header x-api-key khi g·ªçi c√°c endpoint (GET /students, POST /students, POST /backup). M·∫πo th·ª±c ti·ªÖn: L∆∞u API Key an to√†n ngay sau khi t·∫°o v√† ki·ªÉm tra t√≠ch h·ª£p v·ªõi m·ªôt y√™u c·∫ßu th·ª≠ (s·ª≠ d·ª•ng Postman ho·∫∑c curl) tr∆∞·ªõc khi nh√∫ng v√†o giao di·ªán web.\nK·∫øt Lu·∫≠n API Key StudentApiKey ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng trong AWS API Gateway, s·∫µn s√†ng ƒë·ªÉ li√™n k·∫øt v·ªõi Usage Plan v√† b·∫£o v·ªá c√°c endpoint c·ªßa API student.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn Thi·∫øt l·∫≠p Usage Plan (K·∫ø ho·∫°ch s·ª≠ d·ª•ng) ƒë·ªÉ ti·∫øp t·ª•c!\n"
},
{
	"uri": "//localhost:1313/vi/2-preparation-steps/2.1-create-iam-role-for-lambda-get/",
	"title": "T·∫°o IAM Role cho Lambda Get",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o vai tr√≤ IAM LambdaGetStudentRole cho h√†m Lambda getStudentData, c·∫•p quy·ªÅn ƒë·ªÉ ƒë·ªçc d·ªØ li·ªáu t·ª´ b·∫£ng DynamoDB studentData, ghi log v√†o CloudWatch, v√† h·ªó tr·ª£ c√°c t∆∞∆°ng t√°c ti·ªÅm nƒÉng v·ªõi S3 v√† CloudFront.\nH√†m getStudentData th·ª±c hi·ªán thao t√°c Scan ƒë·ªÉ truy xu·∫•t to√†n b·ªô d·ªØ li·ªáu sinh vi√™n (M√£ sinh vi√™n, H·ªç t√™n, L·ªõp, Ng√†y sinh, Email) t·ª´ b·∫£ng DynamoDB studentData. Vai tr√≤ n√†y c·∫ßn:\nQuy·ªÅn ghi log v√†o CloudWatch (AWSLambdaBasicExecutionRole). Quy·ªÅn ƒë·ªçc d·ªØ li·ªáu t·ª´ DynamoDB (AmazonDynamoDBReadOnlyAccess). Quy·ªÅn S3 v√† CloudFront (AmazonS3FullAccess, CloudFrontFullAccess) cho c√°c t√≠nh nƒÉng m·ªü r·ªông ti·ªÅm nƒÉng. L∆∞u √Ω: AmazonS3FullAccess v√† CloudFrontFullAccess kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng trong m√£ hi·ªán t·∫°i nh∆∞ng ƒë∆∞·ª£c gi·ªØ l·∫°i ƒë·ªÉ h·ªó tr·ª£ c√°c t√≠nh nƒÉng t∆∞∆°ng lai (v√≠ d·ª•: l∆∞u t·ªáp v√†o S3 ho·∫∑c qu·∫£n l√Ω CloudFront).\nH√†nh ƒê·ªông Chi Ti·∫øt D∆∞·ªõi ƒë√¢y l√† c√°c b∆∞·ªõc chi ti·∫øt ƒë·ªÉ t·∫°o vai tr√≤ IAM LambdaGetStudentRole:\n1. Truy C·∫≠p AWS Management Console M·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS c·ªßa b·∫°n.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p IAM v√† ch·ªçn Identity and Access Management (IAM).\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm IAM.\n2. ƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c Roles Trong giao di·ªán IAM, t√¨m menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn Roles (Vai tr√≤) ƒë·ªÉ xem danh s√°ch c√°c vai tr√≤ IAM. N·∫øu ch∆∞a c√≥ vai tr√≤ n√†o, danh s√°ch s·∫Ω tr·ªëng.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn Roles.\n3. Kh·ªüi T·∫°o Qu√° Tr√¨nh T·∫°o Vai Tr√≤ Trong giao di·ªán Roles, nh·∫•n n√∫t Create Role (T·∫°o Vai tr√≤) ·ªü g√≥c tr√™n b√™n ph·∫£i.\nH√¨nh 3: N√∫t Create Role trong giao di·ªán Roles.\n4. Ch·ªçn Trusted Entity Type Trong m·ª•c Select trusted entity, ch·ªçn AWS Service ƒë·ªÉ ch·ªâ ƒë·ªãnh vai tr√≤ d√†nh cho d·ªãch v·ª• AWS.\nTrong ph·∫ßn Use case, ch·ªçn Lambda t·ª´ danh s√°ch d·ªãch v·ª•.\nNh·∫•n Next ƒë·ªÉ chuy·ªÉn sang b∆∞·ªõc c·∫•u h√¨nh quy·ªÅn.\nH√¨nh 4: L·ª±a ch·ªçn AWS Service v√† Lambda trong Use case.\n5. C·∫•p Quy·ªÅn Cho Vai Tr√≤ Trong m·ª•c Permissions (Quy·ªÅn), th√™m b·ªën ch√≠nh s√°ch:\nAWSLambdaBasicExecutionRole:\nNh·∫≠p AWSLambdaBasicExecutionRole v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch AWSLambdaBasicExecutionRole. M√¥ t·∫£: Cho ph√©p h√†m Lambda ghi log v√†o CloudWatch ƒë·ªÉ gi√°m s√°t v√† g·ª° l·ªói.\nH√¨nh 5: Ch·ªçn ch√≠nh s√°ch AWSLambdaBasicExecutionRole.\nAmazonDynamoDBReadOnlyAccess:\nNh·∫≠p AmazonDynamoDBReadOnlyAccess v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch AmazonDynamoDBReadOnlyAccess. M√¥ t·∫£: C·∫•p quy·ªÅn ƒë·ªçc d·ªØ li·ªáu t·ª´ DynamoDB, h·ªó tr·ª£ thao t√°c Scan ho·∫∑c GetItem.\nH√¨nh 6: Ch·ªçn ch√≠nh s√°ch AmazonDynamoDBReadOnlyAccess.\nAmazonS3FullAccess:\nNh·∫≠p AmazonS3FullAccess v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch AmazonS3FullAccess. M√¥ t·∫£: C·∫•p quy·ªÅn ƒë·ªçc, ghi, qu·∫£n l√Ω S3 bucket cho c√°c t√≠nh nƒÉng m·ªü r·ªông ti·ªÅm nƒÉng (v√≠ d·ª•: l∆∞u t·ªáp b·ªï sung).\nH√¨nh 7: Ch·ªçn ch√≠nh s√°ch AmazonS3FullAccess.\nCloudFrontFullAccess:\nNh·∫≠p CloudFrontFullAccess v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch CloudFrontFullAccess. M√¥ t·∫£: C·∫•p quy·ªÅn qu·∫£n l√Ω CloudFront distribution cho c√°c t√≠nh nƒÉng m·ªü r·ªông ti·ªÅm nƒÉng.\nH√¨nh 8: Ch·ªçn ch√≠nh s√°ch CloudFrontFullAccess.\nKi·ªÉm tra danh s√°ch Permissions policies ƒë·ªÉ ƒë·∫£m b·∫£o c√≥:\nAWSLambdaBasicExecutionRole AmazonDynamoDBReadOnlyAccess AmazonS3FullAccess CloudFrontFullAccess Nh·∫•n Next.\n6. ƒê·∫∑t T√™n v√† Ki·ªÉm Tra Vai Tr√≤ Trong m·ª•c Role details:\nRole Name: Nh·∫≠p LambdaGetStudentRole. L∆∞u √Ω: T√™n ph·∫£i ch√≠nh x√°c ƒë·ªÉ kh·ªõp v·ªõi c·∫•u h√¨nh h√†m Lambda getStudentData.\nDescription (t√πy ch·ªçn): Nh·∫≠p m√¥ t·∫£, v√≠ d·ª•: \u0026ldquo;Vai tr√≤ IAM cho h√†m Lambda getStudentData, c·∫•p quy·ªÅn ƒë·ªçc DynamoDB, ghi log CloudWatch, v√† h·ªó tr·ª£ S3/CloudFront.\u0026rdquo; H√¨nh 9: Nh·∫≠p t√™n v√† m√¥ t·∫£ vai tr√≤.\nKi·ªÉm tra l·∫°i:\nTrusted entity: AWS Service (Lambda). Permissions: AWSLambdaBasicExecutionRole, AmazonDynamoDBReadOnlyAccess, AmazonS3FullAccess, CloudFrontFullAccess. Nh·∫•n Create Role (T·∫°o Vai tr√≤).\nH√¨nh 10: N√∫t Create Role ƒë·ªÉ x√°c nh·∫≠n.\n7. Ki·ªÉm Tra Tr·∫°ng Th√°i T·∫°o Vai Tr√≤ Sau khi nh·∫•n Create Role, b·∫°n s·∫Ω tr·ªü v·ªÅ danh s√°ch Roles.\nT√¨m vai tr√≤ LambdaGetStudentRole. N·∫øu th√†nh c√¥ng, b·∫°n s·∫Ω th·∫•y th√¥ng b√°o: \u0026ldquo;Role LambdaGetStudentRole created\u0026rdquo;.\nNh·∫•p v√†o LambdaGetStudentRole ƒë·ªÉ xem chi ti·∫øt:\nARN: Ghi l·∫°i ARN (v√≠ d·ª•: arn:aws:iam::your-account-id:role/LambdaGetStudentRole) ƒë·ªÉ s·ª≠ d·ª•ng khi c·∫•u h√¨nh h√†m Lambda. Policies: X√°c minh c√≥ AWSLambdaBasicExecutionRole, AmazonDynamoDBReadOnlyAccess, AmazonS3FullAccess, CloudFrontFullAccess. N·∫øu vai tr√≤ kh√¥ng xu·∫•t hi·ªán, l√†m m·ªõi trang ho·∫∑c ki·ªÉm tra l·∫°i c√°c b∆∞·ªõc.\nH√¨nh 11: Chi ti·∫øt vai tr√≤ LambdaGetStudentRole v·ªõi ARN v√† policies.\nL∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt T√™n vai tr√≤ Ph·∫£i l√† LambdaGetStudentRole (ph√¢n bi·ªát ch·ªØ hoa/th∆∞·ªùng) ƒë·ªÉ kh·ªõp v·ªõi h√†m Lambda. T√™n sai s·∫Ω g√¢y l·ªói khi th·ª±c thi. S3 v√† CloudFront AmazonS3FullAccess v√† CloudFrontFullAccess kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng hi·ªán t·∫°i nh∆∞ng gi·ªØ l·∫°i cho c√°c t√≠nh nƒÉng m·ªü r·ªông (v√≠ d·ª•: l∆∞u t·ªáp v√†o S3 ho·∫∑c qu·∫£n l√Ω CloudFront). X√≥a n·∫øu kh√¥ng c·∫ßn ƒë·ªÉ tu√¢n th·ªß least privilege. T·ªëi ∆∞u h√≥a b·∫£o m·∫≠t C√¢n nh·∫Øc t·∫°o ch√≠nh s√°ch t√πy ch·ªânh thay v√¨ AmazonDynamoDBReadOnlyAccess ƒë·ªÉ gi·ªõi h·∫°n quy·ªÅn ch·ªâ tr√™n b·∫£ng studentData. Ki·ªÉm tra s·ªõm Ghi l·∫°i ARN v√† ki·ªÉm tra vai tr√≤ trong IAM tr∆∞·ªõc khi c·∫•u h√¨nh h√†m Lambda ƒë·ªÉ ƒë·∫£m b·∫£o ho·∫°t ƒë·ªông ƒë√∫ng. X·ª≠ l√Ω l·ªói N·∫øu g·∫∑p l·ªói \u0026ldquo;Access Denied\u0026rdquo;, ki·ªÉm tra quy·ªÅn t√†i kho·∫£n AWS (iam:CreateRole) ho·∫∑c li√™n h·ªá qu·∫£n tr·ªã vi√™n. M·∫πo th·ª±c ti·ªÖn: Ki·ªÉm tra ARN v√† ch√≠nh s√°ch ngay sau khi t·∫°o vai tr√≤ ƒë·ªÉ x√°c minh c·∫•u h√¨nh tr∆∞·ªõc khi t√≠ch h·ª£p v·ªõi Lambda.\nK·∫øt Lu·∫≠n Vai tr√≤ IAM LambdaGetStudentRole ƒë·∫£m b·∫£o h√†m Lambda getStudentData c√≥ quy·ªÅn ƒë·ªçc d·ªØ li·ªáu t·ª´ DynamoDB, ghi log v√†o CloudWatch, v√† h·ªó tr·ª£ m·ªü r·ªông v·ªõi S3 v√† CloudFront. Vai tr√≤ n√†y s·∫µn s√†ng t√≠ch h·ª£p v√†o h√†m Lambda trong c√°c b∆∞·ªõc ti·∫øp theo.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn T·∫°o IAM Role cho Lambda Post ƒë·ªÉ thi·∫øt l·∫≠p vai tr√≤ cho h√†m l∆∞u tr·ªØ d·ªØ li·ªáu sinh vi√™n!\n"
},
{
	"uri": "//localhost:1313/vi/2-preparation-steps/2.2-create-iam-role-for-lambda-post/",
	"title": "T·∫°o IAM Role cho Lambda Post",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o vai tr√≤ IAM LambdaInsertStudentRole cho h√†m Lambda insertStudentData, c·∫•p quy·ªÅn ƒë·ªÉ ghi d·ªØ li·ªáu v√†o b·∫£ng DynamoDB studentData, g·ª≠i email qua AWS SES, ghi log v√†o CloudWatch, v√† h·ªó tr·ª£ c√°c t∆∞∆°ng t√°c ti·ªÅm nƒÉng v·ªõi S3 v√† CloudFront.\nH√†m insertStudentData th·ª±c hi·ªán:\nL∆∞u th√¥ng tin sinh vi√™n (M√£ sinh vi√™n, H·ªç t√™n, L·ªõp, Ng√†y sinh, Email) v√†o b·∫£ng DynamoDB studentData qua thao t√°c PutItem. G·ª≠i email x√°c nh·∫≠n ƒë·∫øn ƒë·ªãa ch·ªâ email c·ªßa sinh vi√™n qua AWS SES. Vai tr√≤ n√†y c·∫ßn:\nQuy·ªÅn ghi log v√†o CloudWatch (AWSLambdaBasicExecutionRole). Quy·ªÅn ghi v√† ƒë·ªçc d·ªØ li·ªáu v√†o DynamoDB (AmazonDynamoDBFullAccess). Quy·ªÅn g·ª≠i email qua SES (AmazonSESFullAccess). Quy·ªÅn S3 v√† CloudFront (AmazonS3FullAccess, CloudFrontFullAccess) cho c√°c t√≠nh nƒÉng m·ªü r·ªông ti·ªÅm nƒÉng. L∆∞u √Ω: AmazonS3FullAccess v√† CloudFrontFullAccess kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng trong m√£ hi·ªán t·∫°i nh∆∞ng ƒë∆∞·ª£c gi·ªØ l·∫°i ƒë·ªÉ h·ªó tr·ª£ c√°c t√≠nh nƒÉng t∆∞∆°ng lai (v√≠ d·ª•: l∆∞u t·ªáp v√†o S3 ho·∫∑c qu·∫£n l√Ω CloudFront).\nH√†nh ƒê·ªông Chi Ti·∫øt D∆∞·ªõi ƒë√¢y l√† c√°c b∆∞·ªõc chi ti·∫øt ƒë·ªÉ t·∫°o vai tr√≤ IAM LambdaInsertStudentRole:\n1. Truy C·∫≠p AWS Management Console M·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS c·ªßa b·∫°n.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p IAM v√† ch·ªçn Identity and Access Management (IAM).\nƒê·∫£m b·∫£o b·∫°n ƒëang ·ªü v√πng AWS ch√≠nh (v√≠ d·ª•: us-east-1), ki·ªÉm tra ·ªü g√≥c tr√™n b√™n ph·∫£i.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm IAM.\n2. ƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c Roles Trong giao di·ªán IAM, t√¨m menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn Roles (Vai tr√≤) ƒë·ªÉ xem danh s√°ch c√°c vai tr√≤ IAM. N·∫øu ch∆∞a c√≥ vai tr√≤ n√†o, danh s√°ch s·∫Ω tr·ªëng.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn Roles.\n3. Kh·ªüi T·∫°o Qu√° Tr√¨nh T·∫°o Vai Tr√≤ Trong giao di·ªán Roles, nh·∫•n n√∫t Create Role (T·∫°o Vai tr√≤) ·ªü g√≥c tr√™n b√™n ph·∫£i.\nH√¨nh 3: N√∫t Create Role trong giao di·ªán Roles.\n4. Ch·ªçn Trusted Entity Type Trong m·ª•c Select trusted entity, ch·ªçn AWS Service ƒë·ªÉ ch·ªâ ƒë·ªãnh vai tr√≤ d√†nh cho d·ªãch v·ª• AWS.\nTrong ph·∫ßn Use case, ch·ªçn Lambda t·ª´ danh s√°ch d·ªãch v·ª•.\nNh·∫•n Next ƒë·ªÉ chuy·ªÉn sang b∆∞·ªõc c·∫•u h√¨nh quy·ªÅn.\nH√¨nh 4: L·ª±a ch·ªçn AWS Service v√† Lambda trong Use case.\n5. C·∫•p Quy·ªÅn Cho Vai Tr√≤ Trong m·ª•c Permissions (Quy·ªÅn), th√™m c√°c ch√≠nh s√°ch sau:\nAWSLambdaBasicExecutionRole:\nNh·∫≠p AWSLambdaBasicExecutionRole v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch AWSLambdaBasicExecutionRole. M√¥ t·∫£: Cho ph√©p h√†m Lambda ghi log v√†o CloudWatch ƒë·ªÉ gi√°m s√°t v√† g·ª° l·ªói.\nH√¨nh 5: Ch·ªçn ch√≠nh s√°ch AWSLambdaBasicExecutionRole.\nAmazonDynamoDBFullAccess:\nNh·∫≠p AmazonDynamoDBFullAccess v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch AmazonDynamoDBFullAccess. M√¥ t·∫£: C·∫•p quy·ªÅn ƒë·ªçc v√† ghi d·ªØ li·ªáu tr√™n DynamoDB, bao g·ªìm thao t√°c PutItem c·∫ßn thi·∫øt cho h√†m insertStudentData.\nH√¨nh 6: Ch·ªçn ch√≠nh s√°ch AmazonDynamoDBFullAccess.\nAmazonSESFullAccess:\nNh·∫≠p AmazonSESFullAccess v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch AmazonSESFullAccess. M√¥ t·∫£: C·∫•p quy·ªÅn g·ª≠i email qua SES ƒë·ªÉ th√¥ng b√°o x√°c nh·∫≠n (v√≠ d·ª•: ƒë·∫øn nguyentribaothang@gmail.com).\nH√¨nh 7: Ch·ªçn ch√≠nh s√°ch AmazonSESFullAccess.\nAmazonS3FullAccess (t√πy ch·ªçn):\nNh·∫≠p AmazonS3FullAccess v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch AmazonS3FullAccess. M√¥ t·∫£: C·∫•p quy·ªÅn ƒë·ªçc, ghi, qu·∫£n l√Ω S3 bucket cho c√°c t√≠nh nƒÉng m·ªü r·ªông ti·ªÅm nƒÉng.\nH√¨nh 8: Ch·ªçn ch√≠nh s√°ch AmazonS3FullAccess.\nCloudFrontFullAccess (t√πy ch·ªçn):\nNh·∫≠p CloudFrontFullAccess v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch CloudFrontFullAccess. M√¥ t·∫£: C·∫•p quy·ªÅn qu·∫£n l√Ω CloudFront distribution cho c√°c t√≠nh nƒÉng m·ªü r·ªông ti·ªÅm nƒÉng.\nH√¨nh 9: Ch·ªçn ch√≠nh s√°ch CloudFrontFullAccess.\nKi·ªÉm tra danh s√°ch Permissions policies ƒë·ªÉ ƒë·∫£m b·∫£o c√≥:\nAWSLambdaBasicExecutionRole AmazonDynamoDBFullAccess AmazonSESFullAccess AmazonS3FullAccess CloudFrontFullAccess Nh·∫•n Next.\n6. ƒê·∫∑t T√™n v√† Ki·ªÉm Tra Vai Tr√≤ Trong m·ª•c Role details:\nRole Name: Nh·∫≠p LambdaInsertStudentRole. L∆∞u √Ω: T√™n ph·∫£i ch√≠nh x√°c ƒë·ªÉ kh·ªõp v·ªõi c·∫•u h√¨nh h√†m Lambda insertStudentData.\nDescription (t√πy ch·ªçn): Nh·∫≠p m√¥ t·∫£, v√≠ d·ª•: \u0026ldquo;Vai tr√≤ IAM cho h√†m Lambda insertStudentData, c·∫•p quy·ªÅn ghi DynamoDB, g·ª≠i email SES, ghi log CloudWatch, v√† h·ªó tr·ª£ S3/CloudFront.\u0026rdquo; H√¨nh 10: Nh·∫≠p t√™n v√† m√¥ t·∫£ vai tr√≤.\nKi·ªÉm tra l·∫°i:\nTrusted entity: AWS Service (Lambda). Permissions: AWSLambdaBasicExecutionRole, AmazonDynamoDBFullAccess, AmazonSESFullAccess, AmazonS3FullAccess, CloudFrontFullAccess. Nh·∫•n Create Role (T·∫°o Vai tr√≤).\n7. Ki·ªÉm Tra Tr·∫°ng Th√°i T·∫°o Vai Tr√≤ Sau khi nh·∫•n Create Role, b·∫°n s·∫Ω tr·ªü v·ªÅ danh s√°ch Roles.\nH√¨nh 11: Nh·∫≠p t√™n v√† m√¥ t·∫£ vai tr√≤.\nT√¨m vai tr√≤ LambdaInsertStudentRole. N·∫øu th√†nh c√¥ng, b·∫°n s·∫Ω th·∫•y th√¥ng b√°o: \u0026ldquo;Role LambdaInsertStudentRole created\u0026rdquo;.\nH√¨nh 12: Th√¥ng b√°o: Role LambdaInsertStudentRole created.\nNh·∫•p v√†o LambdaInsertStudentRole ƒë·ªÉ xem chi ti·∫øt:\nARN: Ghi l·∫°i ARN (v√≠ d·ª•: arn:aws:iam::your-account-id:role/LambdaInsertStudentRole) ƒë·ªÉ s·ª≠ d·ª•ng khi c·∫•u h√¨nh h√†m Lambda. Policies: X√°c minh c√°c ch√≠nh s√°ch ƒë√£ g·∫Øn ƒë√∫ng. N·∫øu vai tr√≤ kh√¥ng xu·∫•t hi·ªán, l√†m m·ªõi trang ho·∫∑c ki·ªÉm tra l·∫°i c√°c b∆∞·ªõc.\nL∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt T√™n vai tr√≤ Ph·∫£i l√† LambdaInsertStudentRole (ph√¢n bi·ªát ch·ªØ hoa/th∆∞·ªùng) ƒë·ªÉ kh·ªõp v·ªõi h√†m Lambda. T√™n sai s·∫Ω g√¢y l·ªói khi th·ª±c thi. DynamoDB quy·ªÅn AmazonDynamoDBReadOnlyAccess kh√¥ng h·ªó tr·ª£ PutItem. S·ª≠ d·ª•ng AmazonDynamoDBFullAccess ƒë·ªÉ cho ph√©p PutItem tr√™n b·∫£ng studentData. S3 v√† CloudFront AmazonS3FullAccess v√† CloudFrontFullAccess kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng hi·ªán t·∫°i nh∆∞ng gi·ªØ l·∫°i cho c√°c t√≠nh nƒÉng m·ªü r·ªông (v√≠ d·ª•: l∆∞u t·ªáp v√†o S3 ho·∫∑c qu·∫£n l√Ω CloudFront). X√≥a n·∫øu kh√¥ng c·∫ßn ƒë·ªÉ tu√¢n th·ªß least privilege. Ki·ªÉm tra s·ªõm Ghi l·∫°i ARN v√† ki·ªÉm tra vai tr√≤ trong IAM tr∆∞·ªõc khi c·∫•u h√¨nh h√†m Lambda ƒë·ªÉ ƒë·∫£m b·∫£o ho·∫°t ƒë·ªông ƒë√∫ng. X·ª≠ l√Ω l·ªói N·∫øu g·∫∑p l·ªói \u0026ldquo;Access Denied\u0026rdquo;, ki·ªÉm tra quy·ªÅn t√†i kho·∫£n AWS (iam:CreateRole, iam:AttachRolePolicy) ho·∫∑c li√™n h·ªá qu·∫£n tr·ªã vi√™n. N·∫øu h√†m b√°o l·ªói AccessDenied, ki·ªÉm tra ch√≠nh s√°ch DynamoDB. D√πng CloudTrail ho·∫∑c IAM Access Advisor ƒë·ªÉ x√°c ƒë·ªãnh v·∫•n ƒë·ªÅ. V√πng AWS ƒê·∫£m b·∫£o v√πng AWS (v√≠ d·ª•: us-east-1) nh·∫•t qu√°n v·ªõi c√°c d·ªãch v·ª• kh√°c (DynamoDB, Lambda, SES). Ki·ªÉm tra ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. M·∫πo th·ª±c ti·ªÖn: Ki·ªÉm tra vai tr√≤ v√† ARN ngay sau khi t·∫°o ƒë·ªÉ ƒë·∫£m b·∫£o c·∫•u h√¨nh ch√≠nh x√°c tr∆∞·ªõc khi t√≠ch h·ª£p v·ªõi h√†m Lambda.\nK·∫øt Lu·∫≠n Vai tr√≤ IAM LambdaInsertStudentRole ƒë·∫£m b·∫£o h√†m Lambda insertStudentData c√≥ quy·ªÅn c·∫ßn thi·∫øt ƒë·ªÉ ghi d·ªØ li·ªáu v√†o DynamoDB, g·ª≠i email qua SES, v√† ghi log v√†o CloudWatch, ƒë·ªìng th·ªùi h·ªó tr·ª£ m·ªü r·ªông v·ªõi S3 v√† CloudFront. V·ªõi AmazonDynamoDBFullAccess, h√†m ho·∫°t ƒë·ªông hi·ªáu qu·∫£ v√† an to√†n trong ·ª©ng d·ª•ng serverless.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn T·∫°o IAM Role cho DynamoDB Backup ƒë·ªÉ thi·∫øt l·∫≠p vai tr√≤ cho sao l∆∞u d·ªØ li·ªáu!\n"
},
{
	"uri": "//localhost:1313/vi/3-creating-lambda-functions/3.3-create-the-backupdynamodbandsendemail-function/",
	"title": "C·∫•u h√¨nh Lambda Function BackupDynamoDBAndSendEmail",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o v√† c·∫•u h√¨nh h√†m Lambda BackupDynamoDBAndSendEmail ƒë·ªÉ sao l∆∞u to√†n b·ªô d·ªØ li·ªáu t·ª´ b·∫£ng DynamoDB studentData v√†o bucket S3 d∆∞·ªõi d·∫°ng t·ªáp JSON, t·∫°o pre-signed URL, v√† g·ª≠i email th√¥ng b√°o ch·ª©a link t·∫£i qua SES. H√†m s·ª≠ d·ª•ng Python 3.13, ki·∫øn tr√∫c x86_64, v√† g√°n vai tr√≤ IAM DynamoDBBackupRole (t·∫°o ·ªü m·ª•c 2.3). H√†m s·∫Ω tr·∫£ v·ªÅ ph·∫£n h·ªìi JSON ƒë·ªÉ t√≠ch h·ª£p v·ªõi c√°c h·ªá th·ªëng kh√°c (n·∫øu c·∫ßn) v√† ghi log v√†o CloudWatch ƒë·ªÉ gi√°m s√°t.\nT·ªïng Quan v·ªÅ H√†m BackupDynamoDBAndSendEmail H√†m BackupDynamoDBAndSendEmail th·ª±c hi·ªán c√°c ch·ª©c nƒÉng sau:\nƒê·ªçc to√†n b·ªô d·ªØ li·ªáu t·ª´ b·∫£ng studentData (c√°c tr∆∞·ªùng studentid, name, class, birthdate, email) b·∫±ng thao t√°c Scan. L∆∞u d·ªØ li·ªáu t·∫°m th·ªùi d∆∞·ªõi d·∫°ng t·ªáp JSON trong th∆∞ m·ª•c /tmp c·ªßa m√¥i tr∆∞·ªùng Lambda. T·∫£i t·ªáp JSON l√™n bucket S3 v·ªõi t√™n t·ªáp c√≥ d·∫•u th·ªùi gian (v√≠ d·ª•: backups/backup-20250707-0409.json). T·∫°o pre-signed URL (h·∫øt h·∫°n sau 1 gi·ªù) ƒë·ªÉ truy c·∫≠p t·ªáp backup. G·ª≠i email th√¥ng b√°o qua SES v·ªõi n·ªôi dung HTML ƒë·∫πp, ch·ª©a link t·∫£i v√† th·ªùi gian h·∫øt h·∫°n. Tr·∫£ v·ªÅ ph·∫£n h·ªìi JSON x√°c nh·∫≠n tr·∫°ng th√°i sao l∆∞u v√† g·ª≠i email. Y√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh c√°c b∆∞·ªõc chu·∫©n b·ªã ·ªü m·ª•c 2 (IAM Role DynamoDBBackupRole, b·∫£ng DynamoDB studentData, SES email x√°c minh, S3 bucket student-backup-20250706). ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1.\nH√†nh ƒê·ªông Chi Ti·∫øt Truy C·∫≠p AWS Management Console\nM·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS c·ªßa b·∫°n.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p Lambda v√† ch·ªçn d·ªãch v·ª• AWS Lambda ƒë·ªÉ v√†o giao di·ªán qu·∫£n l√Ω.\nƒê·∫£m b·∫£o b·∫°n ƒëang l√†m vi·ªác trong v√πng AWS ch√≠nh (v√≠ d·ª•: us-east-1), ki·ªÉm tra v√πng ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. V√πng n√†y ph·∫£i kh·ªõp v·ªõi b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, v√† SES.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm Lambda.\nƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c Functions\nTrong giao di·ªán ch√≠nh c·ªßa AWS Lambda, nh√¨n v√†o menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn Functions (H√†m) ƒë·ªÉ xem danh s√°ch c√°c h√†m Lambda hi·ªán c√≥. N·∫øu b·∫°n ch∆∞a t·∫°o h√†m n√†o, danh s√°ch s·∫Ω tr·ªëng.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn Functions.\nKh·ªüi T·∫°o Qu√° Tr√¨nh T·∫°o H√†m\nTrong giao di·ªán Functions, nh·∫•n n√∫t Create function (T·∫°o h√†m) ·ªü g√≥c tr√™n b√™n ph·∫£i ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh h√†m m·ªõi.\nH√¨nh 3: N√∫t Create function trong giao di·ªán Functions.\nC·∫•u H√¨nh Th√¥ng Tin C∆° B·∫£n c·ªßa H√†m\nTrong m·ª•c Function type, ch·ªçn Author from scratch (T·∫°o t·ª´ ƒë·∫ßu) ƒë·ªÉ t·ª± vi·∫øt m√£ cho h√†m.\nTrong m·ª•c Function name, nh·∫≠p ch√≠nh x√°c BackupDynamoDBAndSendEmail. T√™n n√†y s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng khi t√≠ch h·ª£p v·ªõi c√°c d·ªãch v·ª• kh√°c (v√≠ d·ª•: CloudWatch Events/EventBridge ƒë·ªÉ t·ª± ƒë·ªông ch·∫°y sao l∆∞u).\nTrong m·ª•c Runtime, ch·ªçn Python 3.13 (phi√™n b·∫£n Python m·ªõi nh·∫•t ƒë∆∞·ª£c y√™u c·∫ßu). N·∫øu Python 3.13 kh√¥ng c√≥ s·∫µn, ch·ªçn phi√™n b·∫£n Python m·ªõi nh·∫•t ƒë∆∞·ª£c h·ªó tr·ª£ (v√≠ d·ª•: Python 3.12 ho·∫∑c 3.11).\nTrong m·ª•c Architecture, ch·ªçn x86_64 ƒë·ªÉ ƒë·∫£m b·∫£o t∆∞∆°ng th√≠ch v·ªõi ki·∫øn tr√∫c ti√™u chu·∫©n.\nH√¨nh 4: Giao di·ªán c·∫•u h√¨nh th√¥ng tin c∆° b·∫£n c·ªßa h√†m.\nTrong m·ª•c Permissions, ch·ªçn Use an existing role (S·ª≠ d·ª•ng vai tr√≤ hi·ªán c√≥).\nTrong danh s√°ch vai tr√≤, ch·ªçn DynamoDBBackupRole (t·∫°o ·ªü m·ª•c 2.3). Vai tr√≤ n√†y bao g·ªìm c√°c ch√≠nh s√°ch AWSLambdaBasicExecutionRole, AmazonDynamoDBReadOnlyAccess, AmazonS3FullAccess, AmazonSESFullAccess, v√† CloudFrontFullAccess. L∆∞u √Ω: CloudFrontFullAccess kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng trong m√£ hi·ªán t·∫°i, nh∆∞ng ƒë∆∞·ª£c gi·ªØ l·∫°i theo y√™u c·∫ßu tr∆∞·ªõc ƒë√≥. Gi·ªØ c√°c thi·∫øt l·∫≠p kh√°c ·ªü gi√° tr·ªã m·∫∑c ƒë·ªãnh v√† nh·∫•n Create function ƒë·ªÉ t·∫°o h√†m.\nH√¨nh 5: Ch·ªçn vai tr√≤ DynamoDBBackupRole v√† nh·∫•n Create function.\nKi·ªÉm Tra Tr·∫°ng Th√°i T·∫°o H√†m\nSau khi nh·∫•n Create function, b·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang chi ti·∫øt c·ªßa h√†m BackupDynamoDBAndSendEmail. Giao di·ªán s·∫Ω hi·ªÉn th·ªã th√¥ng b√°o t∆∞∆°ng t·ª±: \u0026ldquo;Successfully created the function BackupDynamoDBAndSendEmail. You can now change its code and configuration. To invoke your function with a test event, choose Test.\u0026rdquo; N·∫øu kh√¥ng th·∫•y th√¥ng b√°o ho·∫∑c g·∫∑p l·ªói, ki·ªÉm tra l·∫°i vai tr√≤ DynamoDBBackupRole c√≥ t·ªìn t·∫°i v√† t√†i kho·∫£n AWS c·ªßa b·∫°n c√≥ quy·ªÅn lambda:CreateFunction hay kh√¥ng. C·∫•u H√¨nh M√£ Ngu·ªìn\nTrong giao di·ªán chi ti·∫øt c·ªßa h√†m BackupDynamoDBAndSendEmail, t·∫°i tab Code, cu·ªôn xu·ªëng ph·∫ßn Code source. Trong t·ªáp lambda_function.py, x√≥a m√£ m·∫∑c ƒë·ªãnh v√† d√°n m√£ sau: import boto3 import datetime import json from botocore.exceptions import ClientError dynamodb = boto3.resource(\u0026#39;dynamodb\u0026#39;) ses = boto3.client(\u0026#39;ses\u0026#39;) s3_client = boto3.client(\u0026#39;s3\u0026#39;) def lambda_handler(event, context): # Truy c·∫≠p b·∫£ng DynamoDB table = dynamodb.Table(\u0026#39;studentData\u0026#39;) response = table.scan() items = response[\u0026#39;Items\u0026#39;] # L∆∞u d·ªØ li·ªáu v√†o file t·∫°m trong Lambda backup_file = \u0026#39;/tmp/backup.json\u0026#39; with open(backup_file, \u0026#39;w\u0026#39;) as f: json.dump(items, f) # T·∫£i file l√™n S3 s3_bucket = \u0026#39;student-backup-20250706\u0026#39; # Thay b·∫±ng t√™n bucket th·ª±c t·∫ø s3_key = f\u0026#39;backups/backup-{datetime.datetime.now().strftime(\u0026#34;%Y%m%d-%H%M%S\u0026#34;)}.json\u0026#39; s3_client.upload_file(backup_file, s3_bucket, s3_key) # T·∫°o pre-signed URL (h·∫øt h·∫°n sau 1 gi·ªù) presigned_url = s3_client.generate_presigned_url( \u0026#39;get_object\u0026#39;, Params={\u0026#39;Bucket\u0026#39;: s3_bucket, \u0026#39;Key\u0026#39;: s3_key}, ExpiresIn=3600 ) # T·∫°o email HTML ƒë·∫πp sender = \u0026#39;baothangvip@gmail.com\u0026#39; recipient = \u0026#39;nguyentribaothang@gmail.com\u0026#39; subject = \u0026#39;Th√¥ng B√°o Sao L∆∞u D·ªØ Li·ªáu Sinh Vi√™n\u0026#39; expiry_time = (datetime.datetime.now() + datetime.timedelta(hours=1)).strftime(\u0026#39;%Y-%m-%d %H:%M:%S\u0026#39;) html_body = f\u0026#34;\u0026#34;\u0026#34; \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;vi\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;style\u0026gt; body {{ font-family: Arial, sans-serif; color: #333; line-height: 1.6; }} .container {{ max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9f9f9; border-radius: 8px; }} .header {{ background-color: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 8px 8px 0 0; }} .content {{ padding: 20px; background-color: white; border-radius: 0 0 8px 8px; }} .button {{ display: inline-block; padding: 10px 20px; background-color: #4CAF50; color: white !important; text-decoration: none; border-radius: 5px; margin-top: 20px; }} .footer {{ font-size: 12px; color: #777; text-align: center; margin-top: 20px; }} \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;Sao L∆∞u D·ªØ Li·ªáu Sinh Vi√™n\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;K√≠nh g·ª≠i Qu√Ω kh√°ch,\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;D·ªØ li·ªáu sinh vi√™n ƒë√£ ƒë∆∞·ª£c sao l∆∞u th√†nh c√¥ng v√† l∆∞u tr·ªØ tr√™n AWS S3.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;T·∫£i file sao l∆∞u t·∫°i ƒë√¢y:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;a href=\u0026#34;{presigned_url}\u0026#34; class=\u0026#34;button\u0026#34;\u0026gt;T·∫£i File Sao L∆∞u\u0026lt;/a\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;L∆∞u √Ω:\u0026lt;/strong\u0026gt; Li√™n k·∫øt n√†y s·∫Ω h·∫øt h·∫°n v√†o {expiry_time}.\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;footer\u0026#34;\u0026gt; \u0026lt;p\u0026gt;ƒê√¢y l√† email t·ª± ƒë·ªông. Vui l√≤ng kh√¥ng tr·∫£ l·ªùi tr·ª±c ti·∫øp email n√†y.\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; \u0026#34;\u0026#34;\u0026#34; try: response = ses.send_email( Source=sender, Destination={\u0026#39;ToAddresses\u0026#39;: [recipient]}, Message={ \u0026#39;Subject\u0026#39;: {\u0026#39;Data\u0026#39;: subject}, \u0026#39;Body\u0026#39;: { \u0026#39;Html\u0026#39;: {\u0026#39;Data\u0026#39;: html_body}, \u0026#39;Text\u0026#39;: {\u0026#39;Data\u0026#39;: f\u0026#39;File sao l∆∞u: {presigned_url}\\nH·∫øt h·∫°n: {expiry_time}\u0026#39;} } } ) print(f\u0026#34;Email sent! Message ID: {response[\u0026#39;MessageId\u0026#39;]}\u0026#34;) except ClientError as e: print(f\u0026#34;L·ªói g·ª≠i email: {e}\u0026#34;) return { \u0026#39;statusCode\u0026#39;: 500, \u0026#39;body\u0026#39;: json.dumps({\u0026#39;message\u0026#39;: f\u0026#39;Sao l∆∞u th√†nh c√¥ng nh∆∞ng g·ª≠i email th·∫•t b·∫°i: {str(e)}\u0026#39;}) } return { \u0026#39;statusCode\u0026#39;: 200, \u0026#39;body\u0026#39;: json.dumps({\u0026#39;message\u0026#39;: \u0026#39;Sao l∆∞u v√† g·ª≠i email th√†nh c√¥ng!\u0026#39;}) } Gi·∫£i th√≠ch m√£ c·∫£i ti·∫øn:\nLogging: Th√™m logging ƒë·ªÉ ghi log chi ti·∫øt v√†o CloudWatch (m·ª©c INFO v√† ERROR), thay th·∫ø print ƒë·ªÉ d·ªÖ d√†ng gi√°m s√°t. X·ª≠ l√Ω ph√¢n trang: Th√™m v√≤ng l·∫∑p while ƒë·ªÉ x·ª≠ l√Ω ph√¢n trang cho thao t√°c Scan, ƒë·∫£m b·∫£o l·∫•y h·∫øt d·ªØ li·ªáu t·ª´ b·∫£ng l·ªõn. CORS: Th√™m header Access-Control-Allow-Origin: '*' trong t·∫•t c·∫£ ph·∫£n h·ªìi ƒë·ªÉ t√≠ch h·ª£p v·ªõi API Gateway. X·ª≠ l√Ω l·ªói: Th√™m try-except cho c√°c b∆∞·ªõc Scan, l∆∞u file, t·∫£i l√™n S3, v√† t·∫°o pre-signed URL, tr·∫£ v·ªÅ l·ªói chi ti·∫øt v·ªõi m√£ tr·∫°ng th√°i 500. V√πng AWS: Ch·ªâ ƒë·ªãnh region_name='us-east-1' cho DynamoDB, S3, v√† SES ƒë·ªÉ ƒë·∫£m b·∫£o ƒë·ªìng b·ªô. Email HTML: Gi·ªØ nguy√™n n·ªôi dung HTML ƒë·∫πp v·ªõi CSS inline, nh∆∞ng th√™m logging cho tr·∫°ng th√°i g·ª≠i email. Ki·ªÉm tra v√† thay ƒë·ªïi:\nV√πng AWS: Thay region_name='us-east-1' trong c√°c d√≤ng kh·ªüi t·∫°o dynamodb, ses, v√† s3_client n·∫øu b·∫°n s·ª≠ d·ª•ng v√πng kh√°c (v√≠ d·ª•: us-west-2). Email: Thay baothangvip@gmail.com (ngu·ªìn) v√† nguyentribaothang@gmail.com (ng∆∞·ªùi nh·∫≠n) b·∫±ng email ƒë√£ x√°c minh trong SES (m·ª•c 2.5). N·∫øu SES ·ªü ch·∫ø ƒë·ªô sandbox, c·∫£ hai email ph·∫£i ƒë∆∞·ª£c x√°c minh. Bucket S3: Thay student-backup-20250706 b·∫±ng t√™n bucket th·ª±c t·∫ø c·ªßa b·∫°n (s·∫Ω t·∫°o ·ªü m·ª•c sau). Nh·∫•n Deploy ƒë·ªÉ l∆∞u v√† tri·ªÉn khai m√£.\nH√¨nh 6: Giao di·ªán ch·ªânh s·ª≠a m√£ ngu·ªìn BackupDynamoDBAndSendEmail.\nSau khi tri·ªÉn khai, giao di·ªán s·∫Ω hi·ªÉn th·ªã th√¥ng b√°o: \u0026ldquo;Successfully updated the function BackupDynamoDBAndSendEmail.\u0026rdquo;\nC·∫•u H√¨nh Timeout v√† B·ªô Nh·ªõ\nTrong tab Configuration \u0026gt; General configuration, nh·∫•n Edit. ƒê·∫∑t Timeout: 60 gi√¢y (ƒë·ªß cho thao t√°c Scan, l∆∞u file, t·∫£i l√™n S3, v√† g·ª≠i email). ƒê·∫∑t Memory: 256 MB (ƒë·ªÉ x·ª≠ l√Ω b·∫£ng l·ªõn v√† l∆∞u tr·ªØ t·∫°m trong /tmp). Nh·∫•n Save ƒë·ªÉ l∆∞u thay ƒë·ªïi. L√Ω do: Thao t√°c Scan tr√™n b·∫£ng l·ªõn v√† l∆∞u tr·ªØ t·ªáp trong /tmp c√≥ th·ªÉ y√™u c·∫ßu nhi·ªÅu t√†i nguy√™n h∆°n so v·ªõi getStudentData ho·∫∑c insertStudentData. Ki·ªÉm Tra H√†m\nTrong tab Test, nh·∫•n Create new test event. ƒê·∫∑t t√™n s·ª± ki·ªán (v√≠ d·ª•: testBackupDynamoDB). S·ª≠ d·ª•ng JSON m·∫´u (c√≥ th·ªÉ ƒë·ªÉ tr·ªëng v√¨ h√†m kh√¥ng y√™u c·∫ßu input c·ª• th·ªÉ): {} Nh·∫•n Create ƒë·ªÉ l∆∞u s·ª± ki·ªán ki·ªÉm tra, sau ƒë√≥ nh·∫•n Test ƒë·ªÉ ch·∫°y h√†m. Ki·ªÉm tra k·∫øt qu·∫£: N·∫øu th√†nh c√¥ng, h√†m tr·∫£ v·ªÅ: { \u0026#34;statusCode\u0026#34;: 200, \u0026#34;body\u0026#34;: \u0026#34;{\\\u0026#34;message\\\u0026#34;: \\\u0026#34;Sao l∆∞u v√† g·ª≠i email th√†nh c√¥ng!\\\u0026#34;}\u0026#34;, \u0026#34;headers\u0026#34;: { \u0026#34;Content-Type\u0026#34;: \u0026#34;application/json\u0026#34;, \u0026#34;Access-Control-Allow-Origin\u0026#34;: \u0026#34;*\u0026#34; } } Ki·ªÉm tra bucket S3 student-backup-20250706 trong S3 Console (v√†o S3 \u0026gt; Buckets \u0026gt; student-backup-20250706 \u0026gt; Objects) ƒë·ªÉ x√°c minh t·ªáp backup (v√≠ d·ª•: backups/backup-20250707-0409.json). Ki·ªÉm tra h·ªôp th∆∞ c·ªßa email nh·∫≠n (nguyentribaothang@gmail.com, bao g·ªìm Spam/Junk) ƒë·ªÉ xem email th√¥ng b√°o v·ªõi n·ªôi dung HTML nh∆∞: \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;vi\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;style\u0026gt; body { font-family: Arial, sans-serif; color: #333; line-height: 1.6; } .container { max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9f9f9; border-radius: 8px; } .header { background-color: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 8px 8px 0 0; } .content { padding: 20px; background-color: white; border-radius: 0 0 8px 8px; } .button { display: inline-block; padding: 10px 20px; background-color: #4CAF50; color: white !important; text-decoration: none; border-radius: 5px; margin-top: 20px; } .footer { font-size: 12px; color: #777; text-align: center; margin-top: 20px; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;Sao L∆∞u D·ªØ Li·ªáu Sinh Vi√™n\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;K√≠nh g·ª≠i Qu√Ω kh√°ch,\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;D·ªØ li·ªáu sinh vi√™n ƒë√£ ƒë∆∞·ª£c sao l∆∞u th√†nh c√¥ng v√† l∆∞u tr·ªØ tr√™n AWS S3.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;T·∫£i file sao l∆∞u t·∫°i ƒë√¢y:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;a href=\u0026#34;[pre-signed-url]\u0026#34; class=\u0026#34;button\u0026#34;\u0026gt;T·∫£i File Sao L∆∞u\u0026lt;/a\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;L∆∞u √Ω:\u0026lt;/strong\u0026gt; Li√™n k·∫øt n√†y s·∫Ω h·∫øt h·∫°n v√†o [expiry_time].\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;footer\u0026#34;\u0026gt; \u0026lt;p\u0026gt;ƒê√¢y l√† email t·ª± ƒë·ªông. Vui l√≤ng kh√¥ng tr·∫£ l·ªùi tr·ª±c ti·∫øp email n√†y.\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Nh·∫•p v√†o link trong email ƒë·ªÉ x√°c minh t·ªáp backup c√≥ th·ªÉ t·∫£i ƒë∆∞·ª£c. Ki·ªÉm tra log trong CloudWatch (v√†o Monitor \u0026gt; Logs \u0026gt; ch·ªçn log group /aws/lambda/BackupDynamoDBAndSendEmail) ƒë·ªÉ xem th√¥ng tin chi ti·∫øt (s·ªë b·∫£n ghi, Message ID c·ªßa email). N·∫øu g·∫∑p l·ªói, ki·ªÉm tra c√°c l·ªói ph·ªï bi·∫øn: \u0026ldquo;AccessDenied\u0026rdquo; (DynamoDB): Ki·ªÉm tra vai tr√≤ DynamoDBBackupRole c√≥ ch√≠nh s√°ch AmazonDynamoDBReadOnlyAccess. \u0026ldquo;AccessDenied\u0026rdquo; (S3): Ki·ªÉm tra quy·ªÅn PutObject trong AmazonS3FullAccess v√† bucket student-backup-20250706 t·ªìn t·∫°i. \u0026ldquo;Email address is not verified\u0026rdquo; (SES): ƒê·∫£m b·∫£o baothangvip@gmail.com v√† nguyentribaothang@gmail.com ƒë√£ ƒë∆∞·ª£c x√°c minh trong SES. \u0026ldquo;NoSuchBucket\u0026rdquo;: ƒê·∫£m b·∫£o bucket student-backup-20250706 ƒë√£ ƒë∆∞·ª£c t·∫°o (m·ª•c sau). \u0026ldquo;ResourceNotFoundException\u0026rdquo;: ƒê·∫£m b·∫£o b·∫£ng studentData t·ªìn t·∫°i (m·ª•c 2.4). L∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt IAM Role Vai tr√≤ DynamoDBBackupRole (t·∫°o ·ªü m·ª•c 2.3) ph√π h·ª£p v·ªõi ch·ª©c nƒÉng c·ªßa h√†m. Tuy nhi√™n, CloudFrontFullAccess kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng. ƒê·ªÉ tu√¢n th·ªß least privilege, c√¢n nh·∫Øc lo·∫°i b·ªè ho·∫∑c thay b·∫±ng ch√≠nh s√°ch t√πy ch·ªânh n·∫øu c·∫ßn m·ªü r·ªông. - V√†o IAM \u0026gt; Policies \u0026gt; Create Policy. - Ch·ªçn JSON, d√°n ch√≠nh s√°ch tr√™n (thay student-backup-20250706 b·∫±ng t√™n bucket th·ª±c t·∫ø). - ƒê·∫∑t t√™n (v√≠ d·ª•: S3BackupStudentData) v√† g·∫Øn v√†o DynamoDBBackupRole. SES Sandbox ƒê·∫£m b·∫£o email ngu·ªìn (baothangvip@gmail.com) v√† ng∆∞·ªùi nh·∫≠n (nguyentribaothang@gmail.com) ƒë√£ ƒë∆∞·ª£c x√°c minh trong SES (m·ª•c 2.5). N·∫øu SES ·ªü ch·∫ø ƒë·ªô sandbox, c·∫£ hai email ph·∫£i ƒë∆∞·ª£c x√°c minh. Tho√°t sandbox ƒë·ªÉ g·ª≠i email ƒë·∫øn ƒë·ªãa ch·ªâ b·∫•t k·ª≥: - V√†o SES \u0026gt; Account dashboard \u0026gt; Request production access. - ƒêi·ªÅn bi·ªÉu m·∫´u nh∆∞ h∆∞·ªõng d·∫´n ·ªü m·ª•c 2.5. N·∫øu ch∆∞a tho√°t sandbox, th·ª≠ nghi·ªám b·∫±ng c√°ch s·ª≠ d·ª•ng c√πng m·ªôt email ƒë√£ x√°c minh cho c·∫£ ngu·ªìn v√† ng∆∞·ªùi nh·∫≠n. S3 Bucket ƒê·∫£m b·∫£o bucket student-backup-20250706 ƒë√£ ƒë∆∞·ª£c t·∫°o (s·∫Ω c·∫•u h√¨nh ·ªü m·ª•c sau). N·∫øu ch∆∞a, h√†m s·∫Ω b√°o l·ªói NoSuchBucket. ƒê·∫£m b·∫£o bucket c√≥ th∆∞ m·ª•c backups/ ho·∫∑c m√£ s·∫Ω t·ª± t·∫°o (n·∫øu quy·ªÅn PutObject ƒë∆∞·ª£c c·∫•p). CORS Header Access-Control-Allow-Origin: '*' ƒë∆∞·ª£c th√™m ƒë·ªÉ h·ªó tr·ª£ t√≠ch h·ª£p v·ªõi API Gateway (n·∫øu h√†m ƒë∆∞·ª£c g·ªçi t·ª´ giao di·ªán web). ƒê·∫£m b·∫£o c·∫•u h√¨nh CORS trong API Gateway (s·∫Ω ƒë·ªÅ c·∫≠p ·ªü c√°c b∆∞·ªõc sau). V√πng AWS ƒê·∫£m b·∫£o v√πng trong m√£ (us-east-1) kh·ªõp v·ªõi v√πng c·ªßa b·∫£ng studentData, bucket S3, v√† SES. N·∫øu s·ª≠ d·ª•ng v√πng kh√°c (v√≠ d·ª•: us-west-2), c·∫≠p nh·∫≠t region_name trong c√°c d√≤ng kh·ªüi t·∫°o dynamodb, ses, v√† s3_client. X·ª≠ l√Ω l·ªói N·∫øu h√†m b√°o l·ªói, ki·ªÉm tra log trong CloudWatch (v√†o Monitor \u0026gt; Logs \u0026gt; ch·ªçn log group /aws/lambda/BackupDynamoDBAndSendEmail). C√°c l·ªói ph·ªï bi·∫øn: - \u0026ldquo;AccessDenied\u0026rdquo; (DynamoDB): Thi·∫øu quy·ªÅn Scan. - \u0026ldquo;AccessDenied\u0026rdquo; (S3): Thi·∫øu quy·ªÅn PutObject ho·∫∑c bucket kh√¥ng t·ªìn t·∫°i. - \u0026ldquo;Email address is not verified\u0026rdquo; (SES): Email ch∆∞a ƒë∆∞·ª£c x√°c minh. - \u0026ldquo;ResourceNotFoundException\u0026rdquo;: B·∫£ng studentData ch∆∞a ƒë∆∞·ª£c t·∫°o. S·ª≠ d·ª•ng CloudTrail ho·∫∑c IAM Access Advisor ƒë·ªÉ x√°c ƒë·ªãnh v·∫•n ƒë·ªÅ v·ªÅ quy·ªÅn. T·ªëi ∆∞u h√≥a - Th√™m x·ª≠ l√Ω ph√¢n trang cho Scan (ƒë√£ th√™m trong m√£ c·∫£i ti·∫øn). - S·ª≠ d·ª•ng logging thay cho print (ƒë√£ th√™m). - TƒÉng b·ªô nh·ªõ (256 MB) v√† timeout (60 gi√¢y) ƒë·ªÉ x·ª≠ l√Ω b·∫£ng l·ªõn. - ƒê·ªÉ tƒÉng c∆∞·ªùng b·∫£o m·∫≠t, x√°c minh domain trong SES (xem AWS SES Documentation - DKIM) v√† c·∫≠p nh·∫≠t email ngu·ªìn (v√≠ d·ª•: no-reply@system.edu.vn). - N·∫øu b·∫£ng studentData l·ªõn, c√¢n nh·∫Øc s·ª≠ d·ª•ng DynamoDB Streams ƒë·ªÉ sao l∆∞u tƒÉng d·∫ßn thay v√¨ Scan to√†n b·ªô b·∫£ng. Ki·ªÉm tra s·ªõm Sau khi t·∫°o v√† tri·ªÉn khai h√†m, ch·∫°y ki·ªÉm tra ƒë·ªÉ x√°c minh t·ªáp backup trong S3, email th√¥ng b√°o, v√† log trong CloudWatch tr∆∞·ªõc khi t√≠ch h·ª£p v·ªõi CloudWatch Events/EventBridge (cho sao l∆∞u ƒë·ªãnh k·ª≥). M·∫πo th·ª±c ti·ªÖn: Th√™m d·ªØ li·ªáu m·∫´u v√†o b·∫£ng studentData, ki·ªÉm tra bucket S3 v√† h·ªôp th∆∞ nh·∫≠n (bao g·ªìm Spam/Junk) ƒë·ªÉ x√°c minh k·∫øt qu·∫£.\nK·∫øt Lu·∫≠n H√†m Lambda BackupDynamoDBAndSendEmail ƒë√£ ƒë∆∞·ª£c t·∫°o ƒë·ªÉ sao l∆∞u d·ªØ li·ªáu sinh vi√™n t·ª´ b·∫£ng studentData v√†o S3 v√† g·ª≠i email th√¥ng b√°o v·ªõi li√™n k·∫øt t·∫£i file. H√†m s·∫µn s√†ng t√≠ch h·ª£p v·ªõi CloudWatch Events/EventBridge cho sao l∆∞u ƒë·ªãnh k·ª≥.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn C·∫•u h√¨nh CloudWatch Events/EventBridge ƒë·ªÉ ti·∫øp t·ª•c!\n"
},
{
	"uri": "//localhost:1313/vi/2-preparation-steps/2.3-create-iam-role-for-dynamodb-backup/",
	"title": "T·∫°o IAM Role cho DynamoDB Backup",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o vai tr√≤ IAM DynamoDBBackupRole cho h√†m Lambda BackupDynamoDBAndSendEmail, c·∫•p quy·ªÅn ƒë·ªÉ ƒë·ªçc v√† ghi d·ªØ li·ªáu v√†o b·∫£ng DynamoDB studentData, l∆∞u t·ªáp backup v√†o S3, g·ª≠i email qua SES, ghi log v√†o CloudWatch, v√† h·ªó tr·ª£ t∆∞∆°ng t√°c ti·ªÅm nƒÉng v·ªõi CloudFront.\nH√†m BackupDynamoDBAndSendEmail th·ª±c hi·ªán:\nƒê·ªçc d·ªØ li·ªáu sinh vi√™n (M√£ sinh vi√™n, H·ªç t√™n, L·ªõp, Ng√†y sinh, Email) t·ª´ b·∫£ng DynamoDB studentData qua thao t√°c Scan. L∆∞u t·ªáp JSON v√†o bucket S3 (v√≠ d·ª•: student-backup-20250706). T·∫°o pre-signed URL cho t·ªáp backup v√† g·ª≠i email th√¥ng b√°o qua SES (v√≠ d·ª•: ƒë·∫øn nguyentribaothang@gmail.com). Ghi log v√†o CloudWatch ƒë·ªÉ gi√°m s√°t ho·∫°t ƒë·ªông. Vai tr√≤ n√†y c·∫ßn:\nQuy·ªÅn ƒë·ªçc v√† ghi d·ªØ li·ªáu v√†o DynamoDB (AmazonDynamoDBFullAccess). Quy·ªÅn l∆∞u v√† t·∫°o URL tr√™n S3 (AmazonS3FullAccess). Quy·ªÅn g·ª≠i email qua SES (AmazonSESFullAccess). Quy·ªÅn ghi log v√†o CloudWatch (AWSLambdaBasicExecutionRole). Quy·ªÅn CloudFront (CloudFrontFullAccess) cho c√°c t√≠nh nƒÉng m·ªü r·ªông ti·ªÅm nƒÉng. L∆∞u √Ω: CloudFrontFullAccess kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng hi·ªán t·∫°i nh∆∞ng gi·ªØ l·∫°i cho c√°c t√≠nh nƒÉng t∆∞∆°ng lai (v√≠ d·ª•: qu·∫£n l√Ω CloudFront distribution).\nH√†nh ƒê·ªông Chi Ti·∫øt D∆∞·ªõi ƒë√¢y l√† c√°c b∆∞·ªõc chi ti·∫øt ƒë·ªÉ t·∫°o vai tr√≤ IAM DynamoDBBackupRole:\n1. Truy C·∫≠p AWS Management Console M·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS.\nTrong thanh t√¨m ki·∫øm, nh·∫≠p IAM v√† ch·ªçn Identity and Access Management (IAM).\nƒê·∫£m b·∫£o b·∫°n ·ªü v√πng AWS ch√≠nh (v√≠ d·ª•: us-east-1), ki·ªÉm tra ·ªü g√≥c tr√™n b√™n ph·∫£i.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm IAM.\n2. ƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c Roles Trong giao di·ªán IAM, t√¨m menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn Roles (Vai tr√≤) ƒë·ªÉ xem danh s√°ch c√°c vai tr√≤ IAM. N·∫øu ch∆∞a c√≥ vai tr√≤, danh s√°ch s·∫Ω tr·ªëng.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn Roles.\n3. Kh·ªüi T·∫°o Qu√° Tr√¨nh T·∫°o Vai Tr√≤ Trong giao di·ªán Roles, nh·∫•n Create Role (T·∫°o Vai tr√≤) ·ªü g√≥c tr√™n b√™n ph·∫£i.\nH√¨nh 3: N√∫t Create Role trong giao di·ªán Roles.\n4. Ch·ªçn Trusted Entity Type Trong m·ª•c Select trusted entity, ch·ªçn AWS Service ƒë·ªÉ ch·ªâ ƒë·ªãnh vai tr√≤ d√†nh cho d·ªãch v·ª• AWS.\nTrong ph·∫ßn Use case, ch·ªçn Lambda t·ª´ danh s√°ch d·ªãch v·ª•.\nNh·∫•n Next ƒë·ªÉ chuy·ªÉn sang c·∫•u h√¨nh quy·ªÅn.\nH√¨nh 4: L·ª±a ch·ªçn AWS Service v√† Lambda trong Use case.\n5. C·∫•p Quy·ªÅn Cho Vai Tr√≤ Trong m·ª•c Permissions (Quy·ªÅn), th√™m nƒÉm ch√≠nh s√°ch:\nAmazonDynamoDBFullAccess:\nNh·∫≠p AmazonDynamoDBFullAccess v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch AmazonDynamoDBFullAccess. M√¥ t·∫£: C·∫•p quy·ªÅn ƒë·ªçc v√† ghi d·ªØ li·ªáu v√†o DynamoDB, h·ªó tr·ª£ thao t√°c Scan v√† c√°c thao t√°c kh√°c n·∫øu c·∫ßn.\nH√¨nh 5: Ch·ªçn ch√≠nh s√°ch AmazonDynamoDBFullAccess.\nAmazonS3FullAccess:\nNh·∫≠p AmazonS3FullAccess v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch AmazonS3FullAccess. M√¥ t·∫£: C·∫•p quy·ªÅn l∆∞u t·ªáp backup v√†o S3 (PutObject) v√† t·∫°o pre-signed URL (GeneratePresignedUrl).\nH√¨nh 6: Ch·ªçn ch√≠nh s√°ch AmazonS3FullAccess.\nAmazonSESFullAccess:\nNh·∫≠p AmazonSESFullAccess v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch AmazonSESFullAccess. M√¥ t·∫£: C·∫•p quy·ªÅn g·ª≠i email qua SES ƒë·ªÉ th√¥ng b√°o link t·∫£i backup (v√≠ d·ª•: ƒë·∫øn nguyentribaothang@gmail.com).\nH√¨nh 7: Ch·ªçn ch√≠nh s√°ch AmazonSESFullAccess.\nAWSLambdaBasicExecutionRole:\nNh·∫≠p AWSLambdaBasicExecutionRole v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch AWSLambdaBasicExecutionRole. M√¥ t·∫£: Cho ph√©p h√†m Lambda ghi log v√†o CloudWatch ƒë·ªÉ gi√°m s√°t v√† g·ª° l·ªói.\nH√¨nh 8: Ch·ªçn ch√≠nh s√°ch AWSLambdaBasicExecutionRole.\nCloudFrontFullAccess:\nNh·∫≠p CloudFrontFullAccess v√†o thanh t√¨m ki·∫øm. Ch·ªçn ch√≠nh s√°ch CloudFrontFullAccess. M√¥ t·∫£: C·∫•p quy·ªÅn qu·∫£n l√Ω CloudFront distribution cho c√°c t√≠nh nƒÉng m·ªü r·ªông ti·ªÅm nƒÉng.\nH√¨nh 9: Ch·ªçn ch√≠nh s√°ch CloudFrontFullAccess.\nKi·ªÉm tra danh s√°ch Permissions policies ƒë·ªÉ ƒë·∫£m b·∫£o c√≥:\nAmazonDynamoDBFullAccess AmazonS3FullAccess AmazonSESFullAccess AWSLambdaBasicExecutionRole CloudFrontFullAccess Nh·∫•n Next.\n6. ƒê·∫∑t T√™n v√† Ki·ªÉm Tra Vai Tr√≤ Trong m·ª•c Role details:\nRole Name: Nh·∫≠p DynamoDBBackupRole. L∆∞u √Ω: T√™n ph·∫£i ch√≠nh x√°c ƒë·ªÉ kh·ªõp v·ªõi c·∫•u h√¨nh h√†m Lambda BackupDynamoDBAndSendEmail.\nDescription (t√πy ch·ªçn): Nh·∫≠p m√¥ t·∫£, v√≠ d·ª•: \u0026ldquo;Vai tr√≤ IAM cho h√†m Lambda BackupDynamoDBAndSendEmail, c·∫•p quy·ªÅn ƒë·ªçc v√† ghi DynamoDB, l∆∞u S3, g·ª≠i email SES, ghi log CloudWatch, v√† h·ªó tr·ª£ CloudFront.\u0026rdquo; H√¨nh 10: Nh·∫≠p t√™n v√† m√¥ t·∫£ vai tr√≤.\nKi·ªÉm tra l·∫°i:\nTrusted entity: AWS Service (Lambda). Permissions: AmazonDynamoDBFullAccess, AmazonS3FullAccess, AmazonSESFullAccess, AWSLambdaBasicExecutionRole, CloudFrontFullAccess. Nh·∫•n Create Role (T·∫°o Vai tr√≤).\nH√¨nh 11: N√∫t Create Role ƒë·ªÉ x√°c nh·∫≠n.\n7. Ki·ªÉm Tra Tr·∫°ng Th√°i T·∫°o Vai Tr√≤ Sau khi nh·∫•n Create Role, b·∫°n s·∫Ω tr·ªü v·ªÅ danh s√°ch Roles. T√¨m vai tr√≤ DynamoDBBackupRole. N·∫øu th√†nh c√¥ng, b·∫°n s·∫Ω th·∫•y th√¥ng b√°o: \u0026ldquo;Role DynamoDBBackupRole created\u0026rdquo;. Nh·∫•p v√†o DynamoDBBackupRole ƒë·ªÉ xem chi ti·∫øt: ARN: Ghi l·∫°i ARN (v√≠ d·ª•: arn:aws:iam::your-account-id:role/DynamoDBBackupRole) ƒë·ªÉ s·ª≠ d·ª•ng khi c·∫•u h√¨nh h√†m Lambda. Policies: X√°c minh c√≥ AmazonDynamoDBFullAccess, AmazonS3FullAccess, AmazonSESFullAccess, AWSLambdaBasicExecutionRole, CloudFrontFullAccess. N·∫øu vai tr√≤ kh√¥ng xu·∫•t hi·ªán, l√†m m·ªõi trang ho·∫∑c ki·ªÉm tra l·∫°i c√°c b∆∞·ªõc. L∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt T√™n vai tr√≤ Ph·∫£i l√† DynamoDBBackupRole (ph√¢n bi·ªát ch·ªØ hoa/th∆∞·ªùng) ƒë·ªÉ kh·ªõp v·ªõi h√†m Lambda. T√™n sai s·∫Ω g√¢y l·ªói khi th·ª±c thi. CloudFront CloudFrontFullAccess kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng hi·ªán t·∫°i nh∆∞ng gi·ªØ l·∫°i cho c√°c t√≠nh nƒÉng m·ªü r·ªông. X√≥a n·∫øu kh√¥ng c·∫ßn ƒë·ªÉ tu√¢n th·ªß least privilege. S3 v√† SES ƒê·∫£m b·∫£o bucket S3 (v√≠ d·ª•: student-backup-20250706) t·ªìn t·∫°i v√† email ngu·ªìn (v√≠ d·ª•: nguyentribaothang@gmail.com) ƒë√£ ƒë∆∞·ª£c x√°c minh trong SES. Ki·ªÉm tra s·ªõm Ghi l·∫°i ARN v√† ki·ªÉm tra vai tr√≤ trong IAM tr∆∞·ªõc khi c·∫•u h√¨nh h√†m Lambda ƒë·ªÉ ƒë·∫£m b·∫£o ho·∫°t ƒë·ªông ƒë√∫ng. X·ª≠ l√Ω l·ªói N·∫øu g·∫∑p l·ªói \u0026ldquo;Access Denied\u0026rdquo;, ki·ªÉm tra quy·ªÅn t√†i kho·∫£n AWS (iam:CreateRole, iam:AttachRolePolicy) ho·∫∑c li√™n h·ªá qu·∫£n tr·ªã vi√™n. N·∫øu h√†m b√°o l·ªói AccessDenied, ki·ªÉm tra ch√≠nh s√°ch S3 ho·∫∑c SES. D√πng CloudTrail ho·∫∑c IAM Access Advisor ƒë·ªÉ x√°c ƒë·ªãnh v·∫•n ƒë·ªÅ. V√πng AWS ƒê·∫£m b·∫£o v√πng AWS (v√≠ d·ª•: us-east-1) nh·∫•t qu√°n v·ªõi c√°c d·ªãch v·ª• (DynamoDB, Lambda, SES, S3). Ki·ªÉm tra ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. M·∫πo th·ª±c ti·ªÖn: Ki·ªÉm tra bucket S3 v√† tr·∫°ng th√°i x√°c minh email trong SES tr∆∞·ªõc khi ch·∫°y h√†m Lambda ƒë·ªÉ tr√°nh l·ªói AccessDenied.\nK·∫øt Lu·∫≠n Vai tr√≤ IAM DynamoDBBackupRole ƒë·∫£m b·∫£o h√†m Lambda BackupDynamoDBAndSendEmail c√≥ quy·ªÅn ƒë·ªçc v√† ghi d·ªØ li·ªáu v√†o DynamoDB, l∆∞u t·ªáp v√†o S3, g·ª≠i email qua SES, v√† ghi log v√†o CloudWatch, ƒë·ªìng th·ªùi h·ªó tr·ª£ m·ªü r·ªông v·ªõi CloudFront. Vai tr√≤ n√†y s·∫µn s√†ng t√≠ch h·ª£p v√†o h√†m Lambda trong c√°c b∆∞·ªõc ti·∫øp theo.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn T·∫°o b·∫£ng trong DynamoDB ƒë·ªÉ thi·∫øt l·∫≠p b·∫£ng d·ªØ li·ªáu!\n"
},
{
	"uri": "//localhost:1313/vi/3-creating-lambda-functions/",
	"title": "T·∫°o Lambda Functions",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o v√† c·∫•u h√¨nh ba h√†m Lambda trong AWS ƒë·ªÉ h·ªó tr·ª£ c√°c ch·ª©c nƒÉng ch√≠nh c·ªßa h·ªá th·ªëng qu·∫£n l√Ω th√¥ng tin sinh vi√™n:\ngetStudentData: Truy xu·∫•t to√†n b·ªô d·ªØ li·ªáu sinh vi√™n t·ª´ b·∫£ng DynamoDB studentData. insertStudentData: L∆∞u th√¥ng tin sinh vi√™n v√†o b·∫£ng DynamoDB v√† g·ª≠i email x√°c nh·∫≠n qua SES. BackupDynamoDBAndSendEmail: Sao l∆∞u d·ªØ li·ªáu t·ª´ b·∫£ng DynamoDB v√†o S3 v√† g·ª≠i email th√¥ng b√°o ch·ª©a link t·∫£i t·ªáp backup. M·ªói h√†m s·∫Ω ƒë∆∞·ª£c t·∫°o th√¥ng qua AWS Management Console, s·ª≠ d·ª•ng ng√¥n ng·ªØ l·∫≠p tr√¨nh Python 3.12 (ho·∫∑c phi√™n b·∫£n m·ªõi nh·∫•t ƒë∆∞·ª£c h·ªó tr·ª£), g√°n IAM Role t∆∞∆°ng ·ª©ng (ƒë√£ t·∫°o ·ªü c√°c m·ª•c 2.1, 2.2, 2.3) v√† c·∫•u h√¨nh ƒë·ªÉ t√≠ch h·ª£p v·ªõi c√°c d·ªãch v·ª• AWS kh√°c (DynamoDB, SES, S3). C√°c b∆∞·ªõc d∆∞·ªõi ƒë√¢y ƒë·∫£m b·∫£o ng∆∞·ªùi h·ªçc c√≥ th·ªÉ tri·ªÉn khai c√°c h√†m m·ªôt c√°ch d·ªÖ d√†ng, ƒë·ªìng th·ªùi t·ªëi ∆∞u h√≥a hi·ªáu su·∫•t v√† b·∫£o m·∫≠t.\nY√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh c√°c b∆∞·ªõc chu·∫©n b·ªã ·ªü m·ª•c 2 (IAM Roles, b·∫£ng DynamoDB, SES) tr∆∞·ªõc khi t·∫°o c√°c h√†m Lambda. ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng.\nC√°c B∆∞·ªõc C·∫•u H√¨nh D∆∞·ªõi ƒë√¢y l√† c√°c b∆∞·ªõc c·ª• th·ªÉ ƒë·ªÉ c·∫•u h√¨nh c√°c h√†m Lambda:\nB∆∞·ªõc N·ªôi Dung M√¥ T·∫£ 3.1 T·∫°o h√†m getStudentData T·∫°o h√†m Lambda ƒë·ªÉ truy xu·∫•t to√†n b·ªô d·ªØ li·ªáu sinh vi√™n t·ª´ b·∫£ng DynamoDB studentData s·ª≠ d·ª•ng thao t√°c Scan. 3.2 T·∫°o h√†m insertStudentData T·∫°o h√†m Lambda ƒë·ªÉ l∆∞u th√¥ng tin sinh vi√™n v√†o b·∫£ng DynamoDB studentData v√† g·ª≠i email x√°c nh·∫≠n qua SES. 3.3 T·∫°o h√†m BackupDynamoDBAndSendEmail T·∫°o h√†m Lambda ƒë·ªÉ sao l∆∞u d·ªØ li·ªáu t·ª´ b·∫£ng DynamoDB studentData v√†o S3 v√† g·ª≠i email th√¥ng b√°o ch·ª©a pre-signed URL. L∆∞u √Ω: Th·ª±c hi·ªán c√°c b∆∞·ªõc theo th·ª© t·ª± ƒë·ªÉ ƒë·∫£m b·∫£o c√°c h√†m ƒë∆∞·ª£c c·∫•u h√¨nh ch√≠nh x√°c. M·ªói b∆∞·ªõc s·∫Ω ƒë∆∞·ª£c h∆∞·ªõng d·∫´n chi ti·∫øt trong c√°c t√†i li·ªáu t∆∞∆°ng ·ª©ng.\nK·∫øt Lu·∫≠n Ho√†n th√†nh c√°c b∆∞·ªõc c·∫•u h√¨nh n√†y, b·∫°n s·∫Ω c√≥:\nH√†m getStudentData ƒë·ªÉ truy xu·∫•t d·ªØ li·ªáu sinh vi√™n. H√†m insertStudentData ƒë·ªÉ l∆∞u tr·ªØ v√† g·ª≠i email x√°c nh·∫≠n. H√†m BackupDynamoDBAndSendEmail ƒë·ªÉ sao l∆∞u d·ªØ li·ªáu v√† g·ª≠i th√¥ng b√°o. S·∫µn s√†ng ti·∫øp t·ª•c?\nChuy·ªÉn ƒë·∫øn T·∫°o h√†m getStudentData ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh h√†m Lambda ƒë·∫ßu ti√™n!\n"
},
{
	"uri": "//localhost:1313/vi/4-creating-a-restful-api/4.3-creating-a-usage-plan/",
	"title": "Thi·∫øt l·∫≠p Usage Plan (K·∫ø ho·∫°ch s·ª≠ d·ª•ng)",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o m·ªôt Usage Plan c√≥ t√™n StudentUsagePlan trong AWS API Gateway ƒë·ªÉ ki·ªÉm so√°t v√† gi·ªõi h·∫°n truy c·∫≠p v√†o API student (t·∫°o ·ªü m·ª•c 4.1) th√¥ng qua API Key StudentApiKey (t·∫°o ·ªü m·ª•c 4.2). Usage Plan s·∫Ω √°p d·ª•ng gi·ªõi h·∫°n t·ªëc ƒë·ªô (Rate: 5 y√™u c·∫ßu/gi√¢y, Burst: 10 y√™u c·∫ßu) v√† quota (1000 y√™u c·∫ßu/ng√†y), ƒë·∫£m b·∫£o ki·ªÉm so√°t chi ph√≠, ngƒÉn ch·∫∑n l·∫°m d·ª•ng, v√† b·∫£o m·∫≠t c√°c endpoint (GET /students, POST /students, POST /backup) khi ƒë∆∞·ª£c g·ªçi t·ª´ giao di·ªán web (ch·∫°y tr√™n CloudFront).\nT·ªïng Quan v·ªÅ Usage Plan trong API Gateway Usage Plan l√† c∆° ch·∫ø c·ªßa API Gateway ƒë·ªÉ qu·∫£n l√Ω c√°ch client s·ª≠ d·ª•ng API th√¥ng qua API Key, bao g·ªìm: Rate Limiting: Gi·ªõi h·∫°n s·ªë y√™u c·∫ßu m·ªói gi√¢y (Rate) v√† s·ªë y√™u c·∫ßu ƒë·ªìng th·ªùi t·ªëi ƒëa (Burst). Quota: Gi·ªõi h·∫°n t·ªïng s·ªë y√™u c·∫ßu trong m·ªôt kho·∫£ng th·ªùi gian (v√≠ d·ª•: ng√†y, tu·∫ßn, th√°ng). Trong h·ªá th·ªëng n√†y, StudentUsagePlan s·∫Ω: Li√™n k·∫øt v·ªõi API Key StudentApiKey ƒë·ªÉ x√°c th·ª±c y√™u c·∫ßu. √Åp d·ª•ng cho API student v√† stage (v√≠ d·ª•: prod, s·∫Ω t·∫°o ·ªü m·ª•c 4.8). ƒê·∫£m b·∫£o giao di·ªán web ch·ªâ g·ª≠i y√™u c·∫ßu h·ª£p l·ªá v·ªõi API Key trong gi·ªõi h·∫°n ƒë·ªãnh s·∫µn. Usage Plan gi√∫p b·∫£o v·ªá API kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng l·∫°m d·ª•ng (nh∆∞ DDoS) v√† ki·ªÉm so√°t chi ph√≠ s·ª≠ d·ª•ng API Gateway. Y√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh m·ª•c 4.1 (t·∫°o API student), m·ª•c 4.2 (t·∫°o API Key StudentApiKey), v√† m·ª•c 3 (t·∫°o c√°c h√†m Lambda getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, SES email x√°c minh). ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1.\nH√†nh ƒê·ªông Chi Ti·∫øt Truy C·∫≠p AWS Management Console\nM·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS c·ªßa b·∫°n.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p API Gateway v√† ch·ªçn d·ªãch v·ª• Amazon API Gateway ƒë·ªÉ v√†o giao di·ªán qu·∫£n l√Ω.\nKi·ªÉm tra v√πng AWS: ƒê·∫£m b·∫£o b·∫°n ƒëang l√†m vi·ªác trong v√πng AWS ch√≠nh (v√≠ d·ª•: us-east-1), ki·ªÉm tra v√πng ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. V√πng n√†y ph·∫£i kh·ªõp v·ªõi API student (t·∫°o ·ªü m·ª•c 4.1) v√† c√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail).\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm API Gateway.\nƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c Usage Plans\nTrong giao di·ªán ch√≠nh c·ªßa Amazon API Gateway, nh√¨n v√†o menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn Usage Plans ƒë·ªÉ xem danh s√°ch c√°c Usage Plan hi·ªán c√≥. N·∫øu b·∫°n ch∆∞a t·∫°o plan n√†o, danh s√°ch s·∫Ω tr·ªëng.\nGiao di·ªán s·∫Ω hi·ªÉn th·ªã c√°c t√πy ch·ªçn ƒë·ªÉ t·∫°o ho·∫∑c qu·∫£n l√Ω Usage Plan.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn Usage Plans.\nKh·ªüi T·∫°o Qu√° Tr√¨nh T·∫°o Usage Plan\nTrong giao di·ªán Usage Plans, nh·∫•n n√∫t Create (ho·∫∑c Create usage plans t√πy phi√™n b·∫£n Console) ·ªü g√≥c tr√™n b√™n ph·∫£i ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh Usage Plan m·ªõi.\nH√¨nh 3: N√∫t Create trong giao di·ªán Usage Plans.\nC·∫•u H√¨nh Usage Plan\nTrong m·ª•c Create Usage Plan:\nName: Nh·∫≠p ch√≠nh x√°c StudentUsagePlan. T√™n n√†y gi√∫p b·∫°n d·ªÖ d√†ng nh·∫≠n di·ªán plan khi li√™n k·∫øt v·ªõi API Key v√† stage. Description: Nh·∫≠p Usage Plan ƒë·ªÉ ki·ªÉm so√°t truy c·∫≠p v√†o StudentManagementAPI (ho·∫∑c m√¥ t·∫£ t∆∞∆°ng t·ª± ƒë·ªÉ r√µ r√†ng m·ª•c ƒë√≠ch). Enable throttling: Ch·ªçn ƒë·ªÉ b·∫≠t gi·ªõi h·∫°n t·ªëc ƒë·ªô. Rate: Nh·∫≠p 5 (5 y√™u c·∫ßu/gi√¢y). Burst: Nh·∫≠p 10 (10 y√™u c·∫ßu ƒë·ªìng th·ªùi t·ªëi ƒëa). Gi·∫£i th√≠ch: Rate gi·ªõi h·∫°n s·ªë y√™u c·∫ßu m·ªói gi√¢y m√† client (v·ªõi API Key) c√≥ th·ªÉ g·ª≠i. Burst gi·ªõi h·∫°n s·ªë y√™u c·∫ßu ƒë·ªìng th·ªùi t·ªëi ƒëa ƒë·ªÉ x·ª≠ l√Ω c√°c ƒë·ª£t y√™u c·∫ßu ƒë·ªôt bi·∫øn. Gi√° tr·ªã n√†y ph√π h·ª£p v·ªõi ·ª©ng d·ª•ng quy m√¥ nh·ªè nh∆∞ h·ªá th·ªëng qu·∫£n l√Ω sinh vi√™n. H√¨nh 4: Giao di·ªán c·∫•u h√¨nh Usage Plan.\nEnable quota: Ch·ªçn ƒë·ªÉ b·∫≠t gi·ªõi h·∫°n quota. Quota: Nh·∫≠p 1000 v√† ch·ªçn requests per Day (1000 y√™u c·∫ßu/ng√†y). Gi·∫£i th√≠ch: Quota gi·ªõi h·∫°n t·ªïng s·ªë y√™u c·∫ßu h√†ng ng√†y, gi√∫p ki·ªÉm so√°t chi ph√≠ v√† ngƒÉn l·∫°m d·ª•ng. Gi·ªØ c√°c thi·∫øt l·∫≠p kh√°c ·ªü gi√° tr·ªã m·∫∑c ƒë·ªãnh (v√≠ d·ª•: kh√¥ng b·∫≠t Enable usage plan metrics tr·ª´ khi b·∫°n c·∫ßn theo d√µi chi ti·∫øt). Nh·∫•n Next ƒë·ªÉ ti·∫øp t·ª•c.\nH√¨nh 5: Nh·∫•n n√∫t t·∫°o.\nKi·ªÉm Tra Tr·∫°ng Th√°i T·∫°o Usage Plan\nSau khi nh·∫•n Create, b·∫°n s·∫Ω th·∫•y th√¥ng b√°o: \u0026ldquo;Successfully created usage plan ‚ÄòStudentUsagePlan‚Äô.\u0026rdquo;\nTrong danh s√°ch Usage Plans, ch·ªçn StudentUsagePlan ƒë·ªÉ xem chi ti·∫øt.\nX√°c minh:\nThrottling: Rate = 5 y√™u c·∫ßu/gi√¢y, Burst = 10 y√™u c·∫ßu. Quota: 1000 y√™u c·∫ßu/ng√†y. API Keys: StudentApiKey ƒë√£ ƒë∆∞·ª£c li√™n k·∫øt. N·∫øu kh√¥ng th·∫•y th√¥ng b√°o ho·∫∑c g·∫∑p l·ªói:\nKi·ªÉm tra quy·ªÅn IAM c·ªßa t√†i kho·∫£n AWS c√≥ bao g·ªìm apigateway:POST ƒë·ªÉ t·∫°o Usage Plan. ƒê·∫£m b·∫£o b·∫°n ƒëang ·ªü ƒë√∫ng v√πng AWS (us-east-1). L√†m m·ªõi trang ho·∫∑c ki·ªÉm tra l·∫°i danh s√°ch Usage Plans. H√¨nh 6: Trang chi ti·∫øt Usage Plan sau khi t·∫°o.\nL∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt Li√™n k·∫øt v·ªõi Stage Usage Plan s·∫Ω ƒë∆∞·ª£c li√™n k·∫øt v·ªõi stage prod c·ªßa API student ·ªü m·ª•c 4.9. Sau khi deploy API (m·ª•c 4.8), b·∫°n c·∫ßn quay l·∫°i StudentUsagePlan ƒë·ªÉ th√™m API student v√† stage prod. - Trong Associated APIs and Stages, ch·ªçn Add API Stage, ch·ªçn API student v√† stage prod. B·∫£o m·∫≠t API Key ƒê·∫£m b·∫£o StudentApiKey ƒë√£ ƒë∆∞·ª£c sao ch√©p v√† l∆∞u an to√†n (m·ª•c 4.2). Kh√¥ng nh√∫ng API Key tr·ª±c ti·∫øp trong m√£ JavaScript c·ªßa giao di·ªán web. S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng ho·∫∑c AWS Secrets Manager: - V√†o AWS Secrets Manager \u0026gt; Store a new secret \u0026gt; Ch·ªçn Other type of secret \u0026gt; Nh·∫≠p API Key. - ƒê·∫∑t t√™n b√≠ m·∫≠t (v√≠ d·ª•: student-api-key) v√† truy xu·∫•t trong giao di·ªán web qua AWS SDK. Gi·ªõi h·∫°n Rate v√† Quota Rate: 5 y√™u c·∫ßu/gi√¢y v√† Burst: 10 y√™u c·∫ßu ph√π h·ª£p cho ·ª©ng d·ª•ng quy m√¥ nh·ªè. N·∫øu c·∫ßn ph·ª•c v·ª• nhi·ªÅu ng∆∞·ªùi d√πng h∆°n, tƒÉng gi√° tr·ªã (v√≠ d·ª•: Rate = 100, Burst = 200). Quota: 1000 y√™u c·∫ßu/ng√†y ƒë·ªß cho th·ª≠ nghi·ªám. N·∫øu c·∫ßn, tƒÉng quota (v√≠ d·ª•: 10,000 y√™u c·∫ßu/ng√†y) trong m√¥i tr∆∞·ªùng production. X·ª≠ l√Ω l·ªói N·∫øu g·∫∑p l·ªói \u0026ldquo;AccessDenied\u0026rdquo;: - Ki·ªÉm tra quy·ªÅn IAM c·ªßa t√†i kho·∫£n AWS (apigateway:POST, apigateway:PUT ƒë·ªÉ t·∫°o v√† li√™n k·∫øt Usage Plan). - ƒê·∫£m b·∫£o API Key StudentApiKey t·ªìn t·∫°i (m·ª•c 4.2). N·∫øu client nh·∫≠n l·ªói 429 \u0026quot;Too Many Requests\u0026quot; khi g·ªçi API, ki·ªÉm tra: - Y√™u c·∫ßu v∆∞·ª£t qu√° Rate ho·∫∑c Burst. - Quota 1000 y√™u c·∫ßu/ng√†y ƒë√£ b·ªã s·ª≠ d·ª•ng h·∫øt (xem trong Usage Plans \u0026gt; Usage). N·∫øu Usage Plan kh√¥ng hi·ªÉn th·ªã, l√†m m·ªõi trang ho·∫∑c ki·ªÉm tra l·∫°i v√πng AWS. T·ªëi ∆∞u h√≥a - B·∫≠t CloudWatch Metrics cho Usage Plan ƒë·ªÉ theo d√µi s·ªë l∆∞·ª£ng y√™u c·∫ßu: - Trong StudentUsagePlan, ch·ªçn Enable usage plan metrics. - Ki·ªÉm tra trong CloudWatch \u0026gt; Metrics \u0026gt; API Gateway \u0026gt; UsagePlanId. - C√¢n nh·∫Øc s·ª≠ d·ª•ng AWS WAF v·ªõi API Gateway ƒë·ªÉ b·∫£o v·ªá kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng DDoS ho·∫∑c l·∫°m d·ª•ng API Key. - N·∫øu c·∫ßn nhi·ªÅu client (v√≠ d·ª•: nhi·ªÅu ·ª©ng d·ª•ng web), t·∫°o th√™m API Key v√† li√™n k·∫øt v·ªõi c√πng StudentUsagePlan. Ki·ªÉm tra s·ªõm - Sau khi t·∫°o StudentUsagePlan, x√°c minh plan xu·∫•t hi·ªán trong danh s√°ch Usage Plans v√† StudentApiKey ƒë∆∞·ª£c li√™n k·∫øt. - Sau khi deploy API (m·ª•c 4.8), ki·ªÉm tra Usage Plan b·∫±ng c√°ch g·ªçi endpoint v·ªõi API Key s·ª≠ d·ª•ng Postman ho·∫∑c curl. - N·∫øu nh·∫≠n l·ªói 403 \u0026quot;Forbidden\u0026quot;, ki·ªÉm tra API Key c√≥ ƒë∆∞·ª£c li√™n k·∫øt v·ªõi Usage Plan v√† method c√≥ y√™u c·∫ßu API Key Required: true (m·ª•c 4.4, 4.5, 4.6). Ki·ªÉm tra t√≠ch h·ª£p v·ªõi giao di·ªán web Sau khi li√™n k·∫øt Usage Plan v·ªõi stage prod (m·ª•c 4.9), s·ª≠ d·ª•ng API Key trong giao di·ªán web ƒë·ªÉ g·ªçi c√°c endpoint (GET /students, POST /students, POST /backup). M·∫πo th·ª±c ti·ªÖn: X√°c minh StudentUsagePlan ƒë∆∞·ª£c c·∫•u h√¨nh ƒë√∫ng v·ªõi Rate, Burst, v√† Quota tr∆∞·ªõc khi li√™n k·∫øt v·ªõi stage prod. Ki·ªÉm tra s·ªë l∆∞·ª£ng y√™u c·∫ßu qua CloudWatch sau khi th·ª≠ nghi·ªám API.\nK·∫øt Lu·∫≠n Usage Plan StudentUsagePlan ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng trong AWS API Gateway, √°p d·ª•ng gi·ªõi h·∫°n Rate (5 y√™u c·∫ßu/gi√¢y), Burst (10 y√™u c·∫ßu), v√† Quota (1000 y√™u c·∫ßu/ng√†y), s·∫µn s√†ng ƒë·ªÉ li√™n k·∫øt v·ªõi API student v√† stage prod.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn T·∫°o ph∆∞∆°ng th·ª©c GET ƒë·ªÉ truy xu·∫•t d·ªØ li·ªáu ƒë·ªÉ ti·∫øp t·ª•c!\n"
},
{
	"uri": "//localhost:1313/vi/4-creating-a-restful-api/",
	"title": "C·∫•u h√¨nh RESTful API B·∫£o M·∫≠t b·∫±ng API Key",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o m·ªôt RESTful API b·∫±ng AWS API Gateway ƒë·ªÉ t√≠ch h·ª£p v·ªõi c√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail), cho ph√©p giao di·ªán web (ch·∫°y tr√™n CloudFront) truy xu·∫•t, l∆∞u tr·ªØ, v√† sao l∆∞u d·ªØ li·ªáu sinh vi√™n. API s·∫Ω ƒë∆∞·ª£c b·∫£o m·∫≠t b·∫±ng API Key, s·ª≠ d·ª•ng Usage Plan ƒë·ªÉ gi·ªõi h·∫°n truy c·∫≠p, v√† k√≠ch ho·∫°t CORS ƒë·ªÉ h·ªó tr·ª£ giao ti·∫øp v·ªõi giao di·ªán web. API s·∫Ω ƒë∆∞·ª£c tri·ªÉn khai tr√™n m·ªôt stage (v√≠ d·ª•: prod) v√† li√™n k·∫øt v·ªõi API Key ƒë·ªÉ ƒë·∫£m b·∫£o ch·ªâ c√°c y√™u c·∫ßu h·ª£p l·ªá ƒë∆∞·ª£c x·ª≠ l√Ω.\nY√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh c√°c b∆∞·ªõc ·ªü m·ª•c 3 (t·∫°o c√°c h√†m Lambda getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, SES email x√°c minh). ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1.\nC√°c B∆∞·ªõc C·∫•u H√¨nh D∆∞·ªõi ƒë√¢y l√† c√°c b∆∞·ªõc c·ª• th·ªÉ ƒë·ªÉ c·∫•u h√¨nh RESTful API:\nB∆∞·ªõc N·ªôi Dung M√¥ T·∫£ 4.1 T·∫°o REST API m·ªõi tr√™n API Gateway T·∫°o m·ªôt REST API m·ªõi trong AWS API Gateway ƒë·ªÉ t√≠ch h·ª£p v·ªõi c√°c h√†m Lambda. 4.2 T·∫°o API Key ƒë·ªÉ b·∫£o v·ªá truy c·∫≠p T·∫°o API Key ƒë·ªÉ b·∫£o m·∫≠t c√°c y√™u c·∫ßu truy c·∫≠p API t·ª´ giao di·ªán web. 4.3 Thi·∫øt l·∫≠p Usage Plan (K·∫ø ho·∫°ch s·ª≠ d·ª•ng) Thi·∫øt l·∫≠p Usage Plan ƒë·ªÉ gi·ªõi h·∫°n s·ªë l∆∞·ª£ng y√™u c·∫ßu API v√† qu·∫£n l√Ω truy c·∫≠p. 4.4 T·∫°o ph∆∞∆°ng th·ª©c GET ƒë·ªÉ truy xu·∫•t d·ªØ li·ªáu T·∫°o ph∆∞∆°ng th·ª©c GET cho endpoint /students ƒë·ªÉ g·ªçi h√†m getStudentData v√† truy xu·∫•t d·ªØ li·ªáu sinh vi√™n. 4.5 T·∫°o ph∆∞∆°ng th·ª©c POST ƒë·ªÉ l∆∞u d·ªØ li·ªáu T·∫°o ph∆∞∆°ng th·ª©c POST cho endpoint /students ƒë·ªÉ g·ªçi h√†m insertStudentData v√† l∆∞u th√¥ng tin sinh vi√™n. 4.6 T·∫°o Resource \u0026amp; Method cho t√≠nh nƒÉng Backup d·ªØ li·ªáu T·∫°o resource v√† ph∆∞∆°ng th·ª©c POST cho endpoint /backup ƒë·ªÉ g·ªçi h√†m BackupDynamoDBAndSendEmail. 4.7 K√≠ch ho·∫°t CORS ƒë·ªÉ h·ªó tr·ª£ frontend truy c·∫≠p K√≠ch ho·∫°t CORS ƒë·ªÉ h·ªó tr·ª£ c√°c y√™u c·∫ßu cross-origin t·ª´ giao di·ªán web tr√™n CloudFront. 4.8 Tri·ªÉn khai (Deploy) API l√™n m·ªôt Stage c·ª• th·ªÉ Tri·ªÉn khai API l√™n m·ªôt stage (v√≠ d·ª•: prod) ƒë·ªÉ s·ª≠ d·ª•ng trong m√¥i tr∆∞·ªùng production. 4.9 G·∫Øn API Key v√†o Usage Plan \u0026amp; li√™n k·∫øt v·ªõi REST API v√† Stage Li√™n k·∫øt API Key v·ªõi Usage Plan v√† stage ƒë·ªÉ ƒë·∫£m b·∫£o ch·ªâ c√°c y√™u c·∫ßu h·ª£p l·ªá ƒë∆∞·ª£c x·ª≠ l√Ω. L∆∞u √Ω: Th·ª±c hi·ªán c√°c b∆∞·ªõc theo th·ª© t·ª± ƒë·ªÉ ƒë·∫£m b·∫£o API ƒë∆∞·ª£c c·∫•u h√¨nh ch√≠nh x√°c. M·ªói b∆∞·ªõc s·∫Ω ƒë∆∞·ª£c h∆∞·ªõng d·∫´n chi ti·∫øt trong c√°c t√†i li·ªáu t∆∞∆°ng ·ª©ng.\nK·∫øt Lu·∫≠n Ho√†n th√†nh c√°c b∆∞·ªõc c·∫•u h√¨nh n√†y, b·∫°n s·∫Ω c√≥:\nRESTful API t√≠ch h·ª£p v·ªõi c√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail). API ƒë∆∞·ª£c b·∫£o m·∫≠t b·∫±ng API Key v√† Usage Plan. H·ªó tr·ª£ CORS cho giao di·ªán web tr√™n CloudFront. S·∫µn s√†ng ti·∫øp t·ª•c?\nChuy·ªÉn ƒë·∫øn T·∫°o REST API m·ªõi tr√™n API Gateway ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh API ƒë·∫ßu ti√™n!\n"
},
{
	"uri": "//localhost:1313/vi/2-preparation-steps/2.4-createtable-in-dynamodb/",
	"title": "T·∫°o b·∫£ng trong DynamoDB",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: Thi·∫øt l·∫≠p b·∫£ng studentData trong DynamoDB ƒë·ªÉ l∆∞u tr·ªØ th√¥ng tin sinh vi√™n, bao g·ªìm M√£ sinh vi√™n (studentid), H·ªç t√™n, L·ªõp, Ng√†y sinh, v√† Email, s·ª≠ d·ª•ng studentid (ki·ªÉu String) l√†m kh√≥a ch√≠nh ƒë·ªÉ ƒë·∫£m b·∫£o truy v·∫•n nhanh v√† hi·ªáu qu·∫£ trong ki·∫øn tr√∫c serverless.\nDynamoDB, c∆° s·ªü d·ªØ li·ªáu NoSQL c·ªßa AWS, cung c·∫•p m·ªü r·ªông t·ª± ƒë·ªông v√† ƒë·ªô tr·ªÖ th·∫•p, l√Ω t∆∞·ªüng cho ·ª©ng d·ª•ng qu·∫£n l√Ω th√¥ng tin sinh vi√™n. B·∫£ng studentData s·∫Ω l√† n·ªÅn t·∫£ng ƒë·ªÉ t√≠ch h·ª£p v·ªõi c√°c d·ªãch v·ª• AWS nh∆∞ Lambda, API Gateway, v√† SES.\nH√†nh ƒê·ªông Chi Ti·∫øt D∆∞·ªõi ƒë√¢y l√† c√°c b∆∞·ªõc chi ti·∫øt ƒë·ªÉ t·∫°o v√† c·∫•u h√¨nh b·∫£ng studentData:\n1. Truy C·∫≠p AWS Management Console M·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console.\nTrong thanh t√¨m ki·∫øm, nh·∫≠p DynamoDB v√† ch·ªçn DynamoDB ƒë·ªÉ v√†o giao di·ªán qu·∫£n l√Ω.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm DynamoDB.\n2. ƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c Tables Trong giao di·ªán DynamoDB, t√¨m menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn Tables (B·∫£ng) ƒë·ªÉ xem danh s√°ch c√°c b·∫£ng hi·ªán c√≥. N·∫øu ch∆∞a c√≥ b·∫£ng, danh s√°ch s·∫Ω tr·ªëng.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn Tables.\n3. Kh·ªüi T·∫°o Qu√° Tr√¨nh T·∫°o B·∫£ng Trong giao di·ªán Tables, nh·∫•n Create Table (T·∫°o B·∫£ng) ·ªü g√≥c tr√™n b√™n ph·∫£i.\nH√¨nh 3: N√∫t Create Table trong giao di·ªán Tables.\n4. C·∫•u H√¨nh Chi Ti·∫øt B·∫£ng Trong m·ª•c Table Details:\nTable Name: Nh·∫≠p studentData. L∆∞u √Ω: T√™n b·∫£ng ph·∫£i kh·ªõp ch√≠nh x√°c v·ªõi m√£ trong c√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail).\nPartition Key: Nh·∫≠p studentid, ch·ªçn ki·ªÉu String. Kh√≥a ch√≠nh: ƒê·∫£m b·∫£o m·ªói sinh vi√™n c√≥ ƒë·ªãnh danh duy nh·∫•t (v√≠ d·ª•: SV001, SV002).\nSort Key: ƒê·ªÉ tr·ªëng (kh√¥ng c·∫ßn, v√¨ truy v·∫•n d·ª±a tr√™n studentid). Settings: S·ª≠ d·ª•ng t√πy ch·ªçn m·∫∑c ƒë·ªãnh:\nCh·ªçn On-Demand cho Capacity mode ƒë·ªÉ t·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh t√†i nguy√™n, ti·∫øt ki·ªám chi ph√≠ v√† ƒë∆°n gi·∫£n h√≥a qu·∫£n l√Ω. Kh√¥ng c·∫ßn th√™m Secondary Indexes ho·∫∑c Encryption t√πy ch·ªânh (m·∫∑c ƒë·ªãnh ƒë·ªß cho ·ª©ng d·ª•ng n√†y). Ki·ªÉm tra th√¥ng tin:\nTable Name: studentData Partition Key: studentid (String) H√¨nh 4: Giao di·ªán c·∫•u h√¨nh b·∫£ng v·ªõi Table Name v√† Partition Key.\n5. T·∫°o B·∫£ng Nh·∫•n Create Table (T·∫°o B·∫£ng) ·ªü cu·ªëi trang.\nH√¨nh 5: N√∫t Create Table ƒë·ªÉ x√°c nh·∫≠n.\nDynamoDB s·∫Ω t·∫°o b·∫£ng trong kho·∫£ng 20-30 gi√¢y, t√πy v√†o v√πng AWS (v√≠ d·ª•: us-east-1).\nH√¨nh 6: Giao di·ªán hi·ªÉn th·ªã tr·∫°ng th√°i t·∫°o b·∫£ng.\n6. Ki·ªÉm Tra Tr·∫°ng Th√°i B·∫£ng Sau khi nh·∫•n Create Table, b·∫°n s·∫Ω tr·ªü v·ªÅ danh s√°ch Tables.\nT√¨m b·∫£ng studentData. Tr·∫°ng th√°i ban ƒë·∫ßu l√† Creating.\nCh·ªù kho·∫£ng 30 gi√¢y, l√†m m·ªõi trang (n√∫t Refresh ho·∫∑c F5).\nKhi tr·∫°ng th√°i chuy·ªÉn th√†nh Active, b·∫£ng ƒë√£ t·∫°o th√†nh c√¥ng.\nTh√¥ng b√°o: Giao di·ªán hi·ªÉn th·ªã \u0026ldquo;The studentData table was created successfully\u0026rdquo;.\nH√¨nh 7: B·∫£ng studentData v·ªõi tr·∫°ng th√°i Active.\n7. X√°c Minh C·∫•u H√¨nh B·∫£ng Nh·∫•p v√†o b·∫£ng studentData ƒë·ªÉ xem chi ti·∫øt. Ki·ªÉm tra: Table ARN: V√≠ d·ª•, arn:aws:dynamodb:us-east-1:your-account-id:table/studentData. Partition Key: studentid (String). Capacity Mode: On-Demand. Sort Key: Kh√¥ng c√≥. C√°c thu·ªôc t√≠nh kh√°c (H·ªç t√™n, L·ªõp, Ng√†y sinh, Email) l√† thu·ªôc t√≠nh ƒë·ªông, kh√¥ng c·∫ßn khai b√°o tr∆∞·ªõc. L∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt T√™n b·∫£ng Ph·∫£i l√† studentData (ph√¢n bi·ªát ch·ªØ hoa/th∆∞·ªùng) ƒë·ªÉ kh·ªõp v·ªõi m√£ Lambda. T√™n sai g√¢y l·ªói truy v·∫•n. V√πng AWS T·∫°o b·∫£ng trong c√πng v√πng AWS v·ªõi c√°c d·ªãch v·ª• kh√°c (v√≠ d·ª•: us-east-1). Ki·ªÉm tra v√πng ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. Th·ªùi gian t·∫°o N·∫øu tr·∫°ng th√°i Creating k√©o d√†i qu√° 30 gi√¢y, ki·ªÉm tra k·∫øt n·ªëi m·∫°ng ho·∫∑c l√†m m·ªõi trang. N·∫øu l·ªói, x√≥a b·∫£ng v√† th·ª≠ l·∫°i. T·ªëi ∆∞u h√≥a V·ªõi d·ªØ li·ªáu l·ªõn (\u0026gt;500 MB), c√¢n nh·∫Øc b·∫≠t Point-in-time Recovery (PITR) trong tab Backups ƒë·ªÉ h·ªó tr·ª£ kh√¥i ph·ª•c. Sao l∆∞u qua Lambda v√† S3 ƒë·ªß cho ·ª©ng d·ª•ng n√†y. Ki·ªÉm tra s·ªõm Khi b·∫£ng ·ªü tr·∫°ng th√°i Active, v√†o tab Items, ch·ªçn Create Item ƒë·ªÉ nh·∫≠p b·∫£n ghi m·∫´u: - studentid: SV001 - name: Nguy·ªÖn VƒÉn A - class: CNTT1 - birthdate: 2000-01-01 - email: example@gmail.com X√°c minh d·ªØ li·ªáu hi·ªÉn th·ªã ƒë√∫ng. M·∫πo th·ª±c ti·ªÖn: Ki·ªÉm tra c·∫•u h√¨nh b·∫£ng ngay sau khi t·∫°o ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh ch√≠nh x√°c tr∆∞·ªõc khi t√≠ch h·ª£p v·ªõi Lambda.\nK·∫øt Lu·∫≠n B·∫£ng studentData l√† n·ªÅn t·∫£ng ƒë·ªÉ l∆∞u tr·ªØ v√† qu·∫£n l√Ω th√¥ng tin sinh vi√™n trong ·ª©ng d·ª•ng serverless. V·ªõi kh√≥a ch√≠nh studentid v√† ch·∫ø ƒë·ªô On-Demand, b·∫£ng ƒë·∫£m b·∫£o hi·ªáu su·∫•t cao, m·ªü r·ªông linh ho·∫°t, v√† ƒë·ªô tr·ªÖ th·∫•p. B·∫£ng ƒë√£ s·∫µn s√†ng t√≠ch h·ª£p v·ªõi Lambda, API Gateway, v√† SES.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn C·∫•u h√¨nh SES ƒë·ªÉ thi·∫øt l·∫≠p d·ªãch v·ª• g·ª≠i email!\n"
},
{
	"uri": "//localhost:1313/vi/4-creating-a-restful-api/4.4-creating-a-get-method/",
	"title": "T·∫°o ph∆∞∆°ng th·ª©c GET ƒë·ªÉ truy xu·∫•t d·ªØ li·ªáu",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o ph∆∞∆°ng th·ª©c GET tr√™n resource /students trong API student (t·∫°o ·ªü m·ª•c 4.1) ƒë·ªÉ t√≠ch h·ª£p v·ªõi h√†m Lambda getStudentData (t·∫°o ·ªü m·ª•c 3.1), cho ph√©p truy xu·∫•t danh s√°ch sinh vi√™n t·ª´ b·∫£ng DynamoDB studentData. Ph∆∞∆°ng th·ª©c s·∫Ω y√™u c·∫ßu API Key (StudentApiKey, t·∫°o ·ªü m·ª•c 4.2) trong header x-api-key ƒë·ªÉ b·∫£o m·∫≠t, v√† chu·∫©n b·ªã cho vi·ªác k√≠ch ho·∫°t CORS (m·ª•c 4.7) ƒë·ªÉ giao di·ªán web (ch·∫°y tr√™n CloudFront) c√≥ th·ªÉ g·ª≠i y√™u c·∫ßu.\nT·ªïng Quan v·ªÅ Ph∆∞∆°ng Th·ª©c GET Ph∆∞∆°ng th·ª©c GET /students s·∫Ω g·ªçi h√†m Lambda getStudentData ƒë·ªÉ l·∫•y t·∫•t c·∫£ b·∫£n ghi t·ª´ b·∫£ng DynamoDB studentData (c√°c tr∆∞·ªùng: studentid, name, class, birthdate, email). H√†m getStudentData tr·∫£ v·ªÅ ph·∫£n h·ªìi JSON v·ªõi header Access-Control-Allow-Origin: '*' ƒë·ªÉ h·ªó tr·ª£ CORS, ph√π h·ª£p v·ªõi giao di·ªán web. API Key Required ƒë·∫£m b·∫£o ch·ªâ c√°c y√™u c·∫ßu c√≥ StudentApiKey h·ª£p l·ªá m·ªõi ƒë∆∞·ª£c x·ª≠ l√Ω. Sau khi t·∫°o, API c·∫ßn ƒë∆∞·ª£c tri·ªÉn khai (m·ª•c 4.8) ƒë·ªÉ ph∆∞∆°ng th·ª©c GET c√≥ hi·ªáu l·ª±c. Y√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh m·ª•c 4.1 (t·∫°o API student), m·ª•c 4.2 (t·∫°o API Key StudentApiKey), m·ª•c 4.3 (t·∫°o Usage Plan StudentUsagePlan), v√† m·ª•c 3 (t·∫°o c√°c h√†m Lambda getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, SES email x√°c minh). ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1.\nH√†nh ƒê·ªông Chi Ti·∫øt Truy C·∫≠p AWS Management Console\nM·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS c·ªßa b·∫°n.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p API Gateway v√† ch·ªçn d·ªãch v·ª• Amazon API Gateway ƒë·ªÉ v√†o giao di·ªán qu·∫£n l√Ω.\nKi·ªÉm tra v√πng AWS: ƒê·∫£m b·∫£o b·∫°n ƒëang l√†m vi·ªác trong v√πng AWS ch√≠nh (gi·∫£ ƒë·ªãnh us-east-1 ƒë·ªÉ ƒë·ªìng b·ªô v·ªõi c√°c m·ª•c tr∆∞·ªõc), ki·ªÉm tra v√πng ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. V√πng n√†y ph·∫£i kh·ªõp v·ªõi API student, h√†m Lambda getStudentData, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, v√† SES.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm API Gateway.\nƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c APIs\nTrong giao di·ªán ch√≠nh c·ªßa Amazon API Gateway, nh√¨n v√†o menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn APIs ƒë·ªÉ xem danh s√°ch c√°c API hi·ªán c√≥.\nDanh s√°ch s·∫Ω hi·ªÉn th·ªã API student (t·∫°o ·ªü m·ª•c 4.1). N·∫øu kh√¥ng th·∫•y, ki·ªÉm tra l·∫°i v√πng AWS ho·∫∑c l√†m m·ªõi trang.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn APIs.\nCh·ªçn API student\nTrong danh s√°ch APIs, t√¨m v√† ch·ªçn API c√≥ t√™n student.\nB·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang qu·∫£n l√Ω API student, hi·ªÉn th·ªã c√°c m·ª•c nh∆∞ Resources, Stages, API Keys, v.v.\nCh·ªçn Resources t·ª´ menu b√™n tr√°i ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh resource v√† method.\nH√¨nh 3: Trang qu·∫£n l√Ω API student v·ªõi t√πy ch·ªçn Resources.\nT·∫°o Resource /students\nTrong giao di·ªán Resources, b·∫°n s·∫Ω th·∫•y c√¢y t√†i nguy√™n v·ªõi g·ªëc l√† /.\nNh·∫•n Actions \u0026gt; Create Resource ƒë·ªÉ t·∫°o resource m·ªõi.\nC·∫•u h√¨nh resource:\nResource Name: Nh·∫≠p students. Resource Path: Nh·∫≠p /students (ho·∫∑c ƒë·ªÉ m·∫∑c ƒë·ªãnh, s·∫Ω t·ª± ƒë·ªông l√† /students). Enable API Gateway CORS: Ch·ªçn ƒë·ªÉ chu·∫©n b·ªã cho vi·ªác k√≠ch ho·∫°t CORS (m·ª•c 4.7). Nh·∫•n Create Resource ƒë·ªÉ t·∫°o.\nKi·ªÉm tra: Resource /students s·∫Ω xu·∫•t hi·ªán d∆∞·ªõi g·ªëc / trong c√¢y t√†i nguy√™n.\nH√¨nh 4: Giao di·ªán t·∫°o resource /students.\nT·∫°o Ph∆∞∆°ng Th·ª©c GET\nTrong c√¢y t√†i nguy√™n, ch·ªçn resource /students.\nNh·∫•n Actions \u0026gt; Create Method.\nTrong dropdown d∆∞·ªõi /students, ch·ªçn GET v√† nh·∫•n bi·ªÉu t∆∞·ª£ng check (‚úî) ƒë·ªÉ x√°c nh·∫≠n.\nL∆∞u √Ω: N·∫øu dropdown kh√¥ng hi·ªÉn th·ªã GET, ƒë·∫£m b·∫£o b·∫°n ƒë√£ ch·ªçn ƒë√∫ng resource /students.\nIntegration Type: Ch·ªçn Lambda Function ƒë·ªÉ t√≠ch h·ª£p v·ªõi h√†m Lambda.\nH√¨nh 5: Giao di·ªán t·∫°o ph∆∞∆°ng th·ª©c GET.\nC·∫•u H√¨nh T√≠ch H·ª£p Lambda\nTrong giao di·ªán c·∫•u h√¨nh ph∆∞∆°ng th·ª©c GET:\nUse Lambda Proxy integration: Ch·ªçn (ƒë·ªÉ g·ª≠i to√†n b·ªô y√™u c·∫ßu HTTP ƒë·∫øn h√†m Lambda v√† nh·∫≠n ph·∫£n h·ªìi JSON v·ªõi headers). Lambda Region: Ch·ªçn us-east-1 (ho·∫∑c v√πng AWS c·ªßa b·∫°n, ph·∫£i kh·ªõp v·ªõi v√πng c·ªßa h√†m getStudentData). Lambda Function: Nh·∫≠p getStudentData. L∆∞u √Ω: N·∫øu h√†m getStudentData kh√¥ng xu·∫•t hi·ªán trong danh s√°ch g·ª£i √Ω, nh·∫≠p th·ªß c√¥ng v√† ƒë·∫£m b·∫£o h√†m t·ªìn t·∫°i trong Lambda (m·ª•c 3.1). Nh·∫•n Save ƒë·ªÉ l∆∞u c·∫•u h√¨nh. N·∫øu AWS y√™u c·∫ßu c·∫•p quy·ªÅn, nh·∫•n OK ƒë·ªÉ cho ph√©p API Gateway g·ªçi h√†m Lambda getStudentData. AWS s·∫Ω t·ª± ƒë·ªông th√™m ch√≠nh s√°ch IAM v√†o vai tr√≤ c·ªßa h√†m Lambda (th∆∞·ªùng l√† LambdaGetStudentRole t·ª´ m·ª•c 3.1) v·ªõi quy·ªÅn lambda:InvokeFunction.\nH√¨nh 6: Giao di·ªán c·∫•u h√¨nh t√≠ch h·ª£p Lambda.\nB·∫≠t API Key Required\nTrong giao di·ªán Method Request c·ªßa GET /students:\nNh·∫•n Edit b√™n c·∫°nh Authorization. Ch·ªçn NONE (API Key s·∫Ω x·ª≠ l√Ω x√°c th·ª±c, kh√¥ng c·∫ßn Cognito ho·∫∑c IAM Authorizer). Trong API Key Required, ch·ªçn true ƒë·ªÉ y√™u c·∫ßu API Key trong header x-api-key. Gi·∫£i th√≠ch: ƒêi·ªÅu n√†y ƒë·∫£m b·∫£o m·ªçi y√™u c·∫ßu g·ª≠i ƒë·∫øn GET /students ph·∫£i ch·ª©a StudentApiKey (t·∫°o ·ªü m·ª•c 4.2) trong header x-api-key. Nh·∫•n Save ho·∫∑c bi·ªÉu t∆∞·ª£ng check (‚úî) ƒë·ªÉ l∆∞u c·∫•u h√¨nh. H√¨nh 7: Giao di·ªán b·∫≠t API Key Required.\nKi·ªÉm Tra Tr·∫°ng Th√°i T·∫°o Ph∆∞∆°ng Th·ª©c\nSau khi c·∫•u h√¨nh v√† nh·∫•n Save, b·∫°n s·∫Ω th·∫•y th√¥ng b√°o: \u0026ldquo;Successfully created method ‚ÄòGET‚Äô. Redeploy your API for the update to take effect.\u0026rdquo;\nL∆∞u √Ω quan tr·ªçng: Ph∆∞∆°ng th·ª©c GET s·∫Ω kh√¥ng ho·∫°t ƒë·ªông cho ƒë·∫øn khi b·∫°n tri·ªÉn khai API v√†o m·ªôt stage (m·ª•c 4.8).\nƒê·ªÉ ki·ªÉm tra c·∫•u h√¨nh:\nTrong Resources, ch·ªçn GET d∆∞·ªõi /students. X√°c minh: Integration Request: Hi·ªÉn th·ªã Lambda Function: getStudentData. Method Request: API Key Required: true. N·∫øu g·∫∑p l·ªói: \u0026ldquo;Lambda function not found\u0026rdquo;: Ki·ªÉm tra h√†m getStudentData t·ªìn t·∫°i trong Lambda v√† v√πng AWS kh·ªõp (us-east-1). \u0026ldquo;AccessDenied\u0026rdquo;: Ki·ªÉm tra vai tr√≤ IAM c·ªßa t√†i kho·∫£n AWS c√≥ quy·ªÅn apigateway:PUT ƒë·ªÉ t·∫°o method. \u0026ldquo;Permission denied\u0026rdquo;: ƒê·∫£m b·∫£o API Gateway c√≥ quy·ªÅn g·ªçi getStudentData (AWS t·ª± ƒë·ªông th√™m quy·ªÅn khi b·∫°n nh·∫•n OK). H√¨nh 8: Th√¥ng b√°o th√†nh c√¥ng sau khi t·∫°o ph∆∞∆°ng th·ª©c GET.\nL∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt T√≠ch h·ª£p Lambda Proxy Lambda Proxy integration cho ph√©p g·ª≠i to√†n b·ªô y√™u c·∫ßu HTTP (headers, query parameters, body) ƒë·∫øn h√†m getStudentData v√† nh·∫≠n ph·∫£n h·ªìi JSON v·ªõi headers (nh∆∞ Access-Control-Allow-Origin: '*'). ƒê·∫£m b·∫£o m√£ c·ªßa getStudentData (m·ª•c 3.1) tr·∫£ v·ªÅ ph·∫£n h·ªìi ƒë√∫ng ƒë·ªãnh d·∫°ng. B·∫£o m·∫≠t API Key V·ªõi API Key Required: true, y√™u c·∫ßu g·ª≠i ƒë·∫øn GET /students ph·∫£i ch·ª©a header x-api-key: \u0026lt;StudentApiKey\u0026gt;. ƒê·ªÉ tƒÉng c∆∞·ªùng b·∫£o m·∫≠t, l∆∞u API Key trong AWS Secrets Manager (xem m·ª•c 4.2). CORS Ph∆∞∆°ng th·ª©c GET c·∫ßn h·ªó tr·ª£ CORS ƒë·ªÉ giao di·ªán web c√≥ th·ªÉ g·ª≠i y√™u c·∫ßu cross-origin. ƒêi·ªÅu n√†y s·∫Ω ƒë∆∞·ª£c c·∫•u h√¨nh chi ti·∫øt ·ªü m·ª•c 4.7 (k√≠ch ho·∫°t CORS v·ªõi ph∆∞∆°ng th·ª©c OPTIONS). ƒê·∫£m b·∫£o h√†m getStudentData tr·∫£ v·ªÅ header Access-Control-Allow-Origin: '*' (ho·∫∑c domain CloudFront c·ª• th·ªÉ, v√≠ d·ª•: https://d12345678.cloudfront.net). V√πng AWS ƒê·∫£m b·∫£o v√πng us-east-1 kh·ªõp v·ªõi h√†m getStudentData, b·∫£ng DynamoDB studentData, v√† API student. N·∫øu s·ª≠ d·ª•ng v√πng kh√°c (v√≠ d·ª•: us-west-2), ch·ªçn ƒë√∫ng v√πng trong Lambda Region. X·ª≠ l√Ω l·ªói - N·∫øu g·∫∑p l·ªói \u0026ldquo;Lambda function not found\u0026rdquo;: - Ki·ªÉm tra h√†m getStudentData t·ªìn t·∫°i trong Lambda \u0026gt; Functions. - ƒê·∫£m b·∫£o v√πng AWS kh·ªõp (us-east-1). - N·∫øu g·∫∑p l·ªói 403 \u0026quot;Forbidden\u0026quot; khi g·ªçi API (sau khi deploy): - Ki·ªÉm tra API Key Required: true v√† API Key StudentApiKey h·ª£p l·ªá. - ƒê·∫£m b·∫£o API Key ƒë∆∞·ª£c li√™n k·∫øt v·ªõi Usage Plan (m·ª•c 4.3, 4.9). - N·∫øu g·∫∑p l·ªói 500 t·ª´ Lambda, ki·ªÉm tra log trong CloudWatch (log group /aws/lambda/getStudentData) ƒë·ªÉ g·ª° l·ªói. T·ªëi ∆∞u h√≥a - Th√™m header Access-Control-Allow-Origin trong Method Response ƒë·ªÉ ƒë·∫£m b·∫£o CORS ho·∫°t ƒë·ªông ƒë√∫ng: - Trong Method Response c·ªßa GET /students, th√™m Status Code 200 v·ªõi header Access-Control-Allow-Origin: '*'. - Trong Integration Response, √°nh x·∫° ph·∫£n h·ªìi t·ª´ Lambda ƒë·ªÉ tr·∫£ v·ªÅ JSON ƒë√∫ng ƒë·ªãnh d·∫°ng. - C√¢n nh·∫Øc s·ª≠ d·ª•ng AWS WAF v·ªõi API Gateway ƒë·ªÉ b·∫£o v·ªá kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng DDoS ho·∫∑c l·∫°m d·ª•ng API Key. - N·∫øu b·∫£ng studentData l·ªõn, ƒë·∫£m b·∫£o h√†m getStudentData x·ª≠ l√Ω ph√¢n trang (nh∆∞ trong m√£ c·∫£i ti·∫øn ·ªü m·ª•c 3.1) ƒë·ªÉ tr√°nh v∆∞·ª£t gi·ªõi h·∫°n Scan. Ki·ªÉm tra s·ªõm - Sau khi t·∫°o ph∆∞∆°ng th·ª©c GET, x√°c minh c·∫•u h√¨nh trong Resources \u0026gt; GET /students (Integration Request, Method Request). - Sau khi deploy API (m·ª•c 4.8), ki·ªÉm tra ph∆∞∆°ng th·ª©c GET b·∫±ng Postman ho·∫∑c curl. - N·∫øu nh·∫≠n l·ªói 403 \u0026quot;Forbidden\u0026quot;, ki·ªÉm tra API Key ho·∫∑c c·∫•u h√¨nh API Key Required. - N·∫øu nh·∫≠n l·ªói 500, ki·ªÉm tra log CloudWatch c·ªßa h√†m getStudentData. Ki·ªÉm tra t√≠ch h·ª£p v·ªõi giao di·ªán web Sau khi deploy API (m·ª•c 4.8) v√† li√™n k·∫øt Usage Plan (m·ª•c 4.9), s·ª≠ d·ª•ng API Key trong giao di·ªán web (s·ª≠ d·ª•ng Tailwind CSS, ch·∫°y tr√™n CloudFront) ƒë·ªÉ g·ªçi endpoint GET /students. M·∫πo th·ª±c ti·ªÖn: X√°c minh c·∫•u h√¨nh Integration Request v√† API Key Required tr∆∞·ªõc khi tri·ªÉn khai API. Ki·ªÉm tra ph·∫£n h·ªìi JSON t·ª´ h√†m getStudentData b·∫±ng Postman ƒë·ªÉ ƒë·∫£m b·∫£o d·ªØ li·ªáu sinh vi√™n ƒë∆∞·ª£c tr·∫£ v·ªÅ ƒë√∫ng ƒë·ªãnh d·∫°ng.\nK·∫øt Lu·∫≠n Ph∆∞∆°ng th·ª©c GET /students ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng trong API student, t√≠ch h·ª£p v·ªõi h√†m Lambda getStudentData v√† y√™u c·∫ßu API Key StudentApiKey, s·∫µn s√†ng ƒë·ªÉ tri·ªÉn khai v√† s·ª≠ d·ª•ng trong giao di·ªán web.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn T·∫°o ph∆∞∆°ng th·ª©c POST ƒë·ªÉ l∆∞u d·ªØ li·ªáu ƒë·ªÉ ti·∫øp t·ª•c!\n"
},
{
	"uri": "//localhost:1313/vi/2-preparation-steps/2.5-configureses/",
	"title": "C·∫•u h√¨nh Amazon SES",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: C·∫•u h√¨nh Amazon SES ƒë·ªÉ g·ª≠i email x√°c nh·∫≠n cho h√†m Lambda insertStudentData (x√°c nh·∫≠n khi l∆∞u d·ªØ li·ªáu sinh vi√™n) v√† BackupDynamoDBAndSendEmail (th√¥ng b√°o link t·∫£i t·ªáp backup). X√°c minh ƒë·ªãa ch·ªâ email (v√≠ d·ª•: nguyentribaothang@gmail.com) v√† tho√°t ch·∫ø ƒë·ªô sandbox ƒë·ªÉ g·ª≠i email ƒë·∫øn c√°c ƒë·ªãa ch·ªâ ch∆∞a x√°c minh.\nAmazon SES l√† d·ªãch v·ª• g·ª≠i email c·ªßa AWS v·ªõi ƒë·ªô tin c·∫≠y cao v√† chi ph√≠ th·∫•p, d√πng ƒë·ªÉ:\nG·ª≠i email x√°c nh·∫≠n khi th√™m sinh vi√™n v√†o b·∫£ng DynamoDB studentData. G·ª≠i email th√¥ng b√°o ch·ª©a pre-signed URL c·ªßa t·ªáp backup t·ª´ S3. L∆∞u √Ω: T√†i kho·∫£n SES m·∫∑c ƒë·ªãnh ·ªü ch·∫ø ƒë·ªô sandbox, ch·ªâ cho ph√©p g·ª≠i email ƒë·∫øn ƒë·ªãa ch·ªâ ƒë√£ x√°c minh. Tho√°t sandbox l√† c·∫ßn thi·∫øt ƒë·ªÉ g·ª≠i email ƒë·∫øn ƒë·ªãa ch·ªâ sinh vi√™n (ch∆∞a x√°c minh).\nH√†nh ƒê·ªông Chi Ti·∫øt D∆∞·ªõi ƒë√¢y l√† c√°c b∆∞·ªõc chi ti·∫øt ƒë·ªÉ c·∫•u h√¨nh SES:\n1. Truy C·∫≠p AWS Management Console M·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console.\nTrong thanh t√¨m ki·∫øm, nh·∫≠p SES v√† ch·ªçn Amazon Simple Email Service (SES).\nƒê·∫£m b·∫£o b·∫°n ·ªü v√πng AWS h·ªó tr·ª£ SES (v√≠ d·ª•: us-east-1), ki·ªÉm tra ·ªü g√≥c tr√™n b√™n ph·∫£i.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm SES.\n2. ƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c Verified Identities Trong giao di·ªán SES, t√¨m menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn Verified identities (Danh t√≠nh ƒë√£ x√°c minh) ƒë·ªÉ xem danh s√°ch email ho·∫∑c domain ƒë√£ x√°c minh. N·∫øu ch∆∞a c√≥, danh s√°ch s·∫Ω tr·ªëng.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn Verified identities.\n3. Kh·ªüi T·∫°o Qu√° Tr√¨nh T·∫°o Danh T√≠nh Trong giao di·ªán Verified identities, nh·∫•n Create identity (T·∫°o danh t√≠nh) ·ªü g√≥c tr√™n b√™n ph·∫£i.\nH√¨nh 3: N√∫t Create Identity trong giao di·ªán Verified identities.\n4. C·∫•u H√¨nh ƒê·ªãa Ch·ªâ Email Trong m·ª•c Identity type, ch·ªçn Email address.\nTrong tr∆∞·ªùng Email address, nh·∫≠p ƒë·ªãa ch·ªâ email ngu·ªìn (v√≠ d·ª•: nguyentribaothang@gmail.com).\nL∆∞u √Ω: D√πng email b·∫°n c√≥ quy·ªÅn truy c·∫≠p ƒë·ªÉ nh·∫≠n email x√°c minh. Tr√°nh s·ª≠ d·ª•ng email m·∫´u nh∆∞ example@gmail.com.\nGi·ªØ c√°c thi·∫øt l·∫≠p m·∫∑c ƒë·ªãnh (kh√¥ng c·∫ßn Feedback notifications ho·∫∑c DKIM settings).\nNh·∫•n Create identity ƒë·ªÉ g·ª≠i y√™u c·∫ßu x√°c minh.\nH√¨nh 4: Giao di·ªán c·∫•u h√¨nh ƒë·ªãa ch·ªâ email.\n5. Ki·ªÉm Tra v√† X√°c Minh Email AWS SES g·ª≠i email x√°c minh ƒë·∫øn ƒë·ªãa ch·ªâ ƒë√£ nh·∫≠p (v√≠ d·ª•: nguyentribaothang@gmail.com).\nƒêƒÉng nh·∫≠p v√†o t√†i kho·∫£n email, ki·ªÉm tra Inbox ho·∫∑c Spam/Junk ƒë·ªÉ t√¨m email t·ª´ AWS (ti√™u ƒë·ªÅ nh∆∞ \u0026ldquo;Amazon Web Services - Email Address Verification Request\u0026rdquo;).\nNh·∫•p v√†o ƒë∆∞·ªùng d·∫´n x√°c minh trong email ƒë·ªÉ ho√†n t·∫•t.\nQuay l·∫°i SES, l√†m m·ªõi trang Verified identities. X√°c nh·∫≠n tr·∫°ng th√°i l√† Verified.\nH√¨nh 5: Ki·ªÉm tra tr·∫°ng th√°i Verified c·ªßa email.\n6. Ki·ªÉm Tra Ch·∫ø ƒê·ªô Sandbox v√† Y√™u C·∫ßu Tho√°t Sandbox Ki·ªÉm tra sandbox: Trong SES, v√†o Account dashboard ho·∫∑c Sending statistics. Ki·ªÉm tra m·ª•c Account status. N·∫øu hi·ªÉn th·ªã \u0026ldquo;Your account is in the sandbox\u0026rdquo;, t√†i kho·∫£n ƒëang gi·ªõi h·∫°n g·ª≠i email ƒë·∫øn ƒë·ªãa ch·ªâ ƒë√£ x√°c minh. Y√™u c·∫ßu tho√°t sandbox: Trong Account dashboard, nh·∫•n Edit your account details ho·∫∑c Request production access. ƒêi·ªÅn bi·ªÉu m·∫´u: Use case description: \u0026ldquo;G·ª≠i email x√°c nh·∫≠n khi l∆∞u th√¥ng tin sinh vi√™n v√† th√¥ng b√°o sao l∆∞u d·ªØ li·ªáu t·ª´ DynamoDB.\u0026rdquo; Mail type: Ch·ªçn Transactional. Website URL: Nh·∫≠p URL ·ª©ng d·ª•ng (n·∫øu c√≥) ho·∫∑c ghi \u0026ldquo;Website ƒëang ph√°t tri·ªÉn.\u0026rdquo; Sender email address: Nh·∫≠p email ƒë√£ x√°c minh (v√≠ d·ª•: nguyentribaothang@gmail.com). Additional information: \u0026ldquo;C·∫ßn g·ª≠i email ƒë·∫øn ƒë·ªãa ch·ªâ sinh vi√™n ch∆∞a x√°c minh cho h·ªá th·ªëng qu·∫£n l√Ω th√¥ng tin sinh vi√™n.\u0026rdquo; G·ª≠i y√™u c·∫ßu. AWS ph√™ duy·ªát trong 24-48 gi·ªù, th√¥ng b√°o qua email. Gi·∫£i ph√°p t·∫°m th·ªùi: Trong sandbox, x√°c minh th√™m email nh·∫≠n (theo b∆∞·ªõc 4‚Äì5) ho·∫∑c s·ª≠a m√£ Lambda ƒë·ªÉ ch·ªâ g·ª≠i ƒë·∫øn email ƒë√£ x√°c minh. 7. X√°c Minh v√† Th·ª≠ Nghi·ªám SES Quay l·∫°i Verified identities, ki·ªÉm tra tr·∫°ng th√°i email (v√≠ d·ª•: nguyentribaothang@gmail.com) l√† Verified.\nTrong SES, ch·ªçn Send a test email (n·∫øu c√≥), g·ª≠i email th·ª≠ ƒë·∫øn email ƒë√£ x√°c minh ƒë·ªÉ ki·ªÉm tra ho·∫°t ƒë·ªông.\nN·∫øu tr·∫°ng th√°i v·∫´n l√† Pending, ki·ªÉm tra l·∫°i email (Inbox/Spam) ho·∫∑c t·∫°o l·∫°i danh t√≠nh.\nH√¨nh 6: X√°c nh·∫≠n tr·∫°ng th√°i Verified v√† th·ª≠ nghi·ªám g·ª≠i email.\nL∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt Email h·ª£p l·ªá S·ª≠ d·ª•ng email b·∫°n c√≥ quy·ªÅn truy c·∫≠p (v√≠ d·ª•: nguyentribaothang@gmail.com). N·∫øu kh√¥ng nh·∫≠n ƒë∆∞·ª£c email x√°c minh trong 5-10 ph√∫t, ki·ªÉm tra Spam/Junk ho·∫∑c li√™n h·ªá AWS Support. Ch·∫ø ƒë·ªô sandbox Trong sandbox, ch·ªâ g·ª≠i email ƒë·∫øn ƒë·ªãa ch·ªâ ƒë√£ x√°c minh. Tho√°t sandbox ƒë·ªÉ g·ª≠i ƒë·∫øn email sinh vi√™n (ch∆∞a x√°c minh), ho·∫∑c h√†m insertStudentData s·∫Ω b√°o l·ªói AccessDenied. V√πng AWS C·∫•u h√¨nh SES trong v√πng h·ªó tr·ª£ (v√≠ d·ª•: us-east-1), kh·ªõp v·ªõi Lambda. Ki·ªÉm tra danh s√°ch v√πng h·ªó tr·ª£ SES trong AWS SES Documentation. X·ª≠ l√Ω l·ªói N·∫øu kh√¥ng nh·∫≠n email x√°c minh, ki·ªÉm tra c·∫•u h√¨nh DNS ho·∫∑c li√™n h·ªá nh√† cung c·∫•p email. N·∫øu Lambda b√°o l·ªói \u0026ldquo;Email address is not verified\u0026rdquo;, ki·ªÉm tra tr·∫°ng th√°i x√°c minh trong SES ho·∫∑c CloudWatch logs. T·ªëi ∆∞u h√≥a C√¢n nh·∫Øc x√°c minh domain ho·∫∑c c·∫•u h√¨nh DKIM cho b·∫£o m·∫≠t. Xem AWS SES Documentation - DKIM. Ki·ªÉm tra s·ªõm Th·ª≠ g·ª≠i email test t·ª´ SES tr∆∞·ªõc khi t√≠ch h·ª£p v·ªõi Lambda ƒë·ªÉ ƒë·∫£m b·∫£o ho·∫°t ƒë·ªông ƒë√∫ng. M·∫πo th·ª±c ti·ªÖn: Sau khi x√°c minh email, g·ª≠i email th·ª≠ t·ª´ SES ƒë·ªÉ ki·ªÉm tra tr∆∞·ªõc khi ch·∫°y c√°c h√†m Lambda.\nK·∫øt Lu·∫≠n C·∫•u h√¨nh SES v·ªõi email ƒë√£ x√°c minh (v√≠ d·ª•: nguyentribaothang@gmail.com) v√† tho√°t sandbox (n·∫øu c·∫ßn) ƒë·∫£m b·∫£o c√°c h√†m Lambda insertStudentData v√† BackupDynamoDBAndSendEmail g·ª≠i email x√°c nh·∫≠n v√† th√¥ng b√°o th√†nh c√¥ng. SES ƒë√£ s·∫µn s√†ng t√≠ch h·ª£p v√†o ·ª©ng d·ª•ng serverless.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn C·∫•u h√¨nh Lambda Functions ƒë·ªÉ thi·∫øt l·∫≠p c√°c h√†m Lambda!\n"
},
{
	"uri": "//localhost:1313/vi/4-creating-a-restful-api/4.5-creating-a-post-method/",
	"title": "T·∫°o ph∆∞∆°ng th·ª©c POST ƒë·ªÉ l∆∞u d·ªØ li·ªáu",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o ph∆∞∆°ng th·ª©c POST tr√™n resource /students trong API student (t·∫°o ·ªü m·ª•c 4.1) ƒë·ªÉ t√≠ch h·ª£p v·ªõi h√†m Lambda insertStudentData (t·∫°o ·ªü m·ª•c 3.2), cho ph√©p l∆∞u th√¥ng tin sinh vi√™n v√†o b·∫£ng DynamoDB studentData v√† g·ª≠i email x√°c nh·∫≠n qua SES. Ph∆∞∆°ng th·ª©c s·∫Ω y√™u c·∫ßu API Key (StudentApiKey, t·∫°o ·ªü m·ª•c 4.2) trong header x-api-key ƒë·ªÉ b·∫£o m·∫≠t, v√† chu·∫©n b·ªã cho vi·ªác k√≠ch ho·∫°t CORS (m·ª•c 4.7) ƒë·ªÉ giao di·ªán web (ch·∫°y tr√™n CloudFront) c√≥ th·ªÉ g·ª≠i y√™u c·∫ßu.\nT·ªïng Quan v·ªÅ Ph∆∞∆°ng Th·ª©c POST Ph∆∞∆°ng th·ª©c POST /students s·∫Ω g·ªçi h√†m Lambda insertStudentData ƒë·ªÉ l∆∞u m·ªôt b·∫£n ghi sinh vi√™n (c√°c tr∆∞·ªùng: studentid, name, class, birthdate, email) v√†o b·∫£ng DynamoDB studentData v√† g·ª≠i email x√°c nh·∫≠n qua SES. H√†m insertStudentData tr·∫£ v·ªÅ ph·∫£n h·ªìi JSON v·ªõi header Access-Control-Allow-Origin: '*' ƒë·ªÉ h·ªó tr·ª£ CORS, ph√π h·ª£p v·ªõi giao di·ªán web. API Key Required ƒë·∫£m b·∫£o ch·ªâ c√°c y√™u c·∫ßu c√≥ StudentApiKey h·ª£p l·ªá m·ªõi ƒë∆∞·ª£c x·ª≠ l√Ω. Sau khi t·∫°o, API c·∫ßn ƒë∆∞·ª£c tri·ªÉn khai (m·ª•c 4.8) ƒë·ªÉ ph∆∞∆°ng th·ª©c POST c√≥ hi·ªáu l·ª±c. Y√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh m·ª•c 4.1 (t·∫°o API student), m·ª•c 4.2 (t·∫°o API Key StudentApiKey), m·ª•c 4.3 (t·∫°o Usage Plan StudentUsagePlan), m·ª•c 4.4 (t·∫°o ph∆∞∆°ng th·ª©c GET /students), v√† m·ª•c 3 (t·∫°o c√°c h√†m Lambda getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, SES email x√°c minh). ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1.\nH√†nh ƒê·ªông Chi Ti·∫øt Truy C·∫≠p AWS Management Console\nM·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS c·ªßa b·∫°n.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p API Gateway v√† ch·ªçn d·ªãch v·ª• Amazon API Gateway ƒë·ªÉ v√†o giao di·ªán qu·∫£n l√Ω.\nKi·ªÉm tra v√πng AWS: ƒê·∫£m b·∫£o b·∫°n ƒëang l√†m vi·ªác trong v√πng AWS ch√≠nh (gi·∫£ ƒë·ªãnh us-east-1 ƒë·ªÉ ƒë·ªìng b·ªô v·ªõi c√°c m·ª•c tr∆∞·ªõc), ki·ªÉm tra v√πng ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. V√πng n√†y ph·∫£i kh·ªõp v·ªõi API student, h√†m Lambda insertStudentData, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, v√† SES.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm API Gateway.\nƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c APIs\nTrong giao di·ªán ch√≠nh c·ªßa Amazon API Gateway, nh√¨n v√†o menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn APIs ƒë·ªÉ xem danh s√°ch c√°c API hi·ªán c√≥.\nDanh s√°ch s·∫Ω hi·ªÉn th·ªã API student (t·∫°o ·ªü m·ª•c 4.1). N·∫øu kh√¥ng th·∫•y, ki·ªÉm tra l·∫°i v√πng AWS ho·∫∑c l√†m m·ªõi trang.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn APIs.\nCh·ªçn API student\nTrong danh s√°ch APIs, t√¨m v√† ch·ªçn API c√≥ t√™n student.\nB·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang qu·∫£n l√Ω API student, hi·ªÉn th·ªã c√°c m·ª•c nh∆∞ Resources, Stages, API Keys, v.v.\nCh·ªçn Resources t·ª´ menu b√™n tr√°i ƒë·ªÉ ti·∫øp t·ª•c c·∫•u h√¨nh resource v√† method.\nH√¨nh 3: Trang qu·∫£n l√Ω API student v·ªõi t√πy ch·ªçn Resources.\nS·ª≠ D·ª•ng Resource /students\nTrong giao di·ªán Resources, b·∫°n s·∫Ω th·∫•y c√¢y t√†i nguy√™n v·ªõi g·ªëc l√† / v√† resource /students (ƒë√£ t·∫°o ·ªü m·ª•c 4.4 cho ph∆∞∆°ng th·ª©c GET).\nN·∫øu resource /students ch∆∞a t·ªìn t·∫°i:\nNh·∫•n Actions \u0026gt; Create Resource. C·∫•u h√¨nh resource: Resource Name: Nh·∫≠p students. Resource Path: Nh·∫≠p /students (ho·∫∑c ƒë·ªÉ m·∫∑c ƒë·ªãnh, s·∫Ω t·ª± ƒë·ªông l√† /students). Enable API Gateway CORS: Ch·ªçn ƒë·ªÉ chu·∫©n b·ªã cho vi·ªác k√≠ch ho·∫°t CORS (m·ª•c 4.7). Nh·∫•n Create Resource ƒë·ªÉ t·∫°o. Ch·ªçn resource /students trong c√¢y t√†i nguy√™n ƒë·ªÉ t·∫°o ph∆∞∆°ng th·ª©c POST.\nH√¨nh 4: Giao di·ªán s·ª≠ d·ª•ng resource /students.\nT·∫°o Ph∆∞∆°ng Th·ª©c POST\nTrong c√¢y t√†i nguy√™n, ch·ªçn resource /students.\nNh·∫•n Actions \u0026gt; Create Method.\nTrong dropdown d∆∞·ªõi /students, ch·ªçn POST v√† nh·∫•n bi·ªÉu t∆∞·ª£ng check (‚úî) ƒë·ªÉ x√°c nh·∫≠n.\nL∆∞u √Ω: N·∫øu dropdown kh√¥ng hi·ªÉn th·ªã POST, ƒë·∫£m b·∫£o b·∫°n ƒë√£ ch·ªçn ƒë√∫ng resource /students.\nTrong giao di·ªán c·∫•u h√¨nh ph∆∞∆°ng th·ª©c POST:\nIntegration Type: Ch·ªçn Lambda Function ƒë·ªÉ t√≠ch h·ª£p v·ªõi h√†m Lambda. Use Lambda Proxy integration: Ch·ªçn (ƒë·ªÉ g·ª≠i to√†n b·ªô y√™u c·∫ßu HTTP, bao g·ªìm headers v√† body, ƒë·∫øn h√†m Lambda v√† nh·∫≠n ph·∫£n h·ªìi JSON v·ªõi headers). Lambda Region: Ch·ªçn us-east-1 (ho·∫∑c v√πng AWS c·ªßa b·∫°n, ph·∫£i kh·ªõp v·ªõi v√πng c·ªßa h√†m insertStudentData). Lambda Function: Nh·∫≠p insertStudentData. L∆∞u √Ω: N·∫øu h√†m insertStudentData kh√¥ng xu·∫•t hi·ªán trong danh s√°ch g·ª£i √Ω, nh·∫≠p th·ªß c√¥ng v√† ƒë·∫£m b·∫£o h√†m t·ªìn t·∫°i trong Lambda (m·ª•c 3.2). Nh·∫•n Save ƒë·ªÉ l∆∞u c·∫•u h√¨nh. N·∫øu AWS y√™u c·∫ßu c·∫•p quy·ªÅn, nh·∫•n OK ƒë·ªÉ cho ph√©p API Gateway g·ªçi h√†m Lambda insertStudentData. AWS s·∫Ω t·ª± ƒë·ªông th√™m ch√≠nh s√°ch IAM v√†o vai tr√≤ c·ªßa h√†m Lambda (th∆∞·ªùng l√† LambdaInsertStudentRole t·ª´ m·ª•c 3.2) v·ªõi quy·ªÅn lambda:InvokeFunction.\nH√¨nh 5: Giao di·ªán t·∫°o ph∆∞∆°ng th·ª©c POST.\nB·∫≠t API Key Required\nTrong giao di·ªán Method Request c·ªßa POST /students:\nNh·∫•n Edit b√™n c·∫°nh Authorization. Ch·ªçn NONE (API Key s·∫Ω x·ª≠ l√Ω x√°c th·ª±c, kh√¥ng c·∫ßn Cognito ho·∫∑c IAM Authorizer). Trong API Key Required, ch·ªçn true ƒë·ªÉ y√™u c·∫ßu API Key trong header x-api-key. Gi·∫£i th√≠ch: ƒêi·ªÅu n√†y ƒë·∫£m b·∫£o m·ªçi y√™u c·∫ßu g·ª≠i ƒë·∫øn POST /students ph·∫£i ch·ª©a StudentApiKey (t·∫°o ·ªü m·ª•c 4.2) trong header x-api-key. Nh·∫•n Save ho·∫∑c bi·ªÉu t∆∞·ª£ng check (‚úî) ƒë·ªÉ l∆∞u c·∫•u h√¨nh. H√¨nh 6: Giao di·ªán b·∫≠t API Key Required.\nKi·ªÉm Tra Tr·∫°ng Th√°i T·∫°o Ph∆∞∆°ng Th·ª©c\nSau khi c·∫•u h√¨nh v√† nh·∫•n Save, b·∫°n s·∫Ω th·∫•y th√¥ng b√°o: \u0026ldquo;Successfully created method ‚ÄòPOST‚Äô. Redeploy your API for the update to take effect.\u0026rdquo;\nL∆∞u √Ω quan tr·ªçng: Ph∆∞∆°ng th·ª©c POST s·∫Ω kh√¥ng ho·∫°t ƒë·ªông cho ƒë·∫øn khi b·∫°n tri·ªÉn khai API v√†o m·ªôt stage (m·ª•c 4.8).\nƒê·ªÉ ki·ªÉm tra c·∫•u h√¨nh:\nTrong Resources, ch·ªçn POST d∆∞·ªõi /students. X√°c minh: Integration Request: Hi·ªÉn th·ªã Lambda Function: insertStudentData. Method Request: API Key Required: true. N·∫øu g·∫∑p l·ªói: \u0026ldquo;Lambda function not found\u0026rdquo;: Ki·ªÉm tra h√†m insertStudentData t·ªìn t·∫°i trong Lambda \u0026gt; Functions v√† v√πng AWS kh·ªõp (us-east-1). \u0026ldquo;AccessDenied\u0026rdquo;: Ki·ªÉm tra vai tr√≤ IAM c·ªßa t√†i kho·∫£n AWS c√≥ quy·ªÅn apigateway:PUT ƒë·ªÉ t·∫°o method. \u0026ldquo;Permission denied\u0026rdquo;: ƒê·∫£m b·∫£o API Gateway c√≥ quy·ªÅn g·ªçi insertStudentData (AWS t·ª± ƒë·ªông th√™m quy·ªÅn khi b·∫°n nh·∫•n OK). H√¨nh 7: Th√¥ng b√°o th√†nh c√¥ng sau khi t·∫°o ph∆∞∆°ng th·ª©c POST. L∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt T√≠ch h·ª£p Lambda Proxy Lambda Proxy integration cho ph√©p g·ª≠i to√†n b·ªô y√™u c·∫ßu HTTP (headers, body) ƒë·∫øn h√†m insertStudentData v√† nh·∫≠n ph·∫£n h·ªìi JSON v·ªõi headers (nh∆∞ Access-Control-Allow-Origin: '*'). ƒê·∫£m b·∫£o m√£ c·ªßa insertStudentData (m·ª•c 3.2) x·ª≠ l√Ω ƒë√∫ng ƒë·ªãnh d·∫°ng JSON ƒë·∫ßu v√†o v√† tr·∫£ v·ªÅ ph·∫£n h·ªìi h·ª£p l·ªá. B·∫£o m·∫≠t API Key V·ªõi API Key Required: true, y√™u c·∫ßu g·ª≠i ƒë·∫øn POST /students ph·∫£i ch·ª©a header x-api-key: \u0026lt;StudentApiKey\u0026gt;. ƒê·ªÉ tƒÉng c∆∞·ªùng b·∫£o m·∫≠t, l∆∞u API Key trong AWS Secrets Manager (xem m·ª•c 4.2). CORS Ph∆∞∆°ng th·ª©c POST c·∫ßn h·ªó tr·ª£ CORS ƒë·ªÉ giao di·ªán web c√≥ th·ªÉ g·ª≠i y√™u c·∫ßu cross-origin. ƒêi·ªÅu n√†y s·∫Ω ƒë∆∞·ª£c c·∫•u h√¨nh chi ti·∫øt ·ªü m·ª•c 4.7 (k√≠ch ho·∫°t CORS v·ªõi ph∆∞∆°ng th·ª©c OPTIONS). ƒê·∫£m b·∫£o h√†m insertStudentData tr·∫£ v·ªÅ header Access-Control-Allow-Origin: '*' (ho·∫∑c domain CloudFront c·ª• th·ªÉ, v√≠ d·ª•: https://d12345678.cloudfront.net). V√πng AWS ƒê·∫£m b·∫£o v√πng us-east-1 kh·ªõp v·ªõi h√†m insertStudentData, b·∫£ng DynamoDB studentData, SES, v√† API student. N·∫øu s·ª≠ d·ª•ng v√πng kh√°c (v√≠ d·ª•: us-west-2), ch·ªçn ƒë√∫ng v√πng trong Lambda Region. X·ª≠ l√Ω l·ªói - N·∫øu g·∫∑p l·ªói \u0026ldquo;Lambda function not found\u0026rdquo;: - Ki·ªÉm tra h√†m insertStudentData t·ªìn t·∫°i trong Lambda \u0026gt; Functions. - ƒê·∫£m b·∫£o v√πng AWS kh·ªõp (us-east-1). - N·∫øu g·∫∑p l·ªói 403 \u0026quot;Forbidden\u0026quot; khi g·ªçi API (sau khi deploy): - Ki·ªÉm tra API Key Required: true v√† API Key StudentApiKey h·ª£p l·ªá. - ƒê·∫£m b·∫£o API Key ƒë∆∞·ª£c li√™n k·∫øt v·ªõi Usage Plan (m·ª•c 4.3, 4.9). - N·∫øu g·∫∑p l·ªói 400, 409, ho·∫∑c 500 t·ª´ Lambda, ki·ªÉm tra log trong CloudWatch (log group /aws/lambda/insertStudentData) ƒë·ªÉ g·ª° l·ªói: - 400: Body JSON kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng (thi·∫øu studentid, name, v.v.). - 409: studentid ƒë√£ t·ªìn t·∫°i (do ConditionExpression). - 500: L·ªói DynamoDB ho·∫∑c SES (v√≠ d·ª•: email ch∆∞a x√°c minh trong SES). T·ªëi ∆∞u h√≥a - Th√™m header Access-Control-Allow-Origin trong Method Response ƒë·ªÉ ƒë·∫£m b·∫£o CORS ho·∫°t ƒë·ªông ƒë√∫ng: - Trong Method Response c·ªßa POST /students, th√™m Status Code 200, 400, 409, 500 v·ªõi header Access-Control-Allow-Origin: '*'. - Trong Integration Response, √°nh x·∫° ph·∫£n h·ªìi t·ª´ Lambda ƒë·ªÉ x·ª≠ l√Ω c√°c m√£ tr·∫°ng th√°i. - C√¢n nh·∫Øc s·ª≠ d·ª•ng AWS WAF v·ªõi API Gateway ƒë·ªÉ b·∫£o v·ªá kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng DDoS ho·∫∑c l·∫°m d·ª•ng API Key. - N·∫øu c·∫ßn x√°c minh d·ªØ li·ªáu ƒë·∫ßu v√†o, th√™m Request Validator trong Method Request ƒë·ªÉ ki·ªÉm tra body JSON c√≥ c√°c tr∆∞·ªùng b·∫Øt bu·ªôc (studentid, name, class, birthdate, email). Ki·ªÉm tra s·ªõm - Sau khi t·∫°o ph∆∞∆°ng th·ª©c POST, x√°c minh c·∫•u h√¨nh trong Resources \u0026gt; POST /students (Integration Request, Method Request). - Sau khi deploy API (m·ª•c 4.8), ki·ªÉm tra ph∆∞∆°ng th·ª©c POST b·∫±ng Postman ho·∫∑c curl. - Ki·ªÉm tra b·∫£ng DynamoDB studentData (v√†o DynamoDB \u0026gt; Tables \u0026gt; studentData \u0026gt; Explore items) ƒë·ªÉ x√°c minh b·∫£n ghi m·ªõi. - Ki·ªÉm tra h·ªôp th∆∞ (bao g·ªìm Spam/Junk) c·ªßa email nh·∫≠n (v√≠ d·ª•: student4@example.com) ƒë·ªÉ x√°c minh email x√°c nh·∫≠n t·ª´ SES. - N·∫øu nh·∫≠n l·ªói 403 \u0026quot;Forbidden\u0026quot;, ki·ªÉm tra API Key v√† c·∫•u h√¨nh API Key Required. - N·∫øu nh·∫≠n l·ªói 400, 409, ho·∫∑c 500, ki·ªÉm tra log CloudWatch c·ªßa h√†m insertStudentData. Ki·ªÉm tra t√≠ch h·ª£p v·ªõi giao di·ªán web Sau khi deploy API (m·ª•c 4.8) v√† li√™n k·∫øt Usage Plan (m·ª•c 4.9), s·ª≠ d·ª•ng API Key trong giao di·ªán web (s·ª≠ d·ª•ng Tailwind CSS, ch·∫°y tr√™n CloudFront) ƒë·ªÉ g·ªçi endpoint POST /students. M·∫πo th·ª±c ti·ªÖn: X√°c minh c·∫•u h√¨nh Integration Request v√† API Key Required tr∆∞·ªõc khi tri·ªÉn khai API. Ki·ªÉm tra d·ªØ li·ªáu trong b·∫£ng studentData v√† email x√°c nh·∫≠n t·ª´ SES b·∫±ng Postman ƒë·ªÉ ƒë·∫£m b·∫£o h√†m insertStudentData ho·∫°t ƒë·ªông ƒë√∫ng.\nK·∫øt Lu·∫≠n Ph∆∞∆°ng th·ª©c POST /students ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng trong API student, t√≠ch h·ª£p v·ªõi h√†m Lambda insertStudentData v√† y√™u c·∫ßu API Key StudentApiKey, s·∫µn s√†ng ƒë·ªÉ tri·ªÉn khai v√† s·ª≠ d·ª•ng trong giao di·ªán web.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn T·∫°o Resource \u0026amp; Method cho t√≠nh nƒÉng Backup d·ªØ li·ªáu ƒë·ªÉ ti·∫øp t·ª•c!\n"
},
{
	"uri": "//localhost:1313/vi/5-designing-the-website-interface/",
	"title": "Vi·∫øt giao di·ªán cho Website",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: X√¢y d·ª±ng giao di·ªán web cho ·ª©ng d·ª•ng Qu·∫£n L√Ω D·ªØ Li·ªáu Sinh Vi√™n s·ª≠ d·ª•ng HTML, Tailwind CSS, v√† JavaScript (v·ªõi jQuery) ƒë·ªÉ:\nCho ph√©p ng∆∞·ªùi d√πng nh·∫≠p v√† l∆∞u th√¥ng tin sinh vi√™n (m√£ sinh vi√™n, h·ªç t√™n, l·ªõp, ng√†y sinh, email) qua endpoint POST /students. Hi·ªÉn th·ªã danh s√°ch sinh vi√™n t·ª´ endpoint GET /students. K√≠ch ho·∫°t sao l∆∞u d·ªØ li·ªáu qua endpoint POST /backup.\nGiao di·ªán s·∫Ω ƒë∆∞·ª£c tri·ªÉn khai tr√™n Amazon S3 (bucket tƒ©nh, m·ª•c 2.4) v√† ph√¢n ph·ªëi qua CloudFront (m·ª•c 6), t√≠ch h·ª£p v·ªõi API student (stage prod, m·ª•c 4.8) s·ª≠ d·ª•ng Invoke URL v√† API Key StudentApiKey (m·ª•c 4.2) v·ªõi b·∫£o m·∫≠t CORS (m·ª•c 4.7). T·ªïng Quan v·ªÅ Giao Di·ªán Web index.html: Cung c·∫•p c·∫•u tr√∫c giao di·ªán v·ªõi bi·ªÉu m·∫´u nh·∫≠p li·ªáu, c√°c n√∫t ch·ª©c nƒÉng (L∆∞u D·ªØ Li·ªáu Sinh Vi√™n, Xem T·∫•t C·∫£ Sinh Vi√™n, Backup D·ªØ Li·ªáu), v√† b·∫£ng hi·ªÉn th·ªã danh s√°ch sinh vi√™n. styles.css: S·ª≠ d·ª•ng Tailwind CSS v√† t√πy ch·ªânh v·ªõi font Poppins, gradient m√†u s·∫Øc, hi·ªáu ·ª©ng ƒë·ªông, v√† thi·∫øt k·∫ø responsive. scripts.js: X·ª≠ l√Ω logic g·ªçi API (GET /students, POST /students, POST /backup) v·ªõi jQuery, bao g·ªìm ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o, m√£ h√≥a HTML ƒë·ªÉ ngƒÉn XSS, v√† x·ª≠ l√Ω ph·∫£n h·ªìi/l·ªói t·ª´ API. T√≠ch h·ª£p AWS: Thay th·∫ø API_ENDPOINT b·∫±ng Invoke URL (v√≠ d·ª•: https://abc123.execute-api.us-east-1.amazonaws.com/prod) t·ª´ m·ª•c 4.8. Thay th·∫ø API_KEY b·∫±ng gi√° tr·ªã StudentApiKey t·ª´ m·ª•c 4.2, l∆∞u tr·ªØ an to√†n trong AWS Secrets Manager ho·∫∑c bi·∫øn m√¥i tr∆∞·ªùng. C·∫£i ti·∫øn: TƒÉng c∆∞·ªùng b·∫£o m·∫≠t b·∫±ng c√°ch l∆∞u API_KEY trong AWS Secrets Manager. C·∫£i thi·ªán tr·∫£i nghi·ªám ng∆∞·ªùi d√πng v·ªõi th√¥ng b√°o giao di·ªán (thay v√¨ alert). Th√™m ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o ch·∫∑t ch·∫Ω h∆°n. T·ªëi ∆∞u h√≥a responsive v√† hi·ªáu ·ª©ng ƒë·ªông. Y√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh m·ª•c 2.4 (t·∫°o bucket S3 tƒ©nh), m·ª•c 4.1 (t·∫°o API student), m·ª•c 4.2 (t·∫°o API Key StudentApiKey), m·ª•c 4.3 (t·∫°o Usage Plan StudentUsagePlan), m·ª•c 4.4 (t·∫°o ph∆∞∆°ng th·ª©c GET /students), m·ª•c 4.5 (t·∫°o ph∆∞∆°ng th·ª©c POST /students), m·ª•c 4.6 (t·∫°o resource /backup v√† ph∆∞∆°ng th·ª©c POST /backup), m·ª•c 4.7 (k√≠ch ho·∫°t CORS), m·ª•c 4.8 (tri·ªÉn khai API l√™n stage prod), m·ª•c 4.9 (g·∫Øn StudentApiKey v√†o StudentUsagePlan v√† li√™n k·∫øt v·ªõi API student stage prod), v√† m·ª•c 3 (t·∫°o c√°c h√†m Lambda getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, SES email x√°c minh). ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1. C·∫ßn c√≥ quy·ªÅn truy c·∫≠p S3, CloudFront, v√† API Gateway.\nH√†nh ƒê·ªông Chi Ti·∫øt C·∫•u H√¨nh T·ªáp index.html T·ªáp index.html ƒë·ªãnh nghƒ©a giao di·ªán v·ªõi bi·ªÉu m·∫´u nh·∫≠p li·ªáu, c√°c n√∫t ch·ª©c nƒÉng, v√† b·∫£ng hi·ªÉn th·ªã sinh vi√™n. \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;vi\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Qu·∫£n L√Ω D·ªØ Li·ªáu Sinh Vi√™n\u0026lt;/title\u0026gt; \u0026lt;script src=\u0026#34;https://cdn.tailwindcss.com\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;styles.css\u0026#34;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body class=\u0026#34;min-h-screen flex items-center justify-center p-6\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;form-container card\u0026#34;\u0026gt; \u0026lt;h1 class=\u0026#34;text-4xl font-bold text-center mb-8\u0026#34;\u0026gt;Qu·∫£n L√Ω Sinh Vi√™n\u0026lt;/h1\u0026gt; \u0026lt;div class=\u0026#34;space-y-6\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;grid grid-cols-1 md:grid-cols-2 gap-6\u0026#34;\u0026gt; \u0026lt;div\u0026gt; \u0026lt;label for=\u0026#34;studentid\u0026#34; class=\u0026#34;block text-sm mb-1\u0026#34;\u0026gt;M√£ Sinh Vi√™n\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;studentid\u0026#34; id=\u0026#34;studentid\u0026#34; class=\u0026#34;w-full\u0026#34; placeholder=\u0026#34;Nh·∫≠p m√£ sinh vi√™n\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;label for=\u0026#34;name\u0026#34; class=\u0026#34;block text-sm mb-1\u0026#34;\u0026gt;H·ªç T√™n\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;name\u0026#34; id=\u0026#34;name\u0026#34; class=\u0026#34;w-full\u0026#34; placeholder=\u0026#34;Nh·∫≠p h·ªç t√™n\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;label for=\u0026#34;class\u0026#34; class=\u0026#34;block text-sm mb-1\u0026#34;\u0026gt;L·ªõp\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;class\u0026#34; id=\u0026#34;class\u0026#34; class=\u0026#34;w-full\u0026#34; placeholder=\u0026#34;Nh·∫≠p l·ªõp\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;label for=\u0026#34;birthdate\u0026#34; class=\u0026#34;block text-sm mb-1\u0026#34;\u0026gt;Ng√†y Sinh\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;date\u0026#34; name=\u0026#34;birthdate\u0026#34; id=\u0026#34;birthdate\u0026#34; class=\u0026#34;w-full\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;md:col-span-2\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;email\u0026#34; class=\u0026#34;block text-sm mb-1\u0026#34;\u0026gt;Email\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;email\u0026#34; id=\u0026#34;email\u0026#34; class=\u0026#34;w-full\u0026#34; placeholder=\u0026#34;Nh·∫≠p email\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;button id=\u0026#34;savestudent\u0026#34; class=\u0026#34;btn-primary w-full\u0026#34;\u0026gt;L∆∞u D·ªØ Li·ªáu Sinh Vi√™n\u0026lt;/button\u0026gt; \u0026lt;p id=\u0026#34;studentSaved\u0026#34; class=\u0026#34;text-center text-green-600 font-medium text-lg\u0026#34;\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;button id=\u0026#34;getstudents\u0026#34; class=\u0026#34;btn-primary btn-secondary w-full\u0026#34;\u0026gt;Xem T·∫•t C·∫£ Sinh Vi√™n\u0026lt;/button\u0026gt; \u0026lt;button id=\u0026#34;backupstudents\u0026#34; class=\u0026#34;btn-primary w-full bg-green-600 text-white p-3 rounded-xl font-semibold hover:bg-green-700\u0026#34;\u0026gt;Backup D·ªØ Li·ªáu\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;showStudents\u0026#34; class=\u0026#34;mt-8 overflow-x-auto\u0026#34;\u0026gt; \u0026lt;table id=\u0026#34;studentTable\u0026#34; class=\u0026#34;w-full\u0026#34;\u0026gt; \u0026lt;thead\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;th class=\u0026#34;text-sm font-semibold\u0026#34;\u0026gt;M√£ Sinh Vi√™n\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-sm font-semibold\u0026#34;\u0026gt;H·ªç T√™n\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-sm font-semibold\u0026#34;\u0026gt;L·ªõp\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-sm font-semibold\u0026#34;\u0026gt;Ng√†y Sinh\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-sm font-semibold\u0026#34;\u0026gt;Email\u0026lt;/th\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/thead\u0026gt; \u0026lt;tbody\u0026gt;\u0026lt;/tbody\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;scripts.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; L∆∞u √Ω: ƒê·∫£m b·∫£o t·ªáp ƒë∆∞·ª£c t·∫£i l√™n bucket S3 tƒ©nh (m·ª•c 2.4) v√† ph√¢n ph·ªëi qua CloudFront (m·ª•c 6). C·∫•u H√¨nh T·ªáp styles.css T·ªáp styles.css t√πy ch·ªânh giao di·ªán v·ªõi Tailwind CSS, font Poppins, v√† hi·ªáu ·ª©ng ƒë·ªông. @import url(\u0026#39;https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700\u0026amp;display=swap\u0026#39;); body { background: linear-gradient(135deg, #4c1d95 0%, #ec4899 100%); font-family: \u0026#39;Poppins\u0026#39;, sans-serif; color: #1f2937; } .form-container { background: rgba(255, 255, 255, 0.97); backdrop-filter: blur(12px); border-radius: 2rem; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); padding: 2.5rem; max-width: 48rem; margin: 2rem auto; } h1 { background: linear-gradient(to right, #7c3aed, #db2777); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 700; letter-spacing: -0.025em; } input { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 0.75rem; padding: 0.75rem 1rem; transition: all 0.3s ease; } input:focus { outline: none; border-color: #7c3aed; box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2); } .btn-primary { background: linear-gradient(90deg, #7c3aed, #db2777); border-radius: 0.75rem; padding: 0.75rem; font-weight: 600; color: white; transition: all 0.3s ease; } .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); background: linear-gradient(90deg, #6d28d9, #be185d); } .btn-secondary { background: linear-gradient(90deg, #6b7280, #4b5563); } .btn-secondary:hover { background: linear-gradient(90deg, #4b5563, #374151); } table { border-radius: 1rem; overflow: hidden; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); } thead { background: linear-gradient(to right, #ede9fe, #fce7f3); } th, td { padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb; } tbody tr { transition: background-color 0.3s ease; } tbody tr:hover { background-color: #f5f3ff; } .card { animation: slideUp 0.5s ease-out; } @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } } label { font-weight: 500; color: #374151; } L∆∞u √Ω: N√©n t·ªáp styles.css tr∆∞·ªõc khi t·∫£i l√™n S3 ƒë·ªÉ tƒÉng t·ªëc ƒë·ªô t·∫£i. C·∫•u H√¨nh T·ªáp scripts.js T·ªáp scripts.js x·ª≠ l√Ω logic g·ªçi API v·ªõi jQuery, bao g·ªìm ki·ªÉm tra d·ªØ li·ªáu, m√£ h√≥a HTML, v√† x·ª≠ l√Ω ph·∫£n h·ªìi/l·ªói. var API_ENDPOINT = \u0026#34;https://710o05k9b6.execute-api.us-east-1.amazonaws.com/prod\u0026#34;; var API_KEY = \u0026#34;hWKpVcoY6246mLB7DdrYb3nWRsYqnLBp35zIxZcd\u0026#34;; // H√†m m√£ h√≥a HTML ƒë·ªÉ ngƒÉn XSS function escapeHTML(str) { return String(str) .replace(/\u0026amp;/g, \u0026#39;\u0026amp;amp;\u0026#39;) .replace(/\u0026lt;/g, \u0026#39;\u0026amp;lt;\u0026#39;) .replace(/\u0026gt;/g, \u0026#39;\u0026amp;gt;\u0026#39;) .replace(/\u0026#34;/g, \u0026#39;\u0026amp;quot;\u0026#39;) .replace(/\u0026#39;/g, \u0026#39;\u0026amp;apos;\u0026#39;); } // X·ª≠ l√Ω l∆∞u d·ªØ li·ªáu sinh vi√™n (POST) document.getElementById(\u0026#34;savestudent\u0026#34;).onclick = function () { var inputData = { studentid: $(\u0026#39;#studentid\u0026#39;).val(), name: $(\u0026#39;#name\u0026#39;).val(), class: $(\u0026#39;#class\u0026#39;).val(), birthdate: $(\u0026#39;#birthdate\u0026#39;).val(), email: $(\u0026#39;#email\u0026#39;).val() }; // Ki·ªÉm tra r·ªóng v√† ƒë·ªãnh d·∫°ng email const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/; if (!inputData.studentid || !inputData.name || !inputData.class || !inputData.birthdate || !inputData.email) { alert(\u0026#34;Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin.\u0026#34;); return; } if (!emailPattern.test(inputData.email)) { alert(\u0026#34;Email kh√¥ng h·ª£p l·ªá.\u0026#34;); return; } console.log(\u0026#34;D·ªØ li·ªáu g·ª≠i POST:\u0026#34;, { body: JSON.stringify(inputData) }); $.ajax({ url: API_ENDPOINT, type: \u0026#39;POST\u0026#39;, data: JSON.stringify({ body: JSON.stringify(inputData) }), contentType: \u0026#39;application/json\u0026#39;, headers: { \u0026#39;x-api-key\u0026#39;: API_KEY }, success: function (response) { console.log(\u0026#34;Ph·∫£n h·ªìi POST:\u0026#34;, response); let message = \u0026#34;D·ªØ li·ªáu sinh vi√™n ƒë√£ ƒë∆∞·ª£c l∆∞u!\u0026#34;; if (response \u0026amp;\u0026amp; response.statusCode === 400) { try { const error = JSON.parse(response.body || \u0026#34;{}\u0026#34;); message = `L·ªói: ${escapeHTML(error.message || \u0026#34;Kh√¥ng x√°c ƒë·ªãnh\u0026#34;)}`; } catch (e) { console.error(\u0026#34;L·ªói ph√¢n t√≠ch body:\u0026#34;, e); message = \u0026#34;L·ªói: Kh√¥ng x√°c ƒë·ªãnh\u0026#34;; } } else if (response \u0026amp;\u0026amp; typeof response.body === \u0026#39;string\u0026#39;) { try { const data = JSON.parse(response.body); if (data \u0026amp;\u0026amp; data.name \u0026amp;\u0026amp; data.studentid) { message = `ƒê√£ l∆∞u sinh vi√™n: ${escapeHTML(data.name)} (${escapeHTML(data.studentid)})`; } else { console.warn(\u0026#34;D·ªØ li·ªáu body kh√¥ng ch·ª©a name ho·∫∑c studentid:\u0026#34;, data); } } catch (e) { console.error(\u0026#34;L·ªói ph√¢n t√≠ch body:\u0026#34;, e); } } else { console.warn(\u0026#34;Ph·∫£n h·ªìi kh√¥ng c√≥ body ho·∫∑c body kh√¥ng ph·∫£i chu·ªói:\u0026#34;, response); } document.getElementById(\u0026#34;studentSaved\u0026#34;).textContent = message; }, error: function (xhr) { let errorMessage = \u0026#34;Kh√¥ng x√°c ƒë·ªãnh\u0026#34;; try { const error = JSON.parse(xhr.responseText || \u0026#34;{}\u0026#34;); errorMessage = error.message || errorMessage; } catch (e) { errorMessage = xhr.responseText || errorMessage; } alert(\u0026#34;L·ªói khi l∆∞u: \u0026#34; + errorMessage); } }); }; // X·ª≠ l√Ω l·∫•y danh s√°ch sinh vi√™n (GET) document.getElementById(\u0026#34;getstudents\u0026#34;).onclick = function () { $.ajax({ url: API_ENDPOINT, type: \u0026#39;GET\u0026#39;, contentType: \u0026#39;application/json\u0026#39;, headers: { \u0026#39;x-api-key\u0026#39;: API_KEY }, success: function (response) { console.log(\u0026#34;Ph·∫£n h·ªìi GET:\u0026#34;, response); // Ghi log ƒë·ªÉ ki·ªÉm tra $(\u0026#39;#studentTable tbody\u0026#39;).empty(); let students = response; // Ki·ªÉm tra n·∫øu response l√† ƒë·ªëi t∆∞·ª£ng ch·ª©a body if (response \u0026amp;\u0026amp; typeof response.body === \u0026#39;string\u0026#39;) { try { students = JSON.parse(response.body); } catch (e) { console.error(\u0026#34;L·ªói ph√¢n t√≠ch body:\u0026#34;, e); alert(\u0026#34;D·ªØ li·ªáu tr·∫£ v·ªÅ kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng JSON.\u0026#34;); return; } } // Ki·ªÉm tra n·∫øu students l√† m·∫£ng if (Array.isArray(students)) { if (students.length === 0) { alert(\u0026#34;Kh√¥ng c√≥ d·ªØ li·ªáu sinh vi√™n.\u0026#34;); } else { jQuery.each(students, function (i, data) { $(\u0026#34;#studentTable tbody\u0026#34;).append( `\u0026lt;tr\u0026gt; \u0026lt;td class=\u0026#39;p-4\u0026#39;\u0026gt;${escapeHTML(data.studentid)}\u0026lt;/td\u0026gt; \u0026lt;td class=\u0026#39;p-4\u0026#39;\u0026gt;${escapeHTML(data.name)}\u0026lt;/td\u0026gt; \u0026lt;td class=\u0026#39;p-4\u0026#39;\u0026gt;${escapeHTML(data.class)}\u0026lt;/td\u0026gt; \u0026lt;td class=\u0026#39;p-4\u0026#39;\u0026gt;${escapeHTML(data.birthdate)}\u0026lt;/td\u0026gt; \u0026lt;td class=\u0026#39;p-4\u0026#39;\u0026gt;${escapeHTML(data.email)}\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt;` ); }); } } else { console.warn(\u0026#34;D·ªØ li·ªáu tr·∫£ v·ªÅ kh√¥ng ph·∫£i m·∫£ng:\u0026#34;, students); alert(\u0026#34;D·ªØ li·ªáu tr·∫£ v·ªÅ kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng.\u0026#34;); } }, error: function (xhr) { let errorMessage = \u0026#34;Kh√¥ng x√°c ƒë·ªãnh\u0026#34;; try { const error = JSON.parse(xhr.responseText || \u0026#34;{}\u0026#34;); errorMessage = error.message || errorMessage; } catch (e) { errorMessage = xhr.responseText || errorMessage; } alert(\u0026#34;L·ªói khi l·∫•y d·ªØ li·ªáu sinh vi√™n: \u0026#34; + errorMessage); } }); }; document.getElementById(\u0026#34;backupstudents\u0026#34;).onclick = function(){ $.ajax({ url: API_ENDPOINT + \u0026#34;/backup\u0026#34;, type: \u0026#39;POST\u0026#39;, data: JSON.stringify({}), contentType: \u0026#39;application/json; charset=utf-8\u0026#39;, headers: { \u0026#39;x-api-key\u0026#39;: API_KEY }, success: function (response) { alert(\u0026#34;Backup d·ªØ li·ªáu th√†nh c√¥ng! Ki·ªÉm tra email ƒë·ªÉ t·∫£i file backup.\u0026#34;); }, error: function () { alert(\u0026#34;L·ªói khi th·ª±c hi·ªán backup d·ªØ li·ªáu.\u0026#34;); } }); }; L∆∞u √Ω: ƒê·∫£m b·∫£o thay API_ENDPOINT v√† API_KEY b·∫±ng gi√° tr·ªã th·ª±c t·ª´ m·ª•c 4.8 v√† 4.2. Thay Th·∫ø API_ENDPOINT v√† API_KEY API_ENDPOINT: Thay https://abc123.execute-api.us-east-1.amazonaws.com/prod b·∫±ng Invoke URL t·ª´ m·ª•c 4.8 (l·∫•y t·ª´ API Gateway \u0026gt; Stages \u0026gt; prod \u0026gt; Invoke URL). API_KEY: Thay xxxxxxxxxxxxxxxxxxxx b·∫±ng gi√° tr·ªã StudentApiKey t·ª´ m·ª•c 4.2. ƒê·ªÉ tƒÉng b·∫£o m·∫≠t, l∆∞u StudentApiKey trong AWS Secrets Manager v√† truy xu·∫•t trong m√¥i tr∆∞·ªùng serverless (v√≠ d·ª•: Lambda ho·∫∑c CloudFront Functions). V√≠ d·ª• truy xu·∫•t API Key t·ª´ AWS Secrets Manager: const AWS = require(\u0026#39;aws-sdk\u0026#39;); const secretsManager = new AWS.SecretsManager({ region: \u0026#39;us-east-1\u0026#39; }); async function getApiKey() { const data = await secretsManager.getSecretValue({ SecretId: \u0026#39;student-api-key\u0026#39; }).promise(); return JSON.parse(data.SecretString).apiKey; } Trong m√¥i tr∆∞·ªùng client-side, l∆∞u API_KEY trong bi·∫øn m√¥i tr∆∞·ªùng (v√≠ d·ª•: .env v·ªõi Vite/React) ho·∫∑c c·∫•u h√¨nh CloudFront ƒë·ªÉ th√™m header x-api-key t·ª± ƒë·ªông. L∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt B·∫£o m·∫≠t API Key Kh√¥ng nh√∫ng API_KEY tr·ª±c ti·∫øp trong scripts.js. S·ª≠ d·ª•ng AWS Secrets Manager ho·∫∑c CloudFront Functions ƒë·ªÉ th√™m header x-api-key t·ª± ƒë·ªông. CORS ƒê·∫£m b·∫£o CORS ƒë∆∞·ª£c k√≠ch ho·∫°t ƒë√∫ng (m·ª•c 4.7) v·ªõi Access-Control-Allow-Origin: https://d12345678.cloudfront.net. N·∫øu g·∫∑p l·ªói CORS, ki·ªÉm tra header trong Method Response v√† Lambda (m·ª•c 3.1, 3.2, 3.3). V√πng AWS ƒê·∫£m b·∫£o v√πng us-east-1 kh·ªõp v·ªõi API student, stage prod, c√°c h√†m Lambda, DynamoDB studentData, S3 student-backup-20250706, SES, v√† CloudFront. T·ªëi ∆∞u h√≥a - N√©n t·ªáp styles.css v√† scripts.js tr∆∞·ªõc khi t·∫£i l√™n S3 ƒë·ªÉ tƒÉng t·ªëc ƒë·ªô t·∫£i. - S·ª≠ d·ª•ng CloudFront cache ƒë·ªÉ l∆∞u tr·ªØ n·ªôi dung tƒ©nh, ƒë·∫∑t TTL h·ª£p l√Ω (VD: 86400 gi√¢y). - Th√™m Request Validator trong API Gateway (m·ª•c 4.5) ƒë·ªÉ ki·ªÉm tra JSON body c·ªßa POST /students. - B·∫≠t CloudWatch Logs cho API Gateway (m·ª•c 4.8): Trong API Gateway \u0026gt; Stages \u0026gt; prod \u0026gt; Logs/Tracing, ch·ªçn Enable CloudWatch Logs. Ki·ªÉm tra l·ªói - N·∫øu giao di·ªán kh√¥ng t·∫£i: Ki·ªÉm tra quy·ªÅn S3 public v√† CloudFront origin. - N·∫øu API tr·∫£ l·ªói 403: Ki·ªÉm tra StudentApiKey v√† StudentUsagePlan (m·ª•c 4.9). - N·∫øu API tr·∫£ l·ªói 429: Ki·ªÉm tra gi·ªõi h·∫°n trong StudentUsagePlan (m·ª•c 4.3). - N·∫øu API tr·∫£ l·ªói 500: Ki·ªÉm tra log CloudWatch c·ªßa Lambda. - N·∫øu b·∫£ng r·ªóng ho·∫∑c d·ªØ li·ªáu kh√¥ng hi·ªÉn th·ªã: Ki·ªÉm tra ph·∫£n h·ªìi t·ª´ GET /students trong Developer Tools \u0026gt; Network. Ki·ªÉm tra t√≠ch h·ª£p v·ªõi API - S·ª≠ d·ª•ng Developer Tools ƒë·ªÉ ki·ªÉm tra y√™u c·∫ßu API. - Ki·ªÉm tra DynamoDB studentData ƒë·ªÉ x√°c minh b·∫£n ghi m·ªõi. - Ki·ªÉm tra S3 student-backup-20250706 ƒë·ªÉ x√°c minh t·ªáp backup. - Ki·ªÉm tra email (bao g·ªìm Spam/Junk) ƒë·ªÉ x√°c minh th√¥ng b√°o t·ª´ SES. M·∫πo th·ª±c ti·ªÖn: Tr∆∞·ªõc khi tri·ªÉn khai l√™n S3, ki·ªÉm tra giao di·ªán c·ª•c b·ªô b·∫±ng npx serve ho·∫∑c server tƒ©nh ƒë·ªÉ ƒë·∫£m b·∫£o c√°c y√™u c·∫ßu API ho·∫°t ƒë·ªông ƒë√∫ng. S·ª≠ d·ª•ng Developer Tools \u0026gt; Network ƒë·ªÉ x√°c minh header x-api-key v√† ph·∫£n h·ªìi t·ª´ API. Ki·ªÉm tra d·ªØ li·ªáu trong DynamoDB, S3, v√† SES sau m·ªói h√†nh ƒë·ªông.\nK·∫øt Lu·∫≠n Giao di·ªán web ƒë√£ ƒë∆∞·ª£c x√¢y d·ª±ng v·ªõi index.html, styles.css, v√† scripts.js, t√≠ch h·ª£p th√†nh c√¥ng v·ªõi API student (stage prod) th√¥ng qua Invoke URL v√† StudentApiKey. ·ª®ng d·ª•ng h·ªó tr·ª£ nh·∫≠p li·ªáu, hi·ªÉn th·ªã danh s√°ch sinh vi√™n, v√† sao l∆∞u d·ªØ li·ªáu, s·∫µn s√†ng tri·ªÉn khai tr√™n S3 v√† ph√¢n ph·ªëi qua CloudFront.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn C·∫•u h√¨nh CloudFront v√† tri·ªÉn khai giao di·ªán web ƒë·ªÉ ho√†n thi·ªán t√≠ch h·ª£p!\n"
},
{
	"uri": "//localhost:1313/vi/6-configuring-s3-buckets/",
	"title": "C·∫•u H√¨nh S3 Bucket ƒë·ªÉ L∆∞u Tr·ªØ v√† Ph·ª•c V·ª• Website",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: C·∫•u h√¨nh hai Amazon S3 Bucket ƒë·ªÉ:\nL∆∞u tr·ªØ v√† ph·ª•c v·ª• giao di·ªán web: T·∫°o bucket student-web-20250706 ƒë·ªÉ l∆∞u tr·ªØ c√°c t·ªáp tƒ©nh (index.html, styles.css, scripts.js t·ª´ m·ª•c 5), b·∫≠t t√≠nh nƒÉng Static Website Hosting, v√† c·∫•u h√¨nh quy·ªÅn truy c·∫≠p c√¥ng khai ƒë·ªÉ ph·ª•c v·ª• giao di·ªán qua CloudFront (m·ª•c 7). Sao l∆∞u d·ªØ li·ªáu: C·∫•u h√¨nh bucket student-backup-20250706 (t·∫°o ·ªü m·ª•c 2.4) ƒë·ªÉ l∆∞u tr·ªØ t·ªáp backup t·ª´ endpoint POST /backup (m·ª•c 4.6), ƒë·∫£m b·∫£o h√†m Lambda BackupDynamoDBAndSendEmail c√≥ quy·ªÅn ghi v√†o bucket.\nC·∫•u h√¨nh n√†y t√≠ch h·ª£p v·ªõi API student (stage prod, m·ª•c 4.8) v√† ƒë·∫£m b·∫£o giao di·ªán web (s·ª≠ d·ª•ng Tailwind CSS) ho·∫°t ƒë·ªông m∆∞·ª£t m√† v·ªõi c√°c endpoint GET /students, POST /students, v√† POST /backup. Y√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh m·ª•c 2.4 (t·∫°o bucket student-backup-20250706), m·ª•c 3.3 (t·∫°o h√†m Lambda BackupDynamoDBAndSendEmail v·ªõi vai tr√≤ DynamoDBBackupRole), m·ª•c 4.1 (t·∫°o API student), m·ª•c 4.2 (t·∫°o API Key StudentApiKey), m·ª•c 4.3 (t·∫°o Usage Plan StudentUsagePlan), m·ª•c 4.4 (t·∫°o ph∆∞∆°ng th·ª©c GET /students), m·ª•c 4.5 (t·∫°o ph∆∞∆°ng th·ª©c POST /students), m·ª•c 4.6 (t·∫°o resource /backup v√† ph∆∞∆°ng th·ª©c POST /backup), m·ª•c 4.7 (k√≠ch ho·∫°t CORS), m·ª•c 4.8 (tri·ªÉn khai API l√™n stage prod), m·ª•c 4.9 (g·∫Øn StudentApiKey v√†o StudentUsagePlan v√† li√™n k·∫øt v·ªõi API student stage prod), v√† m·ª•c 5 (x√¢y d·ª±ng giao di·ªán web v·ªõi index.html, styles.css, scripts.js). ƒê·∫£m b·∫£o t√†i kho·∫£n AWS c√≥ quy·ªÅn truy c·∫≠p S3, Lambda, API Gateway, v√† v√πng AWS l√† us-east-1.\nC√°c B∆∞·ªõc C·∫•u H√¨nh D∆∞·ªõi ƒë√¢y l√† c√°c b∆∞·ªõc c·ª• th·ªÉ ƒë·ªÉ c·∫•u h√¨nh S3 Bucket:\nB∆∞·ªõc N·ªôi Dung M√¥ T·∫£ 6.1 Kh·ªüi t·∫°o S3 Bucket m·ªõi T·∫°o bucket student-web-20250706 ƒë·ªÉ l∆∞u tr·ªØ c√°c t·ªáp tƒ©nh (index.html, styles.css, scripts.js). 6.2 T·∫£i t√†i nguy√™n giao di·ªán l√™n S3 (HTML/CSS/JS) T·∫£i c√°c t·ªáp tƒ©nh t·ª´ m·ª•c 5 l√™n bucket student-web-20250706. 6.3 B·∫≠t t√≠nh nƒÉng Static Website Hosting K√≠ch ho·∫°t Static Website Hosting trong bucket student-web-20250706 ƒë·ªÉ ph·ª•c v·ª• giao di·ªán web. 6.4 C·∫•u h√¨nh Bucket Policy ƒë·ªÉ cho ph√©p truy c·∫≠p c√¥ng khai C·∫≠p nh·∫≠t Bucket Policy c·ªßa student-web-20250706 ƒë·ªÉ cho ph√©p CloudFront truy xu·∫•t n·ªôi dung (s3:GetObject). 6.5 C·∫≠p nh·∫≠t Bucket Policy ƒë·ªÉ h·ªó tr·ª£ sao l∆∞u d·ªØ li·ªáu (Backup) C·∫≠p nh·∫≠t Bucket Policy c·ªßa student-backup-20250706 ƒë·ªÉ cho ph√©p h√†m Lambda BackupDynamoDBAndSendEmail ghi t·ªáp (s3:PutObject). L∆∞u √Ω: Th·ª±c hi·ªán c√°c b∆∞·ªõc theo th·ª© t·ª± ƒë·ªÉ ƒë·∫£m b·∫£o c·∫•u h√¨nh S3 Bucket ch√≠nh x√°c. M·ªói b∆∞·ªõc s·∫Ω ƒë∆∞·ª£c h∆∞·ªõng d·∫´n chi ti·∫øt trong c√°c t√†i li·ªáu t∆∞∆°ng ·ª©ng.\nK·∫øt Lu·∫≠n Ho√†n th√†nh c√°c b∆∞·ªõc c·∫•u h√¨nh n√†y, b·∫°n s·∫Ω c√≥:\nBucket student-web-20250706 l∆∞u tr·ªØ v√† ph·ª•c v·ª• giao di·ªán web tƒ©nh, s·∫µn s√†ng t√≠ch h·ª£p v·ªõi CloudFront. Bucket student-backup-20250706 h·ªó tr·ª£ l∆∞u tr·ªØ t·ªáp backup t·ª´ endpoint POST /backup, t√≠ch h·ª£p v·ªõi h√†m Lambda BackupDynamoDBAndSendEmail. H·ªá th·ªëng t√≠ch h·ª£p ƒë·∫ßy ƒë·ªß v·ªõi API student (stage prod) v√† giao di·ªán web s·ª≠ d·ª•ng Tailwind CSS. S·∫µn s√†ng ti·∫øp t·ª•c?\nChuy·ªÉn ƒë·∫øn Kh·ªüi t·∫°o S3 Bucket m·ªõi ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh bucket student-web-20250706!\n"
},
{
	"uri": "//localhost:1313/vi/4-creating-a-restful-api/4.6-creating-a-backup-resource-and-method/",
	"title": "T·∫°o Resource v√† Method cho Backup d·ªØ li·ªáu",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: T·∫°o resource /backup v√† ph∆∞∆°ng th·ª©c POST trong API student (t·∫°o ·ªü m·ª•c 4.1) ƒë·ªÉ t√≠ch h·ª£p v·ªõi h√†m Lambda BackupDynamoDBAndSendEmail (t·∫°o ·ªü m·ª•c 3.3), cho ph√©p sao l∆∞u to√†n b·ªô d·ªØ li·ªáu t·ª´ b·∫£ng DynamoDB studentData v√†o bucket S3 student-backup-20250706 v√† g·ª≠i email th√¥ng b√°o qua SES. Ph∆∞∆°ng th·ª©c s·∫Ω y√™u c·∫ßu API Key (StudentApiKey, t·∫°o ·ªü m·ª•c 4.2) trong header x-api-key ƒë·ªÉ b·∫£o m·∫≠t, v√† chu·∫©n b·ªã cho vi·ªác k√≠ch ho·∫°t CORS (m·ª•c 4.7) ƒë·ªÉ giao di·ªán web (ch·∫°y tr√™n CloudFront) c√≥ th·ªÉ g·ª≠i y√™u c·∫ßu.\nT·ªïng Quan v·ªÅ Resource v√† Ph∆∞∆°ng Th·ª©c POST Resource /backup v√† ph∆∞∆°ng th·ª©c POST /backup s·∫Ω g·ªçi h√†m Lambda BackupDynamoDBAndSendEmail ƒë·ªÉ: Sao l∆∞u t·∫•t c·∫£ b·∫£n ghi t·ª´ b·∫£ng DynamoDB studentData (c√°c tr∆∞·ªùng: studentid, name, class, birthdate, email) v√†o t·ªáp JSON trong bucket S3 student-backup-20250706. G·ª≠i email th√¥ng b√°o qua SES ƒë·∫øn m·ªôt ƒë·ªãa ch·ªâ ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh (v√≠ d·ª•: admin ho·∫∑c ng∆∞·ªùi d√πng). H√†m BackupDynamoDBAndSendEmail tr·∫£ v·ªÅ ph·∫£n h·ªìi JSON v·ªõi header Access-Control-Allow-Origin: '*' ƒë·ªÉ h·ªó tr·ª£ CORS, ph√π h·ª£p v·ªõi giao di·ªán web. API Key Required ƒë·∫£m b·∫£o ch·ªâ c√°c y√™u c·∫ßu c√≥ StudentApiKey h·ª£p l·ªá m·ªõi ƒë∆∞·ª£c x·ª≠ l√Ω. Sau khi t·∫°o, API c·∫ßn ƒë∆∞·ª£c tri·ªÉn khai (m·ª•c 4.8) ƒë·ªÉ ph∆∞∆°ng th·ª©c POST c√≥ hi·ªáu l·ª±c. Y√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh m·ª•c 4.1 (t·∫°o API student), m·ª•c 4.2 (t·∫°o API Key StudentApiKey), m·ª•c 4.3 (t·∫°o Usage Plan StudentUsagePlan), m·ª•c 4.4 (t·∫°o ph∆∞∆°ng th·ª©c GET /students), m·ª•c 4.5 (t·∫°o ph∆∞∆°ng th·ª©c POST /students), v√† m·ª•c 3 (t·∫°o c√°c h√†m Lambda getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, SES email x√°c minh). ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1.\nH√†nh ƒê·ªông Chi Ti·∫øt Truy C·∫≠p AWS Management Console\nM·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS c·ªßa b·∫°n.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p API Gateway v√† ch·ªçn d·ªãch v·ª• Amazon API Gateway ƒë·ªÉ v√†o giao di·ªán qu·∫£n l√Ω.\nKi·ªÉm tra v√πng AWS: ƒê·∫£m b·∫£o b·∫°n ƒëang l√†m vi·ªác trong v√πng AWS ch√≠nh (gi·∫£ ƒë·ªãnh us-east-1 ƒë·ªÉ ƒë·ªìng b·ªô v·ªõi c√°c m·ª•c tr∆∞·ªõc), ki·ªÉm tra v√πng ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. V√πng n√†y ph·∫£i kh·ªõp v·ªõi API student, h√†m Lambda BackupDynamoDBAndSendEmail, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, v√† SES.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm API Gateway.\nƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c APIs\nTrong giao di·ªán ch√≠nh c·ªßa Amazon API Gateway, nh√¨n v√†o menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn APIs ƒë·ªÉ xem danh s√°ch c√°c API hi·ªán c√≥.\nDanh s√°ch s·∫Ω hi·ªÉn th·ªã API student (t·∫°o ·ªü m·ª•c 4.1). N·∫øu kh√¥ng th·∫•y, ki·ªÉm tra l·∫°i v√πng AWS ho·∫∑c l√†m m·ªõi trang.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn APIs.\nCh·ªçn API student\nTrong danh s√°ch APIs, t√¨m v√† ch·ªçn API c√≥ t√™n student.\nB·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang qu·∫£n l√Ω API student, hi·ªÉn th·ªã c√°c m·ª•c nh∆∞ Resources, Stages, API Keys, v.v.\nCh·ªçn Resources t·ª´ menu b√™n tr√°i ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh resource v√† method.\nH√¨nh 3: Trang qu·∫£n l√Ω API student v·ªõi t√πy ch·ªçn Resources.\nT·∫°o Resource /backup\nTrong giao di·ªán Resources, b·∫°n s·∫Ω th·∫•y c√¢y t√†i nguy√™n v·ªõi g·ªëc l√† / v√† resource /students (t·∫°o ·ªü m·ª•c 4.4).\nNh·∫•n Actions \u0026gt; Create Resource ƒë·ªÉ t·∫°o resource m·ªõi.\nC·∫•u h√¨nh resource:\nResource Name: Nh·∫≠p backup. Resource Path: Nh·∫≠p /backup (ho·∫∑c ƒë·ªÉ m·∫∑c ƒë·ªãnh, s·∫Ω t·ª± ƒë·ªông l√† /backup). Enable API Gateway CORS: Ch·ªçn ƒë·ªÉ chu·∫©n b·ªã cho vi·ªác k√≠ch ho·∫°t CORS (m·ª•c 4.7). Nh·∫•n Create Resource ƒë·ªÉ t·∫°o.\nKi·ªÉm tra: Resource /backup s·∫Ω xu·∫•t hi·ªán d∆∞·ªõi g·ªëc / trong c√¢y t√†i nguy√™n.\nH√¨nh 4: Nh·∫•n n√∫t Create.\nH√¨nh 5: Giao di·ªán c·∫•u h√¨nh resource /backup.\nT·∫°o Ph∆∞∆°ng Th·ª©c POST\nTrong c√¢y t√†i nguy√™n, ch·ªçn resource /backup.\nNh·∫•n Actions \u0026gt; Create Method.\nTrong dropdown d∆∞·ªõi /backup, ch·ªçn POST v√† nh·∫•n bi·ªÉu t∆∞·ª£ng check (‚úî) ƒë·ªÉ x√°c nh·∫≠n.\nL∆∞u √Ω: N·∫øu dropdown kh√¥ng hi·ªÉn th·ªã POST, ƒë·∫£m b·∫£o b·∫°n ƒë√£ ch·ªçn ƒë√∫ng resource /backup.\nH√¨nh 6: Giao di·ªán t·∫°o ph∆∞∆°ng th·ª©c POST. C·∫•u H√¨nh T√≠ch H·ª£p Lambda\nTrong giao di·ªán c·∫•u h√¨nh ph∆∞∆°ng th·ª©c POST:\nIntegration Type: Ch·ªçn Lambda Function ƒë·ªÉ t√≠ch h·ª£p v·ªõi h√†m Lambda. Use Lambda Proxy integration: Ch·ªçn (ƒë·ªÉ g·ª≠i to√†n b·ªô y√™u c·∫ßu HTTP, bao g·ªìm headers v√† body, ƒë·∫øn h√†m Lambda v√† nh·∫≠n ph·∫£n h·ªìi JSON v·ªõi headers). Lambda Region: Ch·ªçn us-east-1 (ho·∫∑c v√πng AWS c·ªßa b·∫°n, ph·∫£i kh·ªõp v·ªõi v√πng c·ªßa h√†m BackupDynamoDBAndSendEmail). Lambda Function: Nh·∫≠p BackupDynamoDBAndSendEmail. L∆∞u √Ω: N·∫øu h√†m BackupDynamoDBAndSendEmail kh√¥ng xu·∫•t hi·ªán trong danh s√°ch g·ª£i √Ω, nh·∫≠p th·ªß c√¥ng v√† ƒë·∫£m b·∫£o h√†m t·ªìn t·∫°i trong Lambda (m·ª•c 3.3). Nh·∫•n Save ƒë·ªÉ l∆∞u c·∫•u h√¨nh. N·∫øu AWS y√™u c·∫ßu c·∫•p quy·ªÅn, nh·∫•n OK ƒë·ªÉ cho ph√©p API Gateway g·ªçi h√†m Lambda BackupDynamoDBAndSendEmail. AWS s·∫Ω t·ª± ƒë·ªông th√™m ch√≠nh s√°ch IAM v√†o vai tr√≤ c·ªßa h√†m Lambda (th∆∞·ªùng l√† DynamoDBBackupRole t·ª´ m·ª•c 3.3) v·ªõi quy·ªÅn lambda:InvokeFunction.\nH√¨nh 7: Giao di·ªán c·∫•u h√¨nh t√≠ch h·ª£p Lambda. H√¨nh 8: Nh·∫•n n√∫t Save sau khi c·∫•u h√¨nh. B·∫≠t API Key Required\nTrong giao di·ªán Method Request c·ªßa POST /backup:\nNh·∫•n Edit b√™n c·∫°nh Authorization. Ch·ªçn NONE (API Key s·∫Ω x·ª≠ l√Ω x√°c th·ª±c, kh√¥ng c·∫ßn Cognito ho·∫∑c IAM Authorizer). Trong API Key Required, ch·ªçn true ƒë·ªÉ y√™u c·∫ßu API Key trong header x-api-key. Gi·∫£i th√≠ch: ƒêi·ªÅu n√†y ƒë·∫£m b·∫£o m·ªçi y√™u c·∫ßu g·ª≠i ƒë·∫øn POST /backup ph·∫£i ch·ª©a StudentApiKey (t·∫°o ·ªü m·ª•c 4.2) trong header x-api-key. Nh·∫•n Save ho·∫∑c bi·ªÉu t∆∞·ª£ng check (‚úî) ƒë·ªÉ l∆∞u c·∫•u h√¨nh. H√¨nh 9: Giao di·ªán b·∫≠t API Key Required. Ki·ªÉm Tra Tr·∫°ng Th√°i T·∫°o Ph∆∞∆°ng Th·ª©c\nSau khi c·∫•u h√¨nh v√† nh·∫•n Save, b·∫°n s·∫Ω th·∫•y th√¥ng b√°o: \u0026ldquo;Successfully created method ‚ÄòPOST‚Äô. Redeploy your API for the update to take effect.\u0026rdquo;\nL∆∞u √Ω quan tr·ªçng: Ph∆∞∆°ng th·ª©c POST s·∫Ω kh√¥ng ho·∫°t ƒë·ªông cho ƒë·∫øn khi b·∫°n tri·ªÉn khai API v√†o m·ªôt stage (m·ª•c 4.8).\nƒê·ªÉ ki·ªÉm tra c·∫•u h√¨nh:\nTrong Resources, ch·ªçn POST d∆∞·ªõi /backup. X√°c minh: Integration Request: Hi·ªÉn th·ªã Lambda Function: BackupDynamoDBAndSendEmail. Method Request: API Key Required: true. N·∫øu g·∫∑p l·ªói: \u0026ldquo;Lambda function not found\u0026rdquo;: Ki·ªÉm tra h√†m BackupDynamoDBAndSendEmail t·ªìn t·∫°i trong Lambda \u0026gt; Functions v√† v√πng AWS kh·ªõp (us-east-1). \u0026ldquo;AccessDenied\u0026rdquo;: Ki·ªÉm tra vai tr√≤ IAM c·ªßa t√†i kho·∫£n AWS c√≥ quy·ªÅn apigateway:PUT ƒë·ªÉ t·∫°o method. \u0026ldquo;Permission denied\u0026rdquo;: ƒê·∫£m b·∫£o API Gateway c√≥ quy·ªÅn g·ªçi BackupDynamoDBAndSendEmail (AWS t·ª± ƒë·ªông th√™m quy·ªÅn khi b·∫°n nh·∫•n OK). H√¨nh 10: Th√¥ng b√°o th√†nh c√¥ng sau khi t·∫°o ph∆∞∆°ng th·ª©c POST. L∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt T√≠ch h·ª£p Lambda Proxy Lambda Proxy integration cho ph√©p g·ª≠i to√†n b·ªô y√™u c·∫ßu HTTP (headers, body) ƒë·∫øn h√†m BackupDynamoDBAndSendEmail v√† nh·∫≠n ph·∫£n h·ªìi JSON v·ªõi headers (nh∆∞ Access-Control-Allow-Origin: '*'). ƒê·∫£m b·∫£o m√£ c·ªßa BackupDynamoDBAndSendEmail (m·ª•c 3.3) x·ª≠ l√Ω sao l∆∞u v√† g·ª≠i email ƒë√∫ng c√°ch. B·∫£o m·∫≠t API Key V·ªõi API Key Required: true, y√™u c·∫ßu g·ª≠i ƒë·∫øn POST /backup ph·∫£i ch·ª©a header x-api-key: \u0026lt;StudentApiKey\u0026gt;. ƒê·ªÉ tƒÉng c∆∞·ªùng b·∫£o m·∫≠t, l∆∞u API Key trong AWS Secrets Manager (xem m·ª•c 4.2). CORS Ph∆∞∆°ng th·ª©c POST c·∫ßn h·ªó tr·ª£ CORS ƒë·ªÉ giao di·ªán web c√≥ th·ªÉ g·ª≠i y√™u c·∫ßu cross-origin. ƒêi·ªÅu n√†y s·∫Ω ƒë∆∞·ª£c c·∫•u h√¨nh chi ti·∫øt ·ªü m·ª•c 4.7 (k√≠ch ho·∫°t CORS v·ªõi ph∆∞∆°ng th·ª©c OPTIONS). ƒê·∫£m b·∫£o h√†m BackupDynamoDBAndSendEmail tr·∫£ v·ªÅ header Access-Control-Allow-Origin: '*' (ho·∫∑c domain CloudFront c·ª• th·ªÉ, v√≠ d·ª•: https://d12345678.cloudfront.net). V√πng AWS ƒê·∫£m b·∫£o v√πng us-east-1 kh·ªõp v·ªõi h√†m BackupDynamoDBAndSendEmail, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, SES, v√† API student. N·∫øu s·ª≠ d·ª•ng v√πng kh√°c (v√≠ d·ª•: us-west-2), ch·ªçn ƒë√∫ng v√πng trong Lambda Region. X·ª≠ l√Ω l·ªói - N·∫øu g·∫∑p l·ªói \u0026ldquo;Lambda function not found\u0026rdquo;: - Ki·ªÉm tra h√†m BackupDynamoDBAndSendEmail t·ªìn t·∫°i trong Lambda \u0026gt; Functions. - ƒê·∫£m b·∫£o v√πng AWS kh·ªõp (us-east-1). - N·∫øu g·∫∑p l·ªói 403 \u0026quot;Forbidden\u0026quot; khi g·ªçi API (sau khi deploy): - Ki·ªÉm tra API Key Required: true v√† API Key StudentApiKey h·ª£p l·ªá. - ƒê·∫£m b·∫£o API Key ƒë∆∞·ª£c li√™n k·∫øt v·ªõi Usage Plan (m·ª•c 4.3, 4.9). - N·∫øu g·∫∑p l·ªói 500 t·ª´ Lambda, ki·ªÉm tra log trong CloudWatch (log group /aws/lambda/BackupDynamoDBAndSendEmail) ƒë·ªÉ g·ª° l·ªói: - NoSuchBucket: Ki·ªÉm tra bucket S3 student-backup-20250706 t·ªìn t·∫°i. - AccessDenied: Ki·ªÉm tra vai tr√≤ DynamoDBBackupRole c√≥ quy·ªÅn s3:PutObject, dynamodb:Scan, v√† ses:SendEmail. - Email address not verified: Ki·ªÉm tra email ngu·ªìn (no-reply@system.edu.vn) v√† email nh·∫≠n (admin@system.edu.vn) ƒë√£ ƒë∆∞·ª£c x√°c minh trong SES (m·ª•c 2.5). T·ªëi ∆∞u h√≥a - Th√™m header Access-Control-Allow-Origin trong Method Response ƒë·ªÉ ƒë·∫£m b·∫£o CORS ho·∫°t ƒë·ªông ƒë√∫ng: - Trong Method Response c·ªßa POST /backup, th√™m Status Code 200, 500 v·ªõi header Access-Control-Allow-Origin: '*'. - Trong Integration Response, √°nh x·∫° ph·∫£n h·ªìi t·ª´ Lambda ƒë·ªÉ x·ª≠ l√Ω c√°c m√£ tr·∫°ng th√°i. - C√¢n nh·∫Øc s·ª≠ d·ª•ng AWS WAF v·ªõi API Gateway ƒë·ªÉ b·∫£o v·ªá kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng DDoS ho·∫∑c l·∫°m d·ª•ng API Key. - N·∫øu b·∫£ng studentData l·ªõn, ƒë·∫£m b·∫£o h√†m BackupDynamoDBAndSendEmail x·ª≠ l√Ω ph√¢n trang cho Scan (v√≠ d·ª•: s·ª≠ d·ª•ng LastEvaluatedKey) ƒë·ªÉ tr√°nh v∆∞·ª£t gi·ªõi h·∫°n. Ki·ªÉm tra s·ªõm - Sau khi t·∫°o ph∆∞∆°ng th·ª©c POST, x√°c minh c·∫•u h√¨nh trong Resources \u0026gt; POST /backup (Integration Request, Method Request). - Sau khi deploy API (m·ª•c 4.8), ki·ªÉm tra ph∆∞∆°ng th·ª©c POST b·∫±ng Postman ho·∫∑c curl. - Ki·ªÉm tra bucket S3 student-backup-20250706 (v√†o S3 \u0026gt; Buckets \u0026gt; student-backup-20250706 \u0026gt; Objects) ƒë·ªÉ x√°c minh t·ªáp backup (v√≠ d·ª•: backup-20250707-124500.json). - Ki·ªÉm tra h·ªôp th∆∞ (bao g·ªìm Spam/Junk) c·ªßa email nh·∫≠n (v√≠ d·ª•: admin@system.edu.vn) ƒë·ªÉ x√°c minh email th√¥ng b√°o t·ª´ SES. - N·∫øu nh·∫≠n l·ªói 403 \u0026quot;Forbidden\u0026quot;, ki·ªÉm tra API Key v√† c·∫•u h√¨nh API Key Required. - N·∫øu nh·∫≠n l·ªói 500, ki·ªÉm tra log CloudWatch c·ªßa h√†m BackupDynamoDBAndSendEmail. Ki·ªÉm tra t√≠ch h·ª£p v·ªõi giao di·ªán web Sau khi deploy API (m·ª•c 4.8) v√† li√™n k·∫øt Usage Plan (m·ª•c 4.9), s·ª≠ d·ª•ng API Key trong giao di·ªán web (s·ª≠ d·ª•ng Tailwind CSS, ch·∫°y tr√™n CloudFront) ƒë·ªÉ g·ªçi endpoint POST /backup. M·∫πo th·ª±c ti·ªÖn: X√°c minh c·∫•u h√¨nh Integration Request v√† API Key Required tr∆∞·ªõc khi tri·ªÉn khai API. Ki·ªÉm tra t·ªáp backup trong bucket S3 student-backup-20250706 v√† email th√¥ng b√°o t·ª´ SES b·∫±ng Postman ƒë·ªÉ ƒë·∫£m b·∫£o h√†m BackupDynamoDBAndSendEmail ho·∫°t ƒë·ªông ƒë√∫ng.\nK·∫øt Lu·∫≠n Resource /backup v√† ph∆∞∆°ng th·ª©c POST /backup ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng trong API student, t√≠ch h·ª£p v·ªõi h√†m Lambda BackupDynamoDBAndSendEmail v√† y√™u c·∫ßu API Key StudentApiKey, s·∫µn s√†ng ƒë·ªÉ tri·ªÉn khai v√† s·ª≠ d·ª•ng trong giao di·ªán web.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn K√≠ch ho·∫°t CORS ƒë·ªÉ h·ªó tr·ª£ giao di·ªán web ƒë·ªÉ ti·∫øp t·ª•c!\n"
},
{
	"uri": "//localhost:1313/vi/4-creating-a-restful-api/4.7-enabling-cors/",
	"title": "K√≠ch ho·∫°t CORS ƒë·ªÉ h·ªó tr·ª£ frontend truy c·∫≠p",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: K√≠ch ho·∫°t CORS (Cross-Origin Resource Sharing) tr√™n API student (t·∫°o ·ªü m·ª•c 4.1) ƒë·ªÉ cho ph√©p giao di·ªán web (ch·∫°y tr√™n CloudFront, s·ª≠ d·ª•ng Tailwind CSS) g·ª≠i y√™u c·∫ßu ƒë·∫øn c√°c endpoint GET /students, POST /students, v√† POST /backup. CORS s·∫Ω ƒë∆∞·ª£c c·∫•u h√¨nh tr√™n c√°c resource /students v√† /backup b·∫±ng c√°ch th√™m ph∆∞∆°ng th·ª©c OPTIONS v√† thi·∫øt l·∫≠p c√°c header c·∫ßn thi·∫øt (Access-Control-Allow-Methods, Access-Control-Allow-Headers, Access-Control-Allow-Origin), ƒë·∫£m b·∫£o t√≠ch h·ª£p m∆∞·ª£t m√† v√† an to√†n v·ªõi frontend.\nT·ªïng Quan v·ªÅ CORS trong API Gateway CORS l√† c∆° ch·∫ø b·∫£o m·∫≠t c·ªßa tr√¨nh duy·ªát, y√™u c·∫ßu server (API Gateway) cho ph√©p c√°c y√™u c·∫ßu cross-origin t·ª´ domain kh√°c (v√≠ d·ª•: https://d12345678.cloudfront.net) so v·ªõi domain c·ªßa API (v√≠ d·ª•: https://api-id.execute-api.us-east-1.amazonaws.com). Trong h·ªá th·ªëng n√†y, CORS c·∫ßn ƒë∆∞·ª£c k√≠ch ho·∫°t cho c√°c resource /students (GET, POST) v√† /backup (POST) ƒë·ªÉ giao di·ªán web c√≥ th·ªÉ: G·ª≠i y√™u c·∫ßu GET /students ƒë·ªÉ l·∫•y danh s√°ch sinh vi√™n (h√†m getStudentData, m·ª•c 4.4). G·ª≠i y√™u c·∫ßu POST /students ƒë·ªÉ l∆∞u th√¥ng tin sinh vi√™n (h√†m insertStudentData, m·ª•c 4.5). G·ª≠i y√™u c·∫ßu POST /backup ƒë·ªÉ sao l∆∞u d·ªØ li·ªáu (h√†m BackupDynamoDBAndSendEmail, m·ª•c 4.6). K√≠ch ho·∫°t CORS y√™u c·∫ßu: Th√™m ph∆∞∆°ng th·ª©c OPTIONS cho m·ªói resource ƒë·ªÉ x·ª≠ l√Ω y√™u c·∫ßu preflight t·ª´ tr√¨nh duy·ªát. Thi·∫øt l·∫≠p c√°c header CORS (Access-Control-Allow-Origin, Access-Control-Allow-Methods, Access-Control-Allow-Headers) trong ph·∫£n h·ªìi c·ªßa OPTIONS, GET, v√† POST. ƒê·∫£m b·∫£o c√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail) tr·∫£ v·ªÅ header Access-Control-Allow-Origin: '*'. Sau khi k√≠ch ho·∫°t CORS, API c·∫ßn ƒë∆∞·ª£c tri·ªÉn khai (m·ª•c 4.8) ƒë·ªÉ c√°c thay ƒë·ªïi c√≥ hi·ªáu l·ª±c. Y√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh m·ª•c 4.1 (t·∫°o API student), m·ª•c 4.2 (t·∫°o API Key StudentApiKey), m·ª•c 4.3 (t·∫°o Usage Plan StudentUsagePlan), m·ª•c 4.4 (t·∫°o ph∆∞∆°ng th·ª©c GET /students), m·ª•c 4.5 (t·∫°o ph∆∞∆°ng th·ª©c POST /students), m·ª•c 4.6 (t·∫°o resource /backup v√† ph∆∞∆°ng th·ª©c POST /backup), v√† m·ª•c 3 (t·∫°o c√°c h√†m Lambda getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, SES email x√°c minh). ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1.\nH√†nh ƒê·ªông Chi Ti·∫øt Truy C·∫≠p AWS Management Console\nM·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS c·ªßa b·∫°n.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p API Gateway v√† ch·ªçn d·ªãch v·ª• Amazon API Gateway ƒë·ªÉ v√†o giao di·ªán qu·∫£n l√Ω.\nKi·ªÉm tra v√πng AWS: ƒê·∫£m b·∫£o b·∫°n ƒëang l√†m vi·ªác trong v√πng AWS ch√≠nh (gi·∫£ ƒë·ªãnh us-east-1 ƒë·ªÉ ƒë·ªìng b·ªô v·ªõi c√°c m·ª•c tr∆∞·ªõc), ki·ªÉm tra v√πng ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. V√πng n√†y ph·∫£i kh·ªõp v·ªõi API student, c√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail), b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, v√† SES.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm API Gateway.\nƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c APIs\nTrong giao di·ªán ch√≠nh c·ªßa Amazon API Gateway, nh√¨n v√†o menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn APIs ƒë·ªÉ xem danh s√°ch c√°c API hi·ªán c√≥.\nDanh s√°ch s·∫Ω hi·ªÉn th·ªã API student (t·∫°o ·ªü m·ª•c 4.1). N·∫øu kh√¥ng th·∫•y, ki·ªÉm tra l·∫°i v√πng AWS ho·∫∑c l√†m m·ªõi trang.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn APIs.\nCh·ªçn API student\nTrong danh s√°ch APIs, t√¨m v√† ch·ªçn API c√≥ t√™n student.\nB·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang qu·∫£n l√Ω API student, hi·ªÉn th·ªã c√°c m·ª•c nh∆∞ Resources, Stages, API Keys, v.v.\nCh·ªçn Resources t·ª´ menu b√™n tr√°i ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh CORS.\nH√¨nh 3: Trang qu·∫£n l√Ω API student v·ªõi t√πy ch·ªçn Resources.\nK√≠ch Ho·∫°t CORS cho Resource /students\nTrong giao di·ªán Resources, b·∫°n s·∫Ω th·∫•y c√¢y t√†i nguy√™n v·ªõi g·ªëc l√† / v√† resource /students (t·∫°o ·ªü m·ª•c 4.4).\nCh·ªçn resource /students.\nNh·∫•n Actions \u0026gt; Enable CORS.\nTrong giao di·ªán Enable CORS:\nAccess-Control-Allow-Methods: Ch·ªçn GET, POST, v√† OPTIONS. Gi·∫£i th√≠ch: GET v√† POST t∆∞∆°ng ·ª©ng v·ªõi c√°c ph∆∞∆°ng th·ª©c ƒë√£ t·∫°o (m·ª•c 4.4, 4.5). OPTIONS l√† ph∆∞∆°ng th·ª©c preflight m√† tr√¨nh duy·ªát g·ª≠i ƒë·ªÉ ki·ªÉm tra CORS tr∆∞·ªõc khi g·ª≠i y√™u c·∫ßu th·ª±c t·∫ø (GET ho·∫∑c POST). Access-Control-Allow-Headers: Gi·ªØ m·∫∑c ƒë·ªãnh ho·∫∑c ƒë·∫£m b·∫£o bao g·ªìm Content-Type, x-api-key (do c√°c ph∆∞∆°ng th·ª©c y√™u c·∫ßu API Key trong header x-api-key, m·ª•c 4.4, 4.5). V√≠ d·ª•: Content-Type,x-api-key,Authorization. Access-Control-Allow-Origin: Nh·∫≠p '*' (cho ph√©p m·ªçi domain) ho·∫∑c domain CloudFront c·ª• th·ªÉ (v√≠ d·ª•: https://d12345678.cloudfront.net) ƒë·ªÉ tƒÉng c∆∞·ªùng b·∫£o m·∫≠t. Access-Control-Max-Age: Gi·ªØ m·∫∑c ƒë·ªãnh (600 gi√¢y) ƒë·ªÉ tr√¨nh duy·ªát l∆∞u cache ph·∫£n h·ªìi preflight. Nh·∫•n Enable CORS and replace existing CORS headers ƒë·ªÉ √°p d·ª•ng.\nAWS s·∫Ω t·ª± ƒë·ªông:\nT·∫°o ph∆∞∆°ng th·ª©c OPTIONS cho resource /students. C·∫•u h√¨nh Mock Integration cho OPTIONS v·ªõi ph·∫£n h·ªìi ch·ª©a c√°c header CORS c·∫ßn thi·∫øt. C·∫≠p nh·∫≠t Method Response c·ªßa GET v√† POST ƒë·ªÉ bao g·ªìm header Access-Control-Allow-Origin. Nh·∫•n Save ƒë·ªÉ l∆∞u c·∫•u h√¨nh.\nH√¨nh 4: Giao di·ªán k√≠ch ho·∫°t CORS cho resource /students.\nK√≠ch Ho·∫°t CORS cho Resource /backup\nTrong giao di·ªán Resources, ch·ªçn resource /backup (t·∫°o ·ªü m·ª•c 4.6).\nNh·∫•n Actions \u0026gt; Enable CORS.\nTrong giao di·ªán Enable CORS:\nAccess-Control-Allow-Methods: Ch·ªçn POST, OPTIONS. Gi·∫£i th√≠ch: POST t∆∞∆°ng ·ª©ng v·ªõi ph∆∞∆°ng th·ª©c ƒë√£ t·∫°o (m·ª•c 4.6). OPTIONS x·ª≠ l√Ω y√™u c·∫ßu preflight cho /backup. Access-Control-Allow-Headers: ƒê·∫£m b·∫£o bao g·ªìm Content-Type, x-api-key. Access-Control-Allow-Origin: Nh·∫≠p '*' ho·∫∑c domain CloudFront c·ª• th·ªÉ (v√≠ d·ª•: https://d12345678.cloudfront.net). Access-Control-Max-Age: Gi·ªØ m·∫∑c ƒë·ªãnh (600 gi√¢y). Nh·∫•n Enable CORS and replace existing CORS headers ƒë·ªÉ √°p d·ª•ng.\nAWS s·∫Ω t·ª± ƒë·ªông t·∫°o ph∆∞∆°ng th·ª©c OPTIONS cho /backup v√† c·∫≠p nh·∫≠t Method Response c·ªßa POST.\nNh·∫•n Save ƒë·ªÉ l∆∞u c·∫•u h√¨nh.\nH√¨nh 5: Giao di·ªán k√≠ch ho·∫°t CORS cho resource /backup.\nKi·ªÉm Tra Tr·∫°ng Th√°i K√≠ch Ho·∫°t CORS\nSau khi k√≠ch ho·∫°t CORS, b·∫°n s·∫Ω th·∫•y th√¥ng b√°o: \u0026ldquo;Successfully enabled CORS\u0026rdquo; cho t·ª´ng resource (/students, /backup).\nƒê·ªÉ ki·ªÉm tra c·∫•u h√¨nh:\nTrong Resources, ch·ªçn resource /students: X√°c minh ph∆∞∆°ng th·ª©c OPTIONS xu·∫•t hi·ªán v·ªõi Mock Integration. Trong Method Response c·ªßa GET, POST, v√† OPTIONS, ki·ªÉm tra header Access-Control-Allow-Origin: '*'. Trong Integration Response c·ªßa OPTIONS, ki·ªÉm tra ph·∫£n h·ªìi tr·∫£ v·ªÅ: { \u0026#34;Access-Control-Allow-Origin\u0026#34;: \u0026#34;*\u0026#34;, \u0026#34;Access-Control-Allow-Methods\u0026#34;: \u0026#34;GET,POST,OPTIONS\u0026#34;, \u0026#34;Access-Control-Allow-Headers\u0026#34;: \u0026#34;Content-Type,x-api-key,Authorization\u0026#34; } L·∫∑p l·∫°i ki·ªÉm tra cho resource /backup (ch·ªâ c√≥ POST v√† OPTIONS). N·∫øu g·∫∑p l·ªói:\n\u0026ldquo;CORS headers already exist\u0026rdquo;: Ch·ªçn Replace existing CORS headers ƒë·ªÉ ghi ƒë√®. \u0026ldquo;AccessDenied\u0026rdquo;: Ki·ªÉm tra vai tr√≤ IAM c·ªßa t√†i kho·∫£n AWS c√≥ quy·ªÅn apigateway:PUT ƒë·ªÉ ch·ªânh s·ª≠a method. \u0026ldquo;OPTIONS method not found\u0026rdquo;: ƒê·∫£m b·∫£o b·∫°n ƒë√£ nh·∫•n Enable CORS ƒë√∫ng c√°ch. L∆∞u √Ω quan tr·ªçng: CORS s·∫Ω kh√¥ng ho·∫°t ƒë·ªông cho ƒë·∫øn khi b·∫°n tri·ªÉn khai API v√†o m·ªôt stage (m·ª•c 4.8).\nH√¨nh 6: Th√¥ng b√°o th√†nh c√¥ng sau khi k√≠ch ho·∫°t CORS.\nL∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt C·∫•u h√¨nh CORS ch√≠nh x√°c - Access-Control-Allow-Origin: S·ª≠ d·ª•ng '*' cho ph√©p m·ªçi domain (ph√π h·ª£p khi th·ª≠ nghi·ªám). Trong m√¥i tr∆∞·ªùng production, ch·ªâ ƒë·ªãnh domain CloudFront c·ª• th·ªÉ (v√≠ d·ª•: https://d12345678.cloudfront.net) ƒë·ªÉ tƒÉng b·∫£o m·∫≠t. - Access-Control-Allow-Headers: ƒê·∫£m b·∫£o bao g·ªìm x-api-key v√¨ c√°c ph∆∞∆°ng th·ª©c y√™u c·∫ßu API Key (StudentApiKey, m·ª•c 4.2). - Access-Control-Allow-Methods: Bao g·ªìm OPTIONS ƒë·ªÉ x·ª≠ l√Ω y√™u c·∫ßu preflight. T√≠ch h·ª£p v·ªõi Lambda C√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail) ph·∫£i tr·∫£ v·ªÅ header Access-Control-Allow-Origin: '*' trong ph·∫£n h·ªìi ƒë·ªÉ tr√°nh l·ªói CORS. ƒê√£ ƒë∆∞·ª£c c·∫•u h√¨nh trong m√£ Lambda ·ªü c√°c m·ª•c 3.1, 3.2, 3.3. B·∫£o m·∫≠t API Key Y√™u c·∫ßu g·ª≠i ƒë·∫øn c√°c endpoint (GET /students, POST /students, POST /backup) ph·∫£i ch·ª©a header x-api-key: \u0026lt;StudentApiKey\u0026gt;. L∆∞u API Key trong AWS Secrets Manager ƒë·ªÉ tƒÉng c∆∞·ªùng b·∫£o m·∫≠t (xem m·ª•c 4.2). V√πng AWS ƒê·∫£m b·∫£o v√πng us-east-1 kh·ªõp v·ªõi API student, c√°c h√†m Lambda, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, v√† SES. X·ª≠ l√Ω l·ªói - N·∫øu giao di·ªán web b√°o l·ªói CORS (v√≠ d·ª•: \u0026ldquo;No \u0026lsquo;Access-Control-Allow-Origin\u0026rsquo; header\u0026rdquo;): - Ki·ªÉm tra Method Response c·ªßa GET, POST, v√† OPTIONS c√≥ header Access-Control-Allow-Origin. - Ki·ªÉm tra Integration Response c·ªßa OPTIONS tr·∫£ v·ªÅ ƒë√∫ng headers CORS. - ƒê·∫£m b·∫£o c√°c h√†m Lambda tr·∫£ v·ªÅ Access-Control-Allow-Origin: '*'. - N·∫øu g·∫∑p l·ªói 403 \u0026quot;Forbidden\u0026quot; khi g·ªçi API: - Ki·ªÉm tra API Key StudentApiKey h·ª£p l·ªá v√† ƒë∆∞·ª£c li√™n k·∫øt v·ªõi Usage Plan (m·ª•c 4.3, 4.9). - ƒê·∫£m b·∫£o API Key Required: true trong Method Request (m·ª•c 4.4, 4.5, 4.6). - N·∫øu g·∫∑p l·ªói 500 t·ª´ Lambda, ki·ªÉm tra log trong CloudWatch (log groups /aws/lambda/getStudentData, /aws/lambda/insertStudentData, /aws/lambda/BackupDynamoDBAndSendEmail). T·ªëi ∆∞u h√≥a - Ch·ªâ ƒë·ªãnh domain CloudFront c·ª• th·ªÉ trong Access-Control-Allow-Origin thay v√¨ '*' ƒë·ªÉ tƒÉng b·∫£o m·∫≠t. - C√¢n nh·∫Øc s·ª≠ d·ª•ng AWS WAF v·ªõi API Gateway ƒë·ªÉ b·∫£o v·ªá kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng DDoS ho·∫∑c l·∫°m d·ª•ng API Key. - N·∫øu c·∫ßn ki·ªÉm tra y√™u c·∫ßu preflight chi ti·∫øt, b·∫≠t CloudWatch Logs cho API Gateway: - Trong API Gateway \u0026gt; Settings \u0026gt; CloudWatch Logs, ch·ªçn Enable CloudWatch Logs v√† ƒë·∫∑t m·ª©c log (v√≠ d·ª•: INFO). - Th√™m Request Validator cho POST /students v√† POST /backup ƒë·ªÉ ki·ªÉm tra body JSON (xem m·ª•c 4.5). Ki·ªÉm tra s·ªõm - Sau khi k√≠ch ho·∫°t CORS, x√°c minh ph∆∞∆°ng th·ª©c OPTIONS xu·∫•t hi·ªán trong Resources cho /students v√† /backup. - Sau khi deploy API (m·ª•c 4.8), ki·ªÉm tra CORS b·∫±ng c√°ch g·ªçi endpoint t·ª´ giao di·ªán web ho·∫∑c s·ª≠ d·ª•ng Postman/curl. - Ki·ªÉm tra t·ª´ giao di·ªán web (m·ªü Developer Tools \u0026gt; Network trong tr√¨nh duy·ªát) ƒë·ªÉ x√°c minh kh√¥ng c√≥ l·ªói CORS khi g·ªçi GET /students, POST /students, ho·∫∑c POST /backup. - N·∫øu nh·∫≠n l·ªói CORS, ki·ªÉm tra headers trong Method Response v√† Integration Response, ho·∫∑c log CloudWatch c·ªßa API Gateway. Ki·ªÉm tra t√≠ch h·ª£p v·ªõi giao di·ªán web Sau khi deploy API (m·ª•c 4.8) v√† li√™n k·∫øt Usage Plan (m·ª•c 4.9), g·ªçi c√°c endpoint (GET /students, POST /students, POST /backup) t·ª´ giao di·ªán web (s·ª≠ d·ª•ng Tailwind CSS, ch·∫°y tr√™n CloudFront). M·∫πo th·ª±c ti·ªÖn: X√°c minh c·∫•u h√¨nh Method Response v√† Integration Response c·ªßa OPTIONS tr∆∞·ªõc khi tri·ªÉn khai API. Ki·ªÉm tra c√°c endpoint t·ª´ giao di·ªán web b·∫±ng Developer Tools ƒë·ªÉ ƒë·∫£m b·∫£o kh√¥ng c√≥ l·ªói CORS v√† d·ªØ li·ªáu ƒë∆∞·ª£c tr·∫£ v·ªÅ ƒë√∫ng.\nK·∫øt Lu·∫≠n CORS ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t th√†nh c√¥ng tr√™n c√°c resource /students v√† /backup trong API student, cho ph√©p giao di·ªán web g·ªçi c√°c endpoint GET /students, POST /students, v√† POST /backup m√† kh√¥ng g·∫∑p l·ªói CORS.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn Tri·ªÉn khai API ƒë·ªÉ s·ª≠ d·ª•ng th·ª±c t·∫ø ƒë·ªÉ ti·∫øp t·ª•c!\n"
},
{
	"uri": "//localhost:1313/vi/4-creating-a-restful-api/4.8-deploying-the-api/",
	"title": "Tri·ªÉn khai API l√™n m·ªôt Stage c·ª• th·ªÉ",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: Tri·ªÉn khai API student (t·∫°o ·ªü m·ª•c 4.1) l√™n stage prod trong AWS API Gateway ƒë·ªÉ k√≠ch ho·∫°t c√°c ph∆∞∆°ng th·ª©c GET /students (m·ª•c 4.4), POST /students (m·ª•c 4.5), v√† POST /backup (m·ª•c 4.6), c√πng v·ªõi c·∫•u h√¨nh CORS (m·ª•c 4.7). Sau khi tri·ªÉn khai, sao ch√©p Invoke URL (v√≠ d·ª•: https://abc123.execute-api.us-east-1.amazonaws.com/prod) ƒë·ªÉ s·ª≠ d·ª•ng trong giao di·ªán web (ch·∫°y tr√™n CloudFront, s·ª≠ d·ª•ng Tailwind CSS) khi g·ªçi c√°c endpoint v·ªõi API Key StudentApiKey (m·ª•c 4.2).\nT·ªïng Quan v·ªÅ Tri·ªÉn Khai API trong API Gateway Stage l√† m·ªôt m√¥i tr∆∞·ªùng tri·ªÉn khai (v√≠ d·ª•: prod, dev, test) trong API Gateway, ƒë·∫°i di·ªán cho phi√™n b·∫£n ho·∫°t ƒë·ªông c·ªßa API t·∫°i m·ªôt th·ªùi ƒëi·ªÉm. Tri·ªÉn khai API l√™n stage prod s·∫Ω: K√≠ch ho·∫°t c√°c ph∆∞∆°ng th·ª©c GET /students, POST /students, v√† POST /backup, t√≠ch h·ª£p v·ªõi c√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail). √Åp d·ª•ng c·∫•u h√¨nh CORS (m·ª•c 4.7) ƒë·ªÉ giao di·ªán web g·ª≠i y√™u c·∫ßu cross-origin. Y√™u c·∫ßu API Key StudentApiKey trong header x-api-key cho c√°c ph∆∞∆°ng th·ª©c (do b·∫≠t API Key Required ·ªü m·ª•c 4.4, 4.5, 4.6). Invoke URL l√† URL g·ªëc c·ªßa stage (v√≠ d·ª•: https://abc123.execute-api.us-east-1.amazonaws.com/prod), ƒë∆∞·ª£c k·∫øt h·ª£p v·ªõi c√°c resource path (/students, /backup) ƒë·ªÉ t·∫°o endpoint ho√†n ch·ªânh: GET https://abc123.execute-api.us-east-1.amazonaws.com/prod/students POST https://abc123.execute-api.us-east-1.amazonaws.com/prod/students POST https://abc123.execute-api.us-east-1.amazonaws.com/prod/backup Sau khi tri·ªÉn khai, Invoke URL s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng trong giao di·ªán web ƒë·ªÉ g·ªçi API v·ªõi API Key. Y√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh m·ª•c 4.1 (t·∫°o API student), m·ª•c 4.2 (t·∫°o API Key StudentApiKey), m·ª•c 4.3 (t·∫°o Usage Plan StudentUsagePlan), m·ª•c 4.4 (t·∫°o ph∆∞∆°ng th·ª©c GET /students), m·ª•c 4.5 (t·∫°o ph∆∞∆°ng th·ª©c POST /students), m·ª•c 4.6 (t·∫°o resource /backup v√† ph∆∞∆°ng th·ª©c POST /backup), m·ª•c 4.7 (k√≠ch ho·∫°t CORS), v√† m·ª•c 3 (t·∫°o c√°c h√†m Lambda getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, SES email x√°c minh). ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1.\nH√†nh ƒê·ªông Chi Ti·∫øt Truy C·∫≠p AWS Management Console\nM·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS c·ªßa b·∫°n.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p API Gateway v√† ch·ªçn d·ªãch v·ª• Amazon API Gateway ƒë·ªÉ v√†o giao di·ªán qu·∫£n l√Ω.\nKi·ªÉm tra v√πng AWS: ƒê·∫£m b·∫£o b·∫°n ƒëang l√†m vi·ªác trong v√πng AWS ch√≠nh (gi·∫£ ƒë·ªãnh us-east-1 ƒë·ªÉ ƒë·ªìng b·ªô v·ªõi c√°c m·ª•c tr∆∞·ªõc), ki·ªÉm tra v√πng ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. V√πng n√†y ph·∫£i kh·ªõp v·ªõi API student, c√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail), b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, v√† SES.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm API Gateway.\nƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c APIs\nTrong giao di·ªán ch√≠nh c·ªßa Amazon API Gateway, nh√¨n v√†o menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn APIs ƒë·ªÉ xem danh s√°ch c√°c API hi·ªán c√≥.\nDanh s√°ch s·∫Ω hi·ªÉn th·ªã API student (t·∫°o ·ªü m·ª•c 4.1). N·∫øu kh√¥ng th·∫•y, ki·ªÉm tra l·∫°i v√πng AWS ho·∫∑c l√†m m·ªõi trang.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn APIs.\nCh·ªçn API student\nTrong danh s√°ch APIs, t√¨m v√† ch·ªçn API c√≥ t√™n student.\nB·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang qu·∫£n l√Ω API student, hi·ªÉn th·ªã c√°c m·ª•c nh∆∞ Resources, Stages, API Keys, v.v.\nH√¨nh 3: Trang qu·∫£n l√Ω API student.\nTri·ªÉn Khai API\nTrong trang qu·∫£n l√Ω API student, ch·ªçn Resources t·ª´ menu b√™n tr√°i. Nh·∫•n Actions \u0026gt; Deploy API ƒë·ªÉ m·ªü giao di·ªán tri·ªÉn khai. H√¨nh 4: Nh·∫•n v√†o n√∫t Deploy API.\nTrong giao di·ªán Deploy API:\nDeployment stage: Ch·ªçn New Stage. Stage name: Nh·∫≠p prod (vi·∫øt th∆∞·ªùng, kh√¥ng ch·ª©a k√Ω t·ª± ƒë·∫∑c bi·ªát). Stage description: (T√πy ch·ªçn) Nh·∫≠p Production stage for StudentManagementAPI ƒë·ªÉ m√¥ t·∫£ r√µ r√†ng m·ª•c ƒë√≠ch. Deployment description: (T√πy ch·ªçn) Nh·∫≠p Initial deployment for prod stage ƒë·ªÉ ghi ch√∫ phi√™n b·∫£n tri·ªÉn khai. Nh·∫•n Deploy ƒë·ªÉ tri·ªÉn khai API l√™n stage prod.\nL∆∞u √Ω:\nN·∫øu stage prod ƒë√£ t·ªìn t·∫°i (t·ª´ l·∫ßn tri·ªÉn khai tr∆∞·ªõc), ch·ªçn prod trong dropdown Deployment stage thay v√¨ t·∫°o m·ªõi, r·ªìi nh·∫•n Deploy ƒë·ªÉ c·∫≠p nh·∫≠t. M·ªói l·∫ßn thay ƒë·ªïi c·∫•u h√¨nh API (method, CORS, v.v.), b·∫°n ph·∫£i tri·ªÉn khai l·∫°i ƒë·ªÉ √°p d·ª•ng. H√¨nh 5: Giao di·ªán tri·ªÉn khai API l√™n stage prod.\nKi·ªÉm Tra Tr·∫°ng Th√°i Tri·ªÉn Khai\nSau khi nh·∫•n Deploy, b·∫°n s·∫Ω th·∫•y th√¥ng b√°o: \u0026ldquo;Successfully created deployment for student. This deployment is active for prod.\u0026rdquo;\nTrong menu b√™n tr√°i, ch·ªçn Stages ƒë·ªÉ xem danh s√°ch stage.\nCh·ªçn stage prod ƒë·ªÉ ki·ªÉm tra chi ti·∫øt:\nX√°c minh Invoke URL hi·ªÉn th·ªã ·ªü ƒë·∫ßu trang (v√≠ d·ª•: https://abc123.execute-api.us-east-1.amazonaws.com/prod). Ki·ªÉm tra c√°c resource (/students, /backup) v√† ph∆∞∆°ng th·ª©c (GET, POST, OPTIONS) ƒë√£ ƒë∆∞·ª£c tri·ªÉn khai. N·∫øu kh√¥ng th·∫•y th√¥ng b√°o ho·∫∑c g·∫∑p l·ªói:\n\u0026ldquo;AccessDenied\u0026rdquo;: Ki·ªÉm tra vai tr√≤ IAM c·ªßa t√†i kho·∫£n AWS c√≥ quy·ªÅn apigateway:POST ƒë·ªÉ tri·ªÉn khai API. \u0026ldquo;Stage already exists\u0026rdquo;: N·∫øu stage prod ƒë√£ t·ªìn t·∫°i, ch·ªçn stage hi·ªán c√≥ v√† tri·ªÉn khai l·∫°i. \u0026ldquo;No methods deployed\u0026rdquo;: ƒê·∫£m b·∫£o c√°c ph∆∞∆°ng th·ª©c GET /students, POST /students, POST /backup, v√† OPTIONS ƒë√£ ƒë∆∞·ª£c t·∫°o (m·ª•c 4.4, 4.5, 4.6, 4.7). H√¨nh 6: Th√¥ng b√°o tr·∫°ng th√°i tri·ªÉn khai v√† chi ti·∫øt stage prod.\nSao Ch√©p Invoke URL\nTrong Stages \u0026gt; prod, sao ch√©p Invoke URL (v√≠ d·ª•: https://abc123.execute-api.us-east-1.amazonaws.com/prod). L∆∞u Invoke URL ·ªü n∆°i an to√†n (v√≠ d·ª•: t·ªáp c·∫•u h√¨nh, bi·∫øn m√¥i tr∆∞·ªùng, ho·∫∑c AWS Secrets Manager) ƒë·ªÉ s·ª≠ d·ª•ng trong giao di·ªán web. S·ª≠ d·ª•ng Invoke URL: K·∫øt h·ª£p Invoke URL v·ªõi resource path ƒë·ªÉ t·∫°o endpoint ho√†n ch·ªânh: GET https://abc123.execute-api.us-east-1.amazonaws.com/prod/students POST https://abc123.execute-api.us-east-1.amazonaws.com/prod/students POST https://abc123.execute-api.us-east-1.amazonaws.com/prod/backup C√°c endpoint n√†y s·∫Ω ƒë∆∞·ª£c g·ªçi t·ª´ giao di·ªán web v·ªõi header x-api-key: \u0026lt;StudentApiKey\u0026gt;. L∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt B·∫£o m·∫≠t API Key M·ªói y√™u c·∫ßu ƒë·∫øn c√°c endpoint ph·∫£i ch·ª©a header x-api-key v·ªõi gi√° tr·ªã StudentApiKey (t·∫°o ·ªü m·ª•c 4.2). L∆∞u API Key trong AWS Secrets Manager ƒë·ªÉ tƒÉng c∆∞·ªùng b·∫£o m·∫≠t, tr√°nh nh√∫ng tr·ª±c ti·∫øp trong m√£ JavaScript. CORS ƒê·∫£m b·∫£o CORS ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t ƒë√∫ng c√°ch (m·ª•c 4.7) v·ªõi ph∆∞∆°ng th·ª©c OPTIONS v√† header Access-Control-Allow-Origin: '*' (ho·∫∑c domain CloudFront c·ª• th·ªÉ). C√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail) ph·∫£i tr·∫£ v·ªÅ header Access-Control-Allow-Origin: '*' trong ph·∫£n h·ªìi (ƒë√£ c·∫•u h√¨nh ·ªü m·ª•c 3.1, 3.2, 3.3). V√πng AWS ƒê·∫£m b·∫£o v√πng us-east-1 kh·ªõp v·ªõi API student, c√°c h√†m Lambda, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, v√† SES. X·ª≠ l√Ω l·ªói - N·∫øu g·∫∑p l·ªói 403 \u0026quot;Forbidden\u0026quot; khi g·ªçi endpoint: - Ki·ªÉm tra API Key StudentApiKey h·ª£p l·ªá v√† ƒë∆∞·ª£c li√™n k·∫øt v·ªõi Usage Plan (m·ª•c 4.3, 4.9). - ƒê·∫£m b·∫£o API Key Required: true trong Method Request (m·ª•c 4.4, 4.5, 4.6). - N·∫øu g·∫∑p l·ªói 404 \u0026quot;Not Found\u0026quot;: - Ki·ªÉm tra Invoke URL ƒë√∫ng v√† resource path (/students, /backup) ƒë∆∞·ª£c c·∫•u h√¨nh. - ƒê·∫£m b·∫£o API ƒë√£ ƒë∆∞·ª£c tri·ªÉn khai l√™n stage prod. - N·∫øu g·∫∑p l·ªói CORS: - Ki·ªÉm tra c·∫•u h√¨nh CORS (m·ª•c 4.7) v√† header Access-Control-Allow-Origin trong Method Response v√† Lambda. - N·∫øu g·∫∑p l·ªói 500 t·ª´ Lambda, ki·ªÉm tra log trong CloudWatch (log groups /aws/lambda/getStudentData, /aws/lambda/insertStudentData, /aws/lambda/BackupDynamoDBAndSendEmail). T·ªëi ∆∞u h√≥a - B·∫≠t CloudWatch Logs cho stage prod ƒë·ªÉ theo d√µi y√™u c·∫ßu API: - Trong Stages \u0026gt; prod \u0026gt; Logs/Tracing, ch·ªçn Enable CloudWatch Logs v√† ƒë·∫∑t m·ª©c log (v√≠ d·ª•: INFO). - Ki·ªÉm tra log trong CloudWatch \u0026gt; Log groups \u0026gt; /aws/apigateway/student-prod. - C√¢n nh·∫Øc s·ª≠ d·ª•ng AWS WAF v·ªõi API Gateway ƒë·ªÉ b·∫£o v·ªá kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng DDoS ho·∫∑c l·∫°m d·ª•ng API Key. - N·∫øu c·∫ßn nhi·ªÅu stage (v√≠ d·ª•: dev, test), t·∫°o th√™m stage trong Stages v√† tri·ªÉn khai ri√™ng bi·ªát ƒë·ªÉ th·ª≠ nghi·ªám. Ki·ªÉm tra s·ªõm - Sau khi tri·ªÉn khai, x√°c minh stage prod xu·∫•t hi·ªán trong Stages v·ªõi Invoke URL ƒë√∫ng. - Ki·ªÉm tra c√°c endpoint b·∫±ng Postman ho·∫∑c curl. - K·∫øt qu·∫£ mong ƒë·ª£i: - GET /students: Tr·∫£ v·ªÅ danh s√°ch sinh vi√™n t·ª´ DynamoDB studentData. - POST /students: L∆∞u b·∫£n ghi m·ªõi v√†o DynamoDB v√† g·ª≠i email x√°c nh·∫≠n qua SES. - POST /backup: T·∫°o t·ªáp backup trong S3 student-backup-20250706 v√† g·ª≠i email th√¥ng b√°o. - Ki·ªÉm tra t·ª´ giao di·ªán web (m·ªü Developer Tools \u0026gt; Network trong tr√¨nh duy·ªát) ƒë·ªÉ x√°c minh kh√¥ng c√≥ l·ªói CORS ho·∫∑c 403. - N·∫øu nh·∫≠n l·ªói, ki·ªÉm tra API Key, c·∫•u h√¨nh CORS, ho·∫∑c log CloudWatch. Ki·ªÉm tra t√≠ch h·ª£p v·ªõi giao di·ªán web S·ª≠ d·ª•ng Invoke URL trong giao di·ªán web ƒë·ªÉ g·ªçi c√°c endpoint, ƒë·∫£m b·∫£o header x-api-key ƒë∆∞·ª£c g·ª≠i ƒë√∫ng (s·ª≠ d·ª•ng Tailwind CSS, ch·∫°y tr√™n CloudFront). M·∫πo th·ª±c ti·ªÖn: Sau khi tri·ªÉn khai, ki·ªÉm tra Invoke URL b·∫±ng Postman tr∆∞·ªõc khi t√≠ch h·ª£p v·ªõi giao di·ªán web. X√°c minh d·ªØ li·ªáu trong DynamoDB studentData, bucket S3 student-backup-20250706, v√† email SES ƒë·ªÉ ƒë·∫£m b·∫£o c√°c endpoint ho·∫°t ƒë·ªông ƒë√∫ng.\nK·∫øt Lu·∫≠n API student ƒë√£ ƒë∆∞·ª£c tri·ªÉn khai th√†nh c√¥ng l√™n stage prod v·ªõi Invoke URL s·∫µn s√†ng ƒë·ªÉ s·ª≠ d·ª•ng trong giao di·ªán web, h·ªó tr·ª£ c√°c ph∆∞∆°ng th·ª©c GET /students, POST /students, v√† POST /backup.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn Li√™n k·∫øt API Key v·ªõi Usage Plan ƒë·ªÉ ti·∫øp t·ª•c!\n"
},
{
	"uri": "//localhost:1313/vi/4-creating-a-restful-api/4.9-linking-api-key-to-usage-plan-and-stage/",
	"title": "G·∫Øn API Key v√†o Usage Plan &amp; Li√™n k·∫øt v·ªõi REST API v√† Stage",
	"tags": [],
	"description": "",
	"content": " M·ª•c ti√™u: G·∫Øn API Key StudentApiKey (t·∫°o ·ªü m·ª•c 4.2) v√†o Usage Plan StudentUsagePlan (t·∫°o ·ªü m·ª•c 4.3) v√† li√™n k·∫øt v·ªõi API student (t·∫°o ·ªü m·ª•c 4.1) tr√™n stage prod (t·∫°o ·ªü m·ª•c 4.8). ƒêi·ªÅu n√†y ƒë·∫£m b·∫£o c√°c y√™u c·∫ßu ƒë·∫øn c√°c endpoint (GET /students, POST /students, POST /backup) ph·∫£i s·ª≠ d·ª•ng StudentApiKey trong header x-api-key v√† tu√¢n theo gi·ªõi h·∫°n c·ªßa StudentUsagePlan (Rate: 5 y√™u c·∫ßu/gi√¢y, Burst: 10 y√™u c·∫ßu, Quota: 1000 y√™u c·∫ßu/ng√†y). C·∫•u h√¨nh n√†y cho ph√©p giao di·ªán web (ch·∫°y tr√™n CloudFront, s·ª≠ d·ª•ng Tailwind CSS) truy c·∫≠p API m·ªôt c√°ch an to√†n v√† ki·ªÉm so√°t.\nT·ªïng Quan v·ªÅ API Key v√† Usage Plan trong API Gateway API Key (StudentApiKey) l√† m·ªôt chu·ªói x√°c th·ª±c d√πng ƒë·ªÉ ki·ªÉm so√°t truy c·∫≠p v√†o c√°c ph∆∞∆°ng th·ª©c API (GET /students, POST /students, POST /backup), y√™u c·∫ßu header x-api-key trong m·ªói y√™u c·∫ßu. Usage Plan (StudentUsagePlan) qu·∫£n l√Ω gi·ªõi h·∫°n truy c·∫≠p (Rate, Burst, Quota) v√† li√™n k·∫øt API Key v·ªõi API/stage c·ª• th·ªÉ. Li√™n k·∫øt StudentApiKey v·ªõi StudentUsagePlan v√† API student tr√™n stage prod ƒë·∫£m b·∫£o: Ch·ªâ c√°c y√™u c·∫ßu c√≥ StudentApiKey h·ª£p l·ªá m·ªõi ƒë∆∞·ª£c x·ª≠ l√Ω. C√°c y√™u c·∫ßu tu√¢n theo gi·ªõi h·∫°n: 5 y√™u c·∫ßu/gi√¢y (Rate), 10 y√™u c·∫ßu ƒë·ªìng th·ªùi (Burst), v√† 1000 y√™u c·∫ßu/ng√†y (Quota). Giao di·ªán web c√≥ th·ªÉ g·ªçi c√°c endpoint m·ªôt c√°ch an to√†n v·ªõi CORS (m·ª•c 4.7) v√† Invoke URL (m·ª•c 4.8). Sau khi ho√†n t·∫•t, c√°c endpoint s·∫Ω s·∫µn s√†ng ƒë·ªÉ s·ª≠ d·ª•ng trong giao di·ªán web v·ªõi b·∫£o m·∫≠t API Key. Y√™u C·∫ßu Ban ƒê·∫ßu B·∫°n c·∫ßn ho√†n th√†nh m·ª•c 4.1 (t·∫°o API student), m·ª•c 4.2 (t·∫°o API Key StudentApiKey), m·ª•c 4.3 (t·∫°o Usage Plan StudentUsagePlan), m·ª•c 4.4 (t·∫°o ph∆∞∆°ng th·ª©c GET /students), m·ª•c 4.5 (t·∫°o ph∆∞∆°ng th·ª©c POST /students), m·ª•c 4.6 (t·∫°o resource /backup v√† ph∆∞∆°ng th·ª©c POST /backup), m·ª•c 4.7 (k√≠ch ho·∫°t CORS), m·ª•c 4.8 (tri·ªÉn khai API l√™n stage prod), v√† m·ª•c 3 (t·∫°o c√°c h√†m Lambda getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, SES email x√°c minh). ƒê·∫£m b·∫£o t√†i kho·∫£n AWS ƒë√£ s·∫µn s√†ng v√† v√πng AWS l√† us-east-1.\nH√†nh ƒê·ªông Chi Ti·∫øt Truy C·∫≠p AWS Management Console\nM·ªü tr√¨nh duy·ªát v√† ƒëƒÉng nh·∫≠p v√†o AWS Management Console b·∫±ng t√†i kho·∫£n AWS c·ªßa b·∫°n.\nTrong thanh t√¨m ki·∫øm ·ªü ƒë·∫ßu trang, nh·∫≠p API Gateway v√† ch·ªçn d·ªãch v·ª• Amazon API Gateway ƒë·ªÉ v√†o giao di·ªán qu·∫£n l√Ω.\nKi·ªÉm tra v√πng AWS: ƒê·∫£m b·∫£o b·∫°n ƒëang l√†m vi·ªác trong v√πng AWS ch√≠nh (gi·∫£ ƒë·ªãnh us-east-1 ƒë·ªÉ ƒë·ªìng b·ªô v·ªõi c√°c m·ª•c tr∆∞·ªõc), ki·ªÉm tra v√πng ·ªü g√≥c tr√™n b√™n ph·∫£i AWS Console. V√πng n√†y ph·∫£i kh·ªõp v·ªõi API student, c√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail), b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, v√† SES.\nH√¨nh 1: Giao di·ªán AWS Console v·ªõi thanh t√¨m ki·∫øm API Gateway.\nƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c API Keys\nTrong giao di·ªán ch√≠nh c·ªßa Amazon API Gateway, nh√¨n v√†o menu ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i.\nCh·ªçn API Keys ƒë·ªÉ xem danh s√°ch c√°c API Key hi·ªán c√≥.\nDanh s√°ch s·∫Ω hi·ªÉn th·ªã StudentApiKey (t·∫°o ·ªü m·ª•c 4.2). N·∫øu kh√¥ng th·∫•y, ki·ªÉm tra l·∫°i v√πng AWS ho·∫∑c l√†m m·ªõi trang.\nH√¨nh 2: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn API Keys.\nCh·ªçn API Key StudentApiKey\nTrong danh s√°ch API Keys, t√¨m v√† ch·ªçn StudentApiKey.\nB·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang chi ti·∫øt c·ªßa StudentApiKey, hi·ªÉn th·ªã th√¥ng tin nh∆∞ Value (gi√° tr·ªã API Key, c√≥ th·ªÉ ·∫©n), Usage Plans, v√† c√°c t√πy ch·ªçn c·∫•u h√¨nh.\nH√¨nh 3: Trang chi ti·∫øt c·ªßa StudentApiKey.\nG·∫Øn StudentApiKey v√†o Usage Plan\nTrong trang chi ti·∫øt c·ªßa StudentApiKey, nh·∫•n Add to Usage Plan (ho·∫∑c Actions \u0026gt; Add to Usage Plan t√πy phi√™n b·∫£n Console).\nTrong m·ª•c Add key to usage plan:\nUsage Plan: Ch·ªçn StudentUsagePlan t·ª´ dropdown (t·∫°o ·ªü m·ª•c 4.3). L∆∞u √Ω: N·∫øu StudentUsagePlan kh√¥ng xu·∫•t hi·ªán, ki·ªÉm tra xem Usage Plan ƒë√£ ƒë∆∞·ª£c t·∫°o trong c√πng v√πng AWS (us-east-1). Nh·∫•n Save ƒë·ªÉ g·∫Øn StudentApiKey v√†o StudentUsagePlan.\nKi·ªÉm tra: Sau khi l∆∞u, trong trang chi ti·∫øt c·ªßa StudentApiKey, ph·∫ßn Usage Plans s·∫Ω hi·ªÉn th·ªã StudentUsagePlan.\nH√¨nh 4: Giao di·ªán g·∫Øn StudentApiKey v√†o StudentUsagePlan.\nKi·ªÉm Tra Tr·∫°ng Th√°i G·∫Øn API Key\nSau khi nh·∫•n Save, b·∫°n s·∫Ω th·∫•y th√¥ng b√°o: \u0026ldquo;Successfully added \u0026lsquo;StudentApiKey\u0026rsquo; to \u0026lsquo;StudentUsagePlan\u0026rsquo;.\u0026rdquo;\nN·∫øu kh√¥ng th·∫•y th√¥ng b√°o ho·∫∑c g·∫∑p l·ªói:\n\u0026ldquo;Usage Plan not found\u0026rdquo;: Ki·ªÉm tra StudentUsagePlan t·ªìn t·∫°i trong Usage Plans (m·ª•c 4.3). \u0026ldquo;AccessDenied\u0026rdquo;: Ki·ªÉm tra vai tr√≤ IAM c·ªßa t√†i kho·∫£n AWS c√≥ quy·ªÅn apigateway:PUT ƒë·ªÉ g·∫Øn API Key. \u0026ldquo;API Key already added\u0026rdquo;: N·∫øu StudentApiKey ƒë√£ ƒë∆∞·ª£c g·∫Øn tr∆∞·ªõc ƒë√≥, th√¥ng b√°o n√†y c√≥ th·ªÉ xu·∫•t hi·ªán; b·ªè qua v√† ti·∫øp t·ª•c b∆∞·ªõc ti·∫øp theo. H√¨nh 5: Th√¥ng b√°o tr·∫°ng th√°i g·∫Øn API Key.\nƒêi·ªÅu H∆∞·ªõng ƒê·∫øn M·ª•c Usage Plans\nTrong menu b√™n tr√°i c·ªßa Amazon API Gateway, ch·ªçn Usage Plans ƒë·ªÉ xem danh s√°ch c√°c Usage Plan.\nDanh s√°ch s·∫Ω hi·ªÉn th·ªã StudentUsagePlan (t·∫°o ·ªü m·ª•c 4.3). N·∫øu kh√¥ng th·∫•y, ki·ªÉm tra l·∫°i v√πng AWS ho·∫∑c l√†m m·ªõi trang.\nH√¨nh 6: Menu ƒëi·ªÅu h∆∞·ªõng v·ªõi t√πy ch·ªçn Usage Plans. Ch·ªçn Usage Plan StudentUsagePlan\nTrong danh s√°ch Usage Plans, t√¨m v√† ch·ªçn StudentUsagePlan.\nB·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang chi ti·∫øt c·ªßa StudentUsagePlan, hi·ªÉn th·ªã th√¥ng tin nh∆∞ Throttling (Rate: 5, Burst: 10), Quota (1000 y√™u c·∫ßu/ng√†y), API Keys, v√† Associated APIs and Stages.\nH√¨nh 7: Trang chi ti·∫øt c·ªßa StudentUsagePlan. Li√™n K·∫øt API v√† Stage\nTrong trang chi ti·∫øt c·ªßa StudentUsagePlan, nh·∫•n Add API Stage (ho·∫∑c Actions \u0026gt; Add API Stage t√πy phi√™n b·∫£n Console). H√¨nh 8: Nh·∫•n v√†o n√∫t Add API Stage.\nTrong giao di·ªán Add API Stage:\nAPI: Ch·ªçn student t·ª´ dropdown (t·∫°o ·ªü m·ª•c 4.1). Stage: Ch·ªçn prod t·ª´ dropdown (t·∫°o ·ªü m·ª•c 4.8). L∆∞u √Ω: N·∫øu student ho·∫∑c prod kh√¥ng xu·∫•t hi·ªán, ki·ªÉm tra xem API student v√† stage prod ƒë√£ ƒë∆∞·ª£c t·∫°o trong c√πng v√πng AWS (us-east-1). Nh·∫•n Add to Usage Plan ƒë·ªÉ li√™n k·∫øt.\nKi·ªÉm tra: Trong trang chi ti·∫øt c·ªßa StudentUsagePlan, ph·∫ßn Associated APIs and Stages s·∫Ω hi·ªÉn th·ªã student:prod.\nH√¨nh 9: Giao di·ªán li√™n k·∫øt API v√† Stage.\nKi·ªÉm Tra Tr·∫°ng Th√°i Li√™n K·∫øt API v√† Stage\nSau khi nh·∫•n Add to Usage Plan, b·∫°n s·∫Ω th·∫•y th√¥ng b√°o: \u0026ldquo;Successfully added stage \u0026lsquo;prod\u0026rsquo; to usage plan.\u0026rdquo;\nƒê·ªÉ x√°c minh:\nTrong Usage Plans \u0026gt; StudentUsagePlan: Ki·ªÉm tra API Keys hi·ªÉn th·ªã StudentApiKey. Ki·ªÉm tra Associated APIs and Stages hi·ªÉn th·ªã student:prod. N·∫øu kh√¥ng th·∫•y th√¥ng b√°o ho·∫∑c g·∫∑p l·ªói: \u0026ldquo;API or Stage not found\u0026rdquo;: Ki·ªÉm tra API student v√† stage prod t·ªìn t·∫°i (m·ª•c 4.1, 4.8). \u0026ldquo;AccessDenied\u0026rdquo;: Ki·ªÉm tra vai tr√≤ IAM c√≥ quy·ªÅn apigateway:PUT ƒë·ªÉ li√™n k·∫øt API/stage. \u0026ldquo;Stage already associated\u0026rdquo;: N·∫øu student:prod ƒë√£ ƒë∆∞·ª£c li√™n k·∫øt tr∆∞·ªõc ƒë√≥, th√¥ng b√°o n√†y c√≥ th·ªÉ xu·∫•t hi·ªán; b·ªè qua. H√¨nh 10: Th√¥ng b√°o tr·∫°ng th√°i li√™n k·∫øt API v√† Stage. L∆∞u √ù Quan Tr·ªçng Y·∫øu T·ªë Chi Ti·∫øt Ki·ªÉm tra to√†n b·ªô c·∫•u h√¨nh - API Key: StudentApiKey ƒë√£ ƒë∆∞·ª£c g·∫Øn v√†o StudentUsagePlan. - Usage Plan: StudentUsagePlan √°p d·ª•ng gi·ªõi h·∫°n Rate (5 y√™u c·∫ßu/gi√¢y), Burst (10 y√™u c·∫ßu), Quota (1000 y√™u c·∫ßu/ng√†y). - API/Stage: student:prod ƒë√£ ƒë∆∞·ª£c li√™n k·∫øt, √°p d·ª•ng gi·ªõi h·∫°n c·ªßa StudentUsagePlan cho c√°c endpoint (GET /students, POST /students, POST /backup). - API Key Required: C√°c ph∆∞∆°ng th·ª©c ƒë√£ b·∫≠t API Key Required: true (m·ª•c 4.4, 4.5, 4.6). B·∫£o m·∫≠t API Key Y√™u c·∫ßu ƒë·∫øn c√°c endpoint ph·∫£i ch·ª©a header x-api-key: \u0026lt;StudentApiKey\u0026gt;. L∆∞u API Key trong AWS Secrets Manager ƒë·ªÉ tƒÉng c∆∞·ªùng b·∫£o m·∫≠t. CORS ƒê·∫£m b·∫£o CORS ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t (m·ª•c 4.7) v·ªõi ph∆∞∆°ng th·ª©c OPTIONS v√† header Access-Control-Allow-Origin: '*' (ho·∫∑c domain CloudFront c·ª• th·ªÉ). C√°c h√†m Lambda (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail) ph·∫£i tr·∫£ v·ªÅ header Access-Control-Allow-Origin: '*' (ƒë√£ c·∫•u h√¨nh ·ªü m·ª•c 3.1, 3.2, 3.3). V√πng AWS ƒê·∫£m b·∫£o v√πng us-east-1 kh·ªõp v·ªõi API student, stage prod, StudentApiKey, StudentUsagePlan, c√°c h√†m Lambda, b·∫£ng DynamoDB studentData, bucket S3 student-backup-20250706, v√† SES. X·ª≠ l√Ω l·ªói - N·∫øu g·∫∑p l·ªói 403 \u0026quot;Forbidden\u0026quot; khi g·ªçi endpoint: - Ki·ªÉm tra StudentApiKey h·ª£p l·ªá v√† ƒë∆∞·ª£c g·∫Øn v√†o StudentUsagePlan. - ƒê·∫£m b·∫£o student:prod ƒë∆∞·ª£c li√™n k·∫øt v·ªõi StudentUsagePlan. - X√°c minh API Key Required: true trong Method Request (m·ª•c 4.4, 4.5, 4.6). - N·∫øu g·∫∑p l·ªói 429 \u0026quot;Too Many Requests\u0026quot;: - Ki·ªÉm tra gi·ªõi h·∫°n Rate (5 y√™u c·∫ßu/gi√¢y), Burst (10 y√™u c·∫ßu), ho·∫∑c Quota (1000 y√™u c·∫ßu/ng√†y) trong StudentUsagePlan. - Xem th·ªëng k√™ s·ª≠ d·ª•ng trong Usage Plans \u0026gt; StudentUsagePlan \u0026gt; Usage. - N·∫øu g·∫∑p l·ªói 500 t·ª´ Lambda, ki·ªÉm tra log trong CloudWatch (log groups /aws/lambda/getStudentData, /aws/lambda/insertStudentData, /aws/lambda/BackupDynamoDBAndSendEmail). - N·∫øu kh√¥ng th·∫•y th√¥ng b√°o th√†nh c√¥ng, ki·ªÉm tra v√πng AWS ho·∫∑c l√†m m·ªõi trang Console. T·ªëi ∆∞u h√≥a - B·∫≠t CloudWatch Metrics cho StudentUsagePlan ƒë·ªÉ theo d√µi s·ªë l∆∞·ª£ng y√™u c·∫ßu: - Trong Usage Plans \u0026gt; StudentUsagePlan, ch·ªçn Enable usage plan metrics. - Ki·ªÉm tra trong CloudWatch \u0026gt; Metrics \u0026gt; API Gateway \u0026gt; UsagePlanId. - C√¢n nh·∫Øc s·ª≠ d·ª•ng AWS WAF v·ªõi API Gateway ƒë·ªÉ b·∫£o v·ªá kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng DDoS ho·∫∑c l·∫°m d·ª•ng API Key. - N·∫øu c·∫ßn nhi·ªÅu API Key (v√≠ d·ª•: cho nhi·ªÅu ·ª©ng d·ª•ng web), t·∫°o th√™m API Key v√† g·∫Øn v√†o StudentUsagePlan. Ki·ªÉm tra s·ªõm - Sau khi g·∫Øn StudentApiKey v√† li√™n k·∫øt student:prod, ki·ªÉm tra c·∫•u h√¨nh trong Usage Plans \u0026gt; StudentUsagePlan. - Ki·ªÉm tra c√°c endpoint b·∫±ng Postman ho·∫∑c curl v·ªõi StudentApiKey. - K·∫øt qu·∫£ mong ƒë·ª£i: - GET /students: Tr·∫£ v·ªÅ danh s√°ch sinh vi√™n t·ª´ DynamoDB studentData. - POST /students: L∆∞u b·∫£n ghi m·ªõi v√†o DynamoDB v√† g·ª≠i email x√°c nh·∫≠n qua SES. - POST /backup: T·∫°o t·ªáp backup trong S3 student-backup-20250706 v√† g·ª≠i email th√¥ng b√°o. - Ki·ªÉm tra t·ª´ giao di·ªán web (m·ªü Developer Tools \u0026gt; Network trong tr√¨nh duy·ªát) ƒë·ªÉ x√°c minh kh√¥ng c√≥ l·ªói CORS, 403, ho·∫∑c 429. Ki·ªÉm tra t√≠ch h·ª£p v·ªõi giao di·ªán web S·ª≠ d·ª•ng Invoke URL v√† StudentApiKey trong giao di·ªán web (s·ª≠ d·ª•ng Tailwind CSS, ch·∫°y tr√™n CloudFront) ƒë·ªÉ g·ªçi c√°c endpoint (GET /students, POST /students, POST /backup). M·∫πo th·ª±c ti·ªÖn: Sau khi g·∫Øn StudentApiKey v√† li√™n k·∫øt student:prod, ki·ªÉm tra c√°c endpoint b·∫±ng Postman v·ªõi header x-api-key tr∆∞·ªõc khi t√≠ch h·ª£p v·ªõi giao di·ªán web. X√°c minh d·ªØ li·ªáu trong DynamoDB studentData, bucket S3 student-backup-20250706, v√† email SES ƒë·ªÉ ƒë·∫£m b·∫£o c√°c endpoint ho·∫°t ƒë·ªông ƒë√∫ng.\nK·∫øt Lu·∫≠n StudentApiKey ƒë√£ ƒë∆∞·ª£c g·∫Øn th√†nh c√¥ng v√†o StudentUsagePlan v√† li√™n k·∫øt v·ªõi API student tr√™n stage prod, ƒë·∫£m b·∫£o c√°c endpoint (GET /students, POST /students, POST /backup) ƒë∆∞·ª£c b·∫£o m·∫≠t v√† tu√¢n theo gi·ªõi h·∫°n truy c·∫≠p, s·∫µn s√†ng ƒë·ªÉ s·ª≠ d·ª•ng trong giao di·ªán web.\nB∆∞·ªõc ti·∫øp theo: Chuy·ªÉn ƒë·∫øn Ti·∫øp t·ª•c c·∫•u h√¨nh ho·∫∑c t√≠ch h·ª£p giao di·ªán web ƒë·ªÉ ho√†n thi·ªán h·ªá th·ªëng!\n"
},
{
	"uri": "//localhost:1313/vi/6-configuring-s3-buckets/6.1-creating-a-new-s3-bucket/",
	"title": "",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/6-configuring-s3-buckets/6.2-uploading-static-assets-to-s3/",
	"title": "",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/6-configuring-s3-buckets/6.3-enabling-static-website-hosting/",
	"title": "",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/6-configuring-s3-buckets/6.4-setting-bucket-policy-for-public-access/",
	"title": "",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/6-configuring-s3-buckets/6.5-updating-bucket-policy-to-support-backup/",
	"title": "",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]