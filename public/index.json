[
{
	"uri": "//localhost:1313/3-creating-lambda-functions/3.1-create-the-getstudentdata-function/",
	"title": "Configure Lambda Function getStudentData",
	"tags": [],
	"description": "",
	"content": " Objective: Create and configure the Lambda function getStudentData to retrieve all student data from the DynamoDB studentData table, including fields Student ID (studentid), Full Name (name), Class (class), Date of Birth (birthdate), and Email (email). This function uses the Scan operation to fetch the data and returns the results in JSON format, supporting integration with the web interface via API Gateway.\nThe function will use Python 3.13, architecture x86_64, assigned the IAM role LambdaGetStudentRole (created in section 2.1), and integrated with DynamoDB.\nInitial Requirements You need to complete the preparation steps in section 2 (IAM Role LambdaGetStudentRole, DynamoDB table studentData) before creating the function. Ensure your AWS account is ready and the AWS region is us-east-1.\nOverview of the getStudentData Function The getStudentData function performs the following tasks:\nConnects to the DynamoDB studentData table in the AWS region (default is us-east-1). Performs a Scan operation to retrieve all student data, handling pagination if the table is large. Returns the data in JSON format with a CORS header (Access-Control-Allow-Origin: '*') so that the web interface (running on CloudFront) can access it via API Gateway. Logs to CloudWatch for monitoring and debugging (supported by the AWSLambdaBasicExecutionRole policy). Detailed Steps Access AWS Management Console\nOpen your browser and log in to the AWS Management Console with your AWS account.\nIn the search bar at the top, type Lambda and select AWS Lambda to enter the management interface.\nEnsure the AWS region is us-east-1 (matching the studentData table), check in the top-right corner of the AWS Console.\nFigure 1: AWS Console interface with the Lambda search bar.\nNavigate to Functions Section\nIn the AWS Lambda interface, look at the left-hand navigation menu.\nSelect Functions to see the list of existing Lambda functions. If none exist, the list will be empty.\nFigure 2: Navigation menu with the Functions option.\nStart the Create Function Process\nIn the Functions interface, click the Create function button in the top-right corner to start configuring a new function.\nFigure 3: Create function button in the Functions interface.\nConfigure Basic Function Information\nIn the Function type section, select Author from scratch.\nIn the Function name field, enter getStudentData.\nIn the Runtime section, select Python 3.13. If Python 3.13 is unavailable, select the latest version (e.g., Python 3.12 or 3.11).\nIn the Architecture section, select x86_64.\nFigure 4: Basic function configuration interface.\nIn the Permissions section, choose Use an existing role, and select LambdaGetStudentRole (created in section 2.1, including AWSLambdaBasicExecutionRole, AmazonDynamoDBReadOnlyAccess, AmazonS3FullAccess, CloudFrontFullAccess).\nNote: AmazonS3FullAccess and CloudFrontFullAccess are not used in the current code but are retained from previous requirements.\nKeep the other settings as defaults and click Create function.\nFigure 5: Select LambdaGetStudentRole and click Create function.\nCheck the Function Creation Status\nAfter clicking Create function, you will be redirected to the getStudentData function details page.\nThe interface will display a message like: \u0026ldquo;Successfully created the function getStudentData. You can now change its code and configuration. To invoke your function with a test event, choose Test.\u0026rdquo;\nIf you don\u0026rsquo;t see this message or encounter an error, check that LambdaGetStudentRole exists and that your AWS account has the lambda:CreateFunction permission.\nFigure 6: Function details page after creating getStudentData.\nConfigure Source Code\nIn the Code tab, scroll down to the Code source section. In the lambda_function.py file, delete the default code and paste the following: import json import boto3 def lambda_handler(event, context): # Connect to DynamoDB in the us-east-1 region dynamodb = boto3.resource(\u0026#39;dynamodb\u0026#39;, region_name=\u0026#39;us-east-1\u0026#39;) table = dynamodb.Table(\u0026#39;studentData\u0026#39;) # Retrieve all data from the studentData table response = table.scan() data = response[\u0026#39;Items\u0026#39;] # Continue scanning if there is more data (pagination) while \u0026#39;LastEvaluatedKey\u0026#39; in response: response = table.scan(ExclusiveStartKey=response[\u0026#39;LastEvaluatedKey\u0026#39;]) data.extend(response[\u0026#39;Items\u0026#39;]) # Return the data in JSON format return { \u0026#39;statusCode\u0026#39;: 200, \u0026#39;body\u0026#39;: json.dumps(data), \u0026#39;headers\u0026#39;: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, \u0026#39;Access-Control-Allow-Origin\u0026#39;: \u0026#39;*\u0026#39; } } "
},
{
	"uri": "//localhost:1313/4-creating-a-restful-api/4.1-creating-a-rest-api/",
	"title": "Create a New REST API on API Gateway",
	"tags": [],
	"description": "",
	"content": " Objective: Create a new REST API in AWS API Gateway with the name student and the Edge-optimized endpoint type, to integrate with Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail) and the web interface (running on CloudFront). This API will provide endpoints to access, store, and back up student data, while being secured with an API Key and supporting CORS.\nOverview of REST API in API Gateway AWS API Gateway is a serverless service that allows the creation of RESTful or HTTP APIs, connecting the web interface with backend services like Lambda, DynamoDB, or S3. The student API will include the following endpoints: GET /students: Calls the getStudentData function to fetch the student list from the DynamoDB studentData table. POST /students: Calls the insertStudentData function to store student information and send a confirmation email via SES. POST /backup: Calls the BackupDynamoDBAndSendEmail function to back up data to S3 and send an email notification. The Edge-optimized endpoint uses CloudFront to reduce latency, which is suitable for the web interface deployed via CloudFront. Prerequisites You need to complete the steps in section 3 (create Lambda functions getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, DynamoDB table studentData, S3 bucket student-backup-20250706, SES email verification). Ensure your AWS account is set up, and the AWS region is us-east-1.\nDetailed Steps Access the AWS Management Console\nOpen your browser and log in to the AWS Management Console with your AWS account.\nIn the search bar at the top, type API Gateway and select the Amazon API Gateway service to go to the management interface.\nCheck the AWS region: Make sure you are working in the primary AWS region (e.g., us-east-1), and check the region at the top right corner of the AWS Console. This region should match with the Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail), DynamoDB table studentData, S3 bucket student-backup-20250706, and SES.\nFigure 1: AWS Console Interface with API Gateway Search Bar.\nNavigate to the APIs Section\nIn the main Amazon API Gateway interface, look at the left navigation menu.\nSelect APIs to view the list of existing APIs. If you haven\u0026rsquo;t created any API, the list will be empty.\nThe interface will show options to create or manage APIs.\nFigure 2: Navigation Menu with APIs Option.\nInitiate the API Creation Process\nIn the APIs interface, click the Create API button at the top right to start creating a new API.\nIf you immediately see the REST API option, move to step 4. If not, the interface will list types of APIs (REST API, HTTP API, WebSocket API).\nFigure 3: Create API Button in the APIs Interface.\nChoose REST API and Build\nIn the Create API interface, find the REST API option (not REST API Private or HTTP API).\nClick Build under REST API to begin creating a RESTful API.\nREST API Notes:\nREST API supports features like API Key, CORS, and Lambda Proxy integration, which are suitable for this system. Compared to HTTP API (lighter, cheaper) and REST API Private (only accessible within a VPC), REST API is the best choice for a public application integrated with CloudFront. Figure 4: Choose REST API and Click Build.\nConfigure the API Details\nIn the API Details section: Choose New API to create a new API from scratch. API name: Enter student (different from StudentManagementAPI in section 4 earlier, I will use student as requested). Description: Enter REST API for student management system, integrated with Lambda and CloudFront. API endpoint Type: Choose Edge-optimized. Explanation: Edge-optimized: The API is distributed via CloudFront, using edge locations to reduce latency for global users. Suitable for a web interface running on CloudFront. Regional: The API only serves within one AWS region, suitable if global latency optimization is not needed. Private: Only accessible within a VPC, not suitable for a public application. Keep other settings at their default values. Figure 5: API Configuration Interface.\nClick Create API to create the API.\nFigure 6: Click Create API Button.\nCheck API Creation Status\nAfter clicking Create API, you will be redirected to the management page for the student API. The interface will display the message: \u0026ldquo;Successfully created REST API ‘student’.\u0026rdquo; If you don\u0026rsquo;t see this message or encounter an error: Check if your AWS account\u0026rsquo;s IAM permissions include apigateway:POST to create APIs. Ensure you have selected REST API and Edge-optimized correctly. In the left menu, select Resources to begin configuring the resources and methods (which will be done in steps 4.4, 4.5, and 4.6). Figure 7: API Management Page for student API after creation.\nImportant Notes Element Details API Name The name student must be entered exactly as it will appear in the Invoke URL (e.g., https://api-id.execute-api.us-east-1.amazonaws.com/prod). Edge-optimized vs Regional Edge-optimized is suitable for this system because the web interface uses CloudFront. The Invoke URL will have the format using CloudFront edge locations. If you need to integrate with a custom domain (e.g., api.system.edu.vn), ensure you configure the domain in API Gateway and CloudFront after the API is created. AWS Region Ensure the region us-east-1 matches with the Lambda functions, DynamoDB studentData table, S3 bucket student-backup-20250706, and SES. If you\u0026rsquo;re using a different region (e.g., us-west-2), you will need to adjust when configuring Lambda integration (steps 4.4, 4.5, 4.6). Error Handling If you encounter an \u0026ldquo;AccessDenied\u0026rdquo; error, check your AWS account IAM permissions. If the API is not showing up, refresh the page or check the AWS region again. Optimization After creating the API, you can add more detailed descriptions in Settings (left menu) or enable API Gateway logging for monitoring: - Go to Settings \u0026gt; CloudWatch Logs \u0026gt; Select Enable CloudWatch Logs and set the log level (e.g., INFO). - This helps debug when integrating with Lambda or the web interface. Early Testing After creating the API, verify that the student API appears in the APIs list and check the Invoke URL after deployment (step 4.8) to ensure the API is ready for integration. Practical Tip: Verify that the student API appears in the APIs list and check the Invoke URL after deployment (step 4.8) to ensure the API is ready for integration.\nConclusion The student REST API has been successfully created in AWS API Gateway with the Edge-optimized endpoint type, ready to configure resources and methods in the next steps.\nNext step: Go to Create API Key to Secure Access to continue!\n"
},
{
	"uri": "//localhost:1313/1-introduction/",
	"title": "Introduction",
	"tags": [],
	"description": "",
	"content": " Explore the future of web development!\nThis workshop will guide you through the journey of building an advanced serverless web application, leveraging the power of AWS to manage student information in a secure, efficient, and cost-effective way.\nIn the context of modern technology, building efficient, flexible, and cost-effective web applications is the primary goal of developers. The workshop \u0026ldquo;Deploying a Serverless Website for Managing Student Information with AWS Services\u0026rdquo; will guide you step by step in developing a serverless website, utilizing the powerful AWS services to manage student information securely and optimally.\nThe application supports:\nEntering and retrieving student data with fields like: Student ID, Full Name, Class, Date of Birth, and Email. Intuitive user interface designed with Tailwind CSS, providing a smooth user experience. Serverless architecture, eliminating the need for server management. Advanced features: Security, email notifications, and automatic backups to meet real-world needs. Benefits of Serverless Applications The serverless architecture of AWS offers outstanding advantages, helping you build a student information management system that is not only efficient but also scalable and maintainable. Here are the key benefits:\n1. Automatic Scaling AWS Lambda automatically adjusts resources based on traffic, ensuring smooth application performance even during traffic spikes.\nReal-world example: When hundreds of students access the system simultaneously to view or update their information, Lambda automatically allocates resources without requiring your intervention, helping to:\nOptimize operating costs. Prevent resource waste during periods of low usage. 2. Optimal Security API Gateway uses API Keys to authenticate requests, ensuring that only authorized users can access the data. The system integrates IAM (Identity and Access Management) with distinct roles such as:\nLambdaGetStudentRole LambdaInsertStudentRole DynamoDBBackupRole Real-world example: The Lambda function that fetches data is only allowed to read from DynamoDB, while the backup function only writes to S3, adhering to the least privilege principle.\nBenefits:\nProtects sensitive data. Reduces the risk of attacks or data breaches. 3. Email Notifications AWS SES (Simple Email Service) provides automatic notifications:\nData saving confirmation: Sends an email containing details like Student ID, Full Name, Class, and Date of Birth when data is saved into DynamoDB. Data backup: Sends an email with a pre-signed URL (expires after 1 hour) when data is backed up to S3. Benefits: Instant system updates, ensuring reliable and professional notifications.\n4. Cost Savings The serverless model charges based on actual resource usage:\nLambda: Charges by execution count and runtime. S3: Charges by storage size. CloudFront: Charges based on data transfer. Real-world example: Ideal for applications with variable traffic, significantly reducing operational costs compared to traditional server models.\n5. High Performance AWS CloudFront, a CDN (Content Delivery Network) service, delivers static content (HTML, JavaScript) from S3 to users worldwide with low latency.\nHow it works: Stores content at Edge Locations close to users.\nReal-world example: Students accessing the site from Vietnam, the US, or Europe will have a smooth, fast experience.\nBenefits: Faster page loading, enhancing user experience.\n6. Automatic Backups The system automatically backs up data from DynamoDB to S3 on a schedule set through EventBridge (default: 7:00 AM +07 daily).\nProcess: The Lambda function BackupDynamoDBAndSendEmail creates a JSON file with all student data, stores it in an S3 bucket, and sends a pre-signed URL (expires after 1 hour).\nReal-world example: Easily recover data after an incident, ensuring data safety.\nBenefits:\nLong-term data protection. Automated backup process, saving time. Workshop Goals This workshop will not only help you deploy a student information management website, but also provide practical knowledge about integrating AWS services into a serverless architecture. You will learn how to:\nGoal Technology Outcome Design a modern web interface Tailwind CSS Intuitive, user-friendly interface Create and secure APIs API Gateway, API Key Secure, easy-to-integrate, and scalable API Process and store data Lambda, DynamoDB Efficient, reliable data management Send email notifications SES Instant, professional notifications Distribute content globally CloudFront Fast access, low latency from all regions Automate data backup S3, EventBridge Safe, easily recoverable data Monitor system activity CloudWatch System performance monitoring and optimization Start Your Journey! By completing this workshop, you will gain:\nA fully functional serverless application, ready for real-world use. In-depth skills to develop serverless applications with AWS. Confidence in integrating cloud services into personal or business projects. Ready to join?\nHead over to Preparation Steps to explore the detailed setup process!\n"
},
{
	"uri": "//localhost:1313/6-configuring-s3-buckets/6.1-creating-a-new-s3-bucket/",
	"title": "Session Management",
	"tags": [],
	"description": "",
	"content": "Work with Amazon System Manager - Session Manager Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon System Manager - Session Manager . Perform creating public and private instance connections.\nContent Introduction Preparation Connect to EC2 instance Manage session logs Port Forwarding Clean up resources "
},
{
	"uri": "//localhost:1313/7-deploying-cloudfront/7.1-creating-a-cloudfront-distribution/",
	"title": "Website Serverless",
	"tags": [],
	"description": "",
	"content": "Work with Amazon System Manager - Session Manager Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon System Manager - Session Manager . Perform creating public and private instance connections.\nContent Introduction Preparation Connect to EC2 instance Manage session logs Port Forwarding Clean up resources "
},
{
	"uri": "//localhost:1313/8-setting-up-system-backup/8.1-modifying-backup-lambda-configuration/",
	"title": "Website Serverless",
	"tags": [],
	"description": "",
	"content": "Work with Amazon System Manager - Session Manager Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon System Manager - Session Manager . Perform creating public and private instance connections.\nContent Introduction Preparation Connect to EC2 instance Manage session logs Port Forwarding Clean up resources "
},
{
	"uri": "//localhost:1313/",
	"title": "Website Serverless",
	"tags": [],
	"description": "",
	"content": "Work with Amazon System Manager - Session Manager Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon System Manager - Session Manager . Perform creating public and private instance connections.\nContent Introduction Preparation Connect to EC2 instance Manage session logs Port Forwarding Clean up resources "
},
{
	"uri": "//localhost:1313/3-creating-lambda-functions/3.2-create-the-insertstudentdata-function/",
	"title": "Configure Lambda Function insertStudentData",
	"tags": [],
	"description": "",
	"content": " Objective: Create and configure the Lambda function insertStudentData to receive student information from the web interface, store it in the DynamoDB studentData table, and send a confirmation email via SES. This function processes the data for fields Student ID (studentid), Full Name (name), Class (class), Date of Birth (birthdate), and Email (email), while checking for validity and duplicates before saving. The function uses Python 3.13, architecture x86_64, and assigns the IAM role LambdaInsertStudentRole (corrected from LambdaGetStudentRole in the requirements). The function will return a JSON response for integration with the web interface via API Gateway.\nOverview of the insertStudentData Function The insertStudentData function performs the following tasks:\nReceives data from event['body'] (sent from the web interface via API Gateway). Validates the input data (ensuring all required fields are provided). Checks for duplicate studentid using the GetItem operation to avoid storing duplicate data. Saves the data to the studentData table using the PutItem operation. Sends a confirmation email via SES with detailed content (student ID, full name, class, date of birth). Logs details to CloudWatch for monitoring and debugging. Returns a JSON response with the CORS header (Access-Control-Allow-Origin: '*') to support the web interface. Initial Requirements You need to complete the preparation steps in section 2 (IAM Role LambdaInsertStudentRole, DynamoDB studentData table, SES email verification) before creating the function. Ensure your AWS account is ready and the AWS region is us-east-1.\nDetailed Steps Access AWS Management Console\nOpen your browser and log in to the AWS Management Console with your AWS account.\nIn the search bar at the top, type Lambda and select AWS Lambda to enter the management interface.\nEnsure you are working in the primary AWS region (e.g., us-east-1), check the region in the top-right corner of the AWS Console. This region should match the studentData DynamoDB table and SES.\nFigure 1: AWS Console interface with the Lambda search bar.\nNavigate to the Functions Section\nIn the AWS Lambda interface, look at the left-hand navigation menu.\nSelect Functions to see the list of existing Lambda functions. If no functions have been created, the list will be empty.\nFigure 2: Navigation menu with the Functions option.\nStart the Create Function Process\nIn the Functions interface, click the Create function button in the top-right corner to start configuring a new function.\nFigure 3: Create function button in the Functions interface.\nConfigure Basic Function Information\nIn the Function type section, select Author from scratch to write your own code for the function. In the Function name field, enter insertStudentData. This name will be used when integrating with API Gateway. In the Runtime section, select Python 3.13 (the latest required Python version). If Python 3.13 is not available, select the latest supported version (e.g., Python 3.12 or 3.11). In the Architecture section, select x86_64 to ensure compatibility with the standard architecture. Figure 4: Basic function configuration interface.\nIn the Permissions section, select Use an existing role.\nIn the role list, select LambdaInsertStudentRole (created in section 2.2). Important note: The initial requirement specified LambdaGetStudentRole, but this role is not suitable as it lacks the dynamodb:PutItem and ses:SendEmail permissions. The LambdaInsertStudentRole includes AWSLambdaBasicExecutionRole, AmazonDynamoDBReadOnlyAccess, AmazonSESFullAccess, AmazonS3FullAccess, and CloudFrontFullAccess, but AmazonDynamoDBReadOnlyAccess does not support PutItem. You need to replace it with AmazonDynamoDBFullAccess or a custom policy (see Notes). Keep other settings at their default values and click Create function to create the function.\nFigure 5: Select LambdaInsertStudentRole and click Create function.\nCheck Function Creation Status\nAfter clicking Create function, you will be redirected to the insertStudentData function details page.\nThe interface will display a message like: \u0026ldquo;Successfully created the function insertStudentData. You can now change its code and configuration. To invoke your function with a test event, choose Test.\u0026rdquo;\nIf you do not see this message or encounter an error, check that the LambdaInsertStudentRole exists and that your AWS account has the lambda:CreateFunction permission.\nFigure 6: Function details page after creating insertStudentData.\nConfigure Source Code\nIn the function details page for insertStudentData, go to the Code tab, scroll down to the Code source section. In the lambda_function.py file, delete the default code and paste the following: import json import boto3 import logging # Set up logging logger = logging.getLogger() logger.setLevel(logging.INFO) # Initialize DynamoDB and SES clients dynamodb = boto3.resource(\u0026#39;dynamodb\u0026#39;) table = dynamodb.Table(\u0026#39;studentData\u0026#39;) ses = boto3.client(\u0026#39;ses\u0026#39;, region_name=\u0026#39;us-east-1\u0026#39;) def lambda_handler(event, context): logger.info(\u0026#34;Received event: %s\u0026#34;, json.dumps(event)) # Process request body try: if isinstance(event.get(\u0026#39;body\u0026#39;), str): body = json.loads(event[\u0026#39;body\u0026#39;]) elif isinstance(event.get(\u0026#39;body\u0026#39;), dict): body = event[\u0026#39;body\u0026#39;] else: body = {} except Exception as e: logger.error(\u0026#34;Error parsing JSON: %s\u0026#34;, str(e)) return _response(400, \u0026#34;Invalid data sent.\u0026#34;) # Extract fields student_id = body.get(\u0026#39;studentid\u0026#39;) name = body.get(\u0026#39;name\u0026#39;) student_class = body.get(\u0026#39;class\u0026#39;) birthdate = body.get(\u0026#39;birthdate\u0026#39;) email = body.get(\u0026#39;email\u0026#39;) # Validate input data if not all([student_id, name, student_class, birthdate, email]): logger.error(\u0026#34;Missing fields: studentid=%s, name=%s, class=%s, birthdate=%s, email=%s\u0026#34;, student_id, name, student_class, birthdate, email) return _response(400, \u0026#34;Missing required student information.\u0026#34;) # Check for duplicate student ID try: existing = table.get_item(Key={\u0026#39;studentid\u0026#39;: student_id}) if \u0026#39;Item\u0026#39; in existing: logger.error(\u0026#34;Student ID %s already exists\u0026#34;, student_id) return _response(409, f\u0026#34;Student ID \u0026#39;{student_id}\u0026#39; already exists.\u0026#34;) except Exception as e: logger.error(\u0026#34;Error checking student ID: %s\u0026#34;, str(e)) return _response(500, \u0026#34;Error checking data.\u0026#34;) # Save data to DynamoDB try: table.put_item( Item={ \u0026#39;studentid\u0026#39;: student_id, \u0026#39;name\u0026#39;: name, \u0026#39;class\u0026#39;: student_class, \u0026#39;birthdate\u0026#39;: birthdate, \u0026#39;email\u0026#39;: email } ) logger.info(\u0026#34;Successfully saved data for studentid: %s\u0026#34;, student_id) except Exception as e: logger.error(\u0026#34;Error saving to DynamoDB: %s\u0026#34;, str(e)) return _response(500, \u0026#34;Error saving data to the system.\u0026#34;) # Send confirmation email email_error = None try: ses.send_email( Source=\u0026#39;baothangvip@gmail.com\u0026#39;, Destination={\u0026#39;ToAddresses\u0026#39;: [email]}, Message={ \u0026#39;Subject\u0026#39;: {\u0026#39;Data\u0026#39;: \u0026#39;Student Data Saved\u0026#39;}, \u0026#39;Body\u0026#39;: { \u0026#39;Text\u0026#39;: { \u0026#39;Data\u0026#39;: ( f\u0026#39;📢 STUDENT MANAGEMENT SYSTEM NOTIFICATION\\n\\n\u0026#39; f\u0026#39;Hello {name},\\n\\n\u0026#39; f\u0026#39;✅ Your student information has been successfully saved to the system.\\n\\n\u0026#39; f\u0026#39;🔹 Student ID: {student_id}\\n\u0026#39; f\u0026#39;🔹 Full Name: {name}\\n\u0026#39; f\u0026#39;🔹 Class: {student_class}\\n\u0026#39; f\u0026#39;🔹 Date of Birth: {birthdate}\\n\\n\u0026#39; f\u0026#39;📬 Please keep this email for reference.\\n\\n\u0026#39; f\u0026#39;Best regards,\\n\u0026#39; f\u0026#39;📘 Student Management System\\n\u0026#39; f\u0026#39;📧 Email: hutech@system.edu.vn\u0026#39; ) } } } ) logger.info(\u0026#34;Successfully sent email to: %s\u0026#34;, email) except Exception as e: email_error = str(e) logger.error(\u0026#34;Error sending email to %s: %s\u0026#34;, email, email_error) # Return result if email_error: return _response(200, f\u0026#34;Student data saved, but email to {email} failed: {email_error}\u0026#34;) return _response(200, \u0026#34;Student data saved and confirmation email sent!\u0026#34;) # Helper function to return response def _response(status_code, message): return { \u0026#39;statusCode\u0026#39;: status_code, \u0026#39;body\u0026#39;: json.dumps({\u0026#39;message\u0026#39;: message}), \u0026#39;headers\u0026#39;: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, \u0026#39;Access-Control-Allow-Origin\u0026#39;: \u0026#39;*\u0026#39; } } "
},
{
	"uri": "//localhost:1313/4-creating-a-restful-api/4.2-creating-an-api-key/",
	"title": "Create an API Key to Secure Access",
	"tags": [],
	"description": "",
	"content": " Objective: Create an API Key named StudentApiKey in AWS API Gateway to secure the endpoints of the student API (created in section 4.1), ensuring that only requests from the web interface (running on CloudFront) or clients with valid keys can access. The API Key will be used in the x-api-key header when calling endpoints (GET /students, POST /students, POST /backup) and will be linked to a Usage Plan (section 4.3) to manage access limits.\nOverview of API Key in API Gateway An API Key is a string used to authenticate requests sent to API Gateway, preventing unauthorized access. The API Key is sent in the x-api-key header of each HTTP request (e.g., GET https://api-id.execute-api.us-east-1.amazonaws.com/prod/students). In this system, StudentApiKey will secure the endpoints integrated with Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail). The API Key will be integrated into the web interface (using Tailwind CSS, running on CloudFront) to safely call the API. Prerequisites You need to complete section 4.1 (create the student API) and section 3 (create Lambda functions getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, DynamoDB table studentData, S3 bucket student-backup-20250706, SES email verification). Ensure your AWS account is set up, and the AWS region is us-east-1.\nDetailed Steps Access the AWS Management Console\nOpen your browser and log in to the AWS Management Console with your AWS account.\nIn the search bar at the top, type API Gateway and select the Amazon API Gateway service to access the management interface.\nCheck the AWS region: Make sure you are working in the primary AWS region (e.g., us-east-1), and check the region at the top right corner of the AWS Console. This region should match the student API (created in section 4.1) and Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail).\nFigure 1: AWS Console Interface with API Gateway Search Bar.\nNavigate to the API Keys Section\nIn the main Amazon API Gateway interface, look at the left navigation menu.\nSelect API Keys to view the list of existing API Keys. If you haven\u0026rsquo;t created any key, the list will be empty.\nThe interface will show options to create or manage API Keys.\nFigure 2: Navigation Menu with API Keys Option.\nInitiate the API Key Creation Process\nIn the API Keys interface, click the Create API Key button at the top right to start creating a new key.\nFigure 3: Create API Key Button in the API Keys Interface.\nConfigure the API Key\nIn the Create API Key section:\nName: Enter StudentApiKey exactly. This name helps you easily identify the key when linking it with the Usage Plan. Description: Enter API Key to secure access to StudentManagementAPI (or a similar description for clarity). API Key: Select Auto Generate to have AWS create a random string, ensuring security. Note: You can enter a custom key, but Auto Generate is recommended to avoid easily guessable keys. Enabled: Ensure this option is selected so the key can be used immediately after creation. Click Save to create the API Key.\nFigure 4: API Key Configuration Interface.\nCheck the Status and Copy the API Key\nAfter clicking Save, you will see the message: \u0026ldquo;Successfully created API Key ‘StudentApiKey’.\u0026rdquo;\nIn the API Keys list, select StudentApiKey to view details.\nClick Show next to API Key to display the key value (e.g., xxxxxxxxxxxxxxxxxxxx).\nCopy the API Key:\nCopy the key value and store it safely (e.g., in a local security file, AWS Secrets Manager, or a password manager). Important Note: The API Key is shown only once immediately after creation. If lost, you must create a new key and update it in the Usage Plan (section 4.3) and the web interface. This API Key will be used in the web interface to call the endpoints (GET /students, POST /students, POST /backup) by adding it in the x-api-key header.\nFigure 5: Success Message and API Key Details.\nImportant Notes Element Details API Key Security Do not embed the API Key directly in the JavaScript of the web interface (running on CloudFront). Instead, use environment variables or AWS Secrets Manager to securely store and retrieve the key. - Go to AWS Secrets Manager \u0026gt; Store a new secret \u0026gt; Choose Other type of secret \u0026gt; Enter the API Key. - Name the secret (e.g., student-api-key) and retrieve it in the web interface code via the AWS SDK. AWS Region The API Key operates across the entire AWS account, not limited by region. However, ensure that the student API and Lambda functions are in the same region (us-east-1) to avoid integration issues. Error Handling If you do not see the success message or encounter an \u0026ldquo;AccessDenied\u0026rdquo; error: - Check if your AWS account IAM permissions include apigateway:POST to create API Keys. - Ensure you are in the correct AWS region (us-east-1). If the API Key does not show up, refresh the page or check the API Keys list again. Optimization - After creating the key, link the API Key with a Usage Plan (section 4.3) to enforce access limits (rate limiting, quota). - Consider using AWS WAF with API Gateway for additional protection against attacks (e.g., DDoS). - If you need multiple API Keys (for different clients), create additional keys and manage them within the same Usage Plan. Early Testing - After creating the API Key, verify that it appears in the API Keys list and that the key value is safely copied. - Test the key by making a request to the API (after configuring methods and deploying in steps 4.4–4.8) using Postman or curl: curl -X GET https://api-id.execute-api.us-east-1.amazonaws.com/prod/students -H \u0026quot;x-api-key: xxxxxxxxxxxxxxxxxxxx\u0026quot; Web Interface Integration Testing - After creating the API Key, integrate the key into the web interface (using Tailwind CSS, running on CloudFront) to call the endpoints. - Ensure that the API Key is sent in the x-api-key header when calling the endpoints (GET /students, POST /students, POST /backup). Practical Tip: Securely store the API Key immediately after creation and test the integration with a test request (using Postman or curl) before embedding it into the web interface.\nConclusion The StudentApiKey has been successfully created in AWS API Gateway, ready to be linked with a Usage Plan and secure the endpoints of the student API.\nNext step: Go to Set Up Usage Plan (Access Plan) to continue!\n"
},
{
	"uri": "//localhost:1313/2-preparation-steps/2.1-create-iam-role-for-lambda-get/",
	"title": "Create IAM Role for Lambda Get",
	"tags": [],
	"description": "",
	"content": " Objective: Create the IAM role LambdaGetStudentRole for the Lambda function getStudentData, granting permissions to read data from the DynamoDB table studentData, log data to CloudWatch, and support potential interactions with S3 and CloudFront.\nThe function getStudentData performs a Scan operation to retrieve all student data (Student ID, Full Name, Class, Date of Birth, Email) from the DynamoDB table studentData. This role needs to include:\nPermissions to log data to CloudWatch (AWSLambdaBasicExecutionRole). Permissions to read data from DynamoDB (AmazonDynamoDBReadOnlyAccess). Permissions for S3 and CloudFront (AmazonS3FullAccess, CloudFrontFullAccess) for potential future features. Note: AmazonS3FullAccess and CloudFrontFullAccess are not currently used in the code, but are retained for future functionalities (e.g., saving files to S3 or managing CloudFront).\nDetailed Steps Below are the detailed steps to create the IAM role LambdaGetStudentRole:\n1. Access the AWS Management Console Open your browser and log in to the AWS Management Console with your AWS account.\nIn the search bar at the top of the page, type IAM and select Identity and Access Management (IAM).\nFigure 1: AWS Console interface with the IAM search bar.\n2. Navigate to the Roles Section In the IAM interface, find the left-hand navigation menu.\nSelect Roles to view the list of IAM roles. If no roles exist, the list will be empty.\nFigure 2: Navigation menu with the Roles option.\n3. Start the Role Creation Process In the Roles interface, click the Create Role button in the top-right corner.\nFigure 3: Create Role button in the Roles interface.\n4. Choose Trusted Entity Type In the Select trusted entity section, choose AWS Service to specify that the role is for an AWS service.\nIn the Use case section, select Lambda from the list of services.\nClick Next to move to the permission configuration step.\nFigure 4: Choosing AWS Service and Lambda in Use case.\n5. Grant Permissions to the Role In the Permissions section, add the following four policies:\nAWSLambdaBasicExecutionRole:\nType AWSLambdaBasicExecutionRole in the search bar. Select the AWSLambdaBasicExecutionRole policy. Description: Allows Lambda functions to log to CloudWatch for monitoring and debugging.\nFigure 5: Selecting the AWSLambdaBasicExecutionRole policy.\nAmazonDynamoDBReadOnlyAccess:\nType AmazonDynamoDBReadOnlyAccess in the search bar. Select the AmazonDynamoDBReadOnlyAccess policy. Description: Grants read-only access to DynamoDB, supporting operations like Scan or GetItem.\nFigure 6: Selecting the AmazonDynamoDBReadOnlyAccess policy.\nAmazonS3FullAccess:\nType AmazonS3FullAccess in the search bar. Select the AmazonS3FullAccess policy. Description: Grants read, write, and manage S3 buckets for potential future features (e.g., storing additional files).\nFigure 7: Selecting the AmazonS3FullAccess policy.\nCloudFrontFullAccess:\nType CloudFrontFullAccess in the search bar. Select the CloudFrontFullAccess policy. Description: Grants permission to manage CloudFront distributions for potential future features.\nFigure 8: Selecting the CloudFrontFullAccess policy.\nVerify the list of Permissions policies to ensure it includes:\nAWSLambdaBasicExecutionRole AmazonDynamoDBReadOnlyAccess AmazonS3FullAccess CloudFrontFullAccess Click Next.\n6. Name and Review the Role In the Role details section:\nRole Name: Enter LambdaGetStudentRole. Note: The name must match exactly with the Lambda function configuration for getStudentData.\nDescription (optional): Enter a description, e.g., \u0026ldquo;IAM role for Lambda function getStudentData, granting read access to DynamoDB, CloudWatch logging, and supporting S3/CloudFront.\u0026rdquo; Figure 9: Enter role name and description.\nDouble-check:\nTrusted entity: AWS Service (Lambda). Permissions: AWSLambdaBasicExecutionRole, AmazonDynamoDBReadOnlyAccess, AmazonS3FullAccess, CloudFrontFullAccess. Click Create Role.\nFigure 10: Create Role button to confirm.\n7. Check Role Creation Status After clicking Create Role, you will return to the Roles list.\nFind the LambdaGetStudentRole role. If successful, you should see the message: \u0026ldquo;Role LambdaGetStudentRole created\u0026rdquo;.\nClick on LambdaGetStudentRole to view details:\nARN: Record the ARN (e.g., arn:aws:iam::your-account-id:role/LambdaGetStudentRole) to use when configuring the Lambda function. Policies: Verify the inclusion of AWSLambdaBasicExecutionRole, AmazonDynamoDBReadOnlyAccess, AmazonS3FullAccess, CloudFrontFullAccess. If the role does not appear, refresh the page or double-check the steps.\nFigure 11: Role details for LambdaGetStudentRole with ARN and policies.\nImportant Notes Factor Details Role Name Must be LambdaGetStudentRole (case-sensitive) to match the Lambda function. Incorrect names will cause execution errors. S3 and CloudFront AmazonS3FullAccess and CloudFrontFullAccess are not currently used, but kept for future functionality (e.g., storing files in S3 or managing CloudFront). Delete if unnecessary to comply with least privilege. Security Optimization Consider creating a custom policy instead of AmazonDynamoDBReadOnlyAccess to restrict access specifically to the studentData table. Check Early Record the ARN and verify the role in IAM before configuring the Lambda function to ensure proper setup. Error Handling If you encounter an \u0026ldquo;Access Denied\u0026rdquo; error, check AWS account permissions (iam:CreateRole) or contact your administrator. Practical Tip: Always verify the ARN and policies immediately after creating the role to confirm configuration before integrating with Lambda.\nConclusion The IAM role LambdaGetStudentRole ensures that the Lambda function getStudentData has permissions to read data from DynamoDB, log data to CloudWatch, and support potential extensions with S3 and CloudFront. This role is now ready to be integrated into the Lambda function in the next steps.\nNext Step: Proceed to Create IAM Role for Lambda Post to set up the role for the function that stores student data!\n"
},
{
	"uri": "//localhost:1313/2-preparation-steps/2.2-create-iam-role-for-lambda-post/",
	"title": "Create IAM Role for Lambda Post",
	"tags": [],
	"description": "",
	"content": " Objective: Create the IAM role LambdaInsertStudentRole for the Lambda function insertStudentData, granting permissions to write data to the DynamoDB table studentData, send emails via AWS SES, log data to CloudWatch, and support potential interactions with S3 and CloudFront.\nThe function insertStudentData performs:\nStores student information (Student ID, Full Name, Class, Date of Birth, Email) into the DynamoDB table studentData via the PutItem operation. Sends a confirmation email to the student\u0026rsquo;s email address via AWS SES. This role needs:\nPermissions to log data to CloudWatch (AWSLambdaBasicExecutionRole). Permissions to read and write data to DynamoDB (AmazonDynamoDBFullAccess). Permissions to send email via SES (AmazonSESFullAccess). Permissions for S3 and CloudFront (AmazonS3FullAccess, CloudFrontFullAccess) for potential future features. Note: AmazonS3FullAccess and CloudFrontFullAccess are not currently used in the code, but are retained for future functionalities (e.g., saving files to S3 or managing CloudFront).\nDetailed Steps Below are the detailed steps to create the IAM role LambdaInsertStudentRole:\n1. Access the AWS Management Console Open your browser and log in to the AWS Management Console with your AWS account.\nIn the search bar at the top of the page, type IAM and select Identity and Access Management (IAM).\nEnsure you are in the correct AWS region (e.g., us-east-1), check in the top right corner.\nFigure 1: AWS Console interface with the IAM search bar.\n2. Navigate to the Roles Section In the IAM interface, find the left-hand navigation menu.\nSelect Roles to view the list of IAM roles. If no roles exist, the list will be empty.\nFigure 2: Navigation menu with the Roles option.\n3. Start the Role Creation Process In the Roles interface, click the Create Role button in the top-right corner.\nFigure 3: Create Role button in the Roles interface.\n4. Choose Trusted Entity Type In the Select trusted entity section, choose AWS Service to specify that the role is for an AWS service.\nIn the Use case section, select Lambda from the list of services.\nClick Next to move to the permission configuration step.\nFigure 4: Choosing AWS Service and Lambda in Use case.\n5. Grant Permissions to the Role In the Permissions section, add the following policies:\nAWSLambdaBasicExecutionRole:\nType AWSLambdaBasicExecutionRole in the search bar. Select the AWSLambdaBasicExecutionRole policy. Description: Allows the Lambda function to log to CloudWatch for monitoring and debugging.\nFigure 5: Selecting the AWSLambdaBasicExecutionRole policy.\nAmazonDynamoDBFullAccess:\nType AmazonDynamoDBFullAccess in the search bar. Select the AmazonDynamoDBFullAccess policy. Description: Grants read and write access to DynamoDB, including the PutItem operation required for the insertStudentData function.\nFigure 6: Selecting the AmazonDynamoDBFullAccess policy.\nAmazonSESFullAccess:\nType AmazonSESFullAccess in the search bar. Select the AmazonSESFullAccess policy. Description: Grants permission to send emails via SES to send confirmation notifications (e.g., to nguyentribaothang@gmail.com).\nFigure 7: Selecting the AmazonSESFullAccess policy.\nAmazonS3FullAccess (optional):\nType AmazonS3FullAccess in the search bar. Select the AmazonS3FullAccess policy. Description: Grants read, write, and manage S3 buckets for potential future features.\nFigure 8: Selecting the AmazonS3FullAccess policy.\nCloudFrontFullAccess (optional):\nType CloudFrontFullAccess in the search bar. Select the CloudFrontFullAccess policy. Description: Grants permission to manage CloudFront distributions for potential future features.\nFigure 9: Selecting the CloudFrontFullAccess policy.\nVerify the list of Permissions policies to ensure it includes:\nAWSLambdaBasicExecutionRole AmazonDynamoDBFullAccess AmazonSESFullAccess AmazonS3FullAccess CloudFrontFullAccess Click Next.\n6. Name and Review the Role In the Role details section:\nRole Name: Enter LambdaInsertStudentRole. Note: The name must match exactly with the Lambda function configuration for insertStudentData.\nDescription (optional): Enter a description, e.g., \u0026ldquo;IAM role for Lambda function insertStudentData, granting write access to DynamoDB, sending emails via SES, logging to CloudWatch, and supporting S3/CloudFront.\u0026rdquo; Figure 10: Enter role name and description.\nDouble-check:\nTrusted entity: AWS Service (Lambda). Permissions: AWSLambdaBasicExecutionRole, AmazonDynamoDBFullAccess, AmazonSESFullAccess, AmazonS3FullAccess, CloudFrontFullAccess. Click Create Role.\n7. Check Role Creation Status After clicking Create Role, you will return to the Roles list.\nFigure 11: Click Create Role to finalize the creation.\nFind the LambdaInsertStudentRole role. If successful, you should see the message: \u0026ldquo;Role LambdaInsertStudentRole created\u0026rdquo;.\nFigure 12: Success message for the LambdaInsertStudentRole creation.\nClick on LambdaInsertStudentRole to view details:\nARN: Record the ARN (e.g., arn:aws:iam::your-account-id:role/LambdaInsertStudentRole) to use when configuring the Lambda function. Policies: Verify that the correct policies are attached. If the role does not appear, refresh the page or check the steps again.\nImportant Notes Factor Details Role Name Must be LambdaInsertStudentRole (case-sensitive) to match the Lambda function. Incorrect names will cause execution errors. DynamoDB Permissions AmazonDynamoDBReadOnlyAccess does not support PutItem. Use AmazonDynamoDBFullAccess to allow PutItem on the studentData table. S3 and CloudFront AmazonS3FullAccess and CloudFrontFullAccess are not currently used, but are retained for potential future functionalities (e.g., saving files to S3 or managing CloudFront). Delete if unnecessary to comply with least privilege. Check Early Record the ARN and verify the role in IAM before configuring the Lambda function to ensure proper setup. Error Handling If you encounter an \u0026ldquo;Access Denied\u0026rdquo; error, check AWS account permissions (iam:CreateRole, iam:AttachRolePolicy) or contact your administrator. If the function reports AccessDenied, check the DynamoDB policy. Use CloudTrail or IAM Access Advisor to pinpoint the issue. AWS Region Ensure the AWS region (e.g., us-east-1) is consistent with other services (DynamoDB, Lambda, SES). Check in the top right corner of the AWS Console. Practical Tip: Always verify the role and ARN immediately after creation to confirm correct configuration before integrating with the Lambda function.\nConclusion The IAM role LambdaInsertStudentRole ensures that the Lambda function insertStudentData has the necessary permissions to write data to DynamoDB, send emails via SES, and log data to CloudWatch, while supporting future extensions with S3 and CloudFront. With AmazonDynamoDBFullAccess, the function operates efficiently and securely in a serverless application.\nNext Step: Proceed to Create IAM Role for DynamoDB Backup to set up the role for data backup!\n"
},
{
	"uri": "//localhost:1313/2-preparation-steps/",
	"title": "Preparation Steps",
	"tags": [],
	"description": "",
	"content": " Objective: Set up the necessary environment to deploy a serverless application for managing student information, including an AWS account, IAM roles, a DynamoDB table, and the SES service.\nTo begin the Deploying a Serverless Website for Managing Student Information with AWS workshop, you need to prepare the basic components to ensure smooth integration with AWS services such as Lambda, DynamoDB, API Gateway, S3, CloudFront, and SES.\nInitial Requirements You need an AWS account to perform the steps in this workshop. If you don\u0026rsquo;t have one, please create an account before proceeding.\nTo learn how to create an AWS account, refer to the detailed guide here:\nHow to Create an AWS Account Preparation Steps Below are the specific steps to prepare the environment for the serverless application:\nStep Content Description 2.1 Create IAM Role for Lambda Get Create an IAM role for the Lambda function to handle retrieving student data from DynamoDB, ensuring secure and minimal access. 2.2 Create IAM Role for Lambda Post Create an IAM role for the Lambda function to handle storing student data in DynamoDB, adhering to the principle of least privilege. 2.3 Create IAM Role for DynamoDB Backup Create an IAM role for the Lambda function to back up data from DynamoDB to S3, including permissions to write to S3 and send emails via SES. 2.4 Create Table in DynamoDB Set up the studentData table with studentid (String) as the primary key to store student information (Student ID, Full Name, Class, Date of Birth, Email). 2.5 Configure SES Configure AWS SES to send confirmation emails when saving data and backup notifications with a pre-signed URL. Note: Follow the steps in order to ensure the environment is set up correctly. Each step will be detailed in the corresponding documents.\nConclusion After completing these preparation steps, you will have:\nA ready AWS account to deploy the application. The IAM Roles configured to ensure security and minimal access. The studentData table in DynamoDB to store student data. The SES service set up to send email notifications. Ready to continue?\nProceed to Create IAM Role for Lambda Get to start setting up the IAM role for the first Lambda function!\n"
},
{
	"uri": "//localhost:1313/6-configuring-s3-buckets/6.2-uploading-static-assets-to-s3/",
	"title": "Session Management",
	"tags": [],
	"description": "",
	"content": "Work with Amazon System Manager - Session Manager Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon System Manager - Session Manager . Perform creating public and private instance connections.\nContent Introduction Preparation Connect to EC2 instance Manage session logs Port Forwarding Clean up resources "
},
{
	"uri": "//localhost:1313/7-deploying-cloudfront/7.2-configuring-default-root-object/",
	"title": "Website Serverless",
	"tags": [],
	"description": "",
	"content": "Work with Amazon System Manager - Session Manager Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon System Manager - Session Manager . Perform creating public and private instance connections.\nContent Introduction Preparation Connect to EC2 instance Manage session logs Port Forwarding Clean up resources "
},
{
	"uri": "//localhost:1313/3-creating-lambda-functions/3.3-create-the-backupdynamodbandsendemail-function/",
	"title": "Configure Lambda Function BackupDynamoDBAndSendEmail",
	"tags": [],
	"description": "",
	"content": " Objective: Create and configure the BackupDynamoDBAndSendEmail Lambda function to back up all data from the DynamoDB studentData table into an S3 bucket as a JSON file, create a pre-signed URL, and send a notification email containing the download link via SES. The function uses Python 3.13, architecture x86_64, and is assigned the IAM role DynamoDBBackupRole (created in step 2.3). The function will return a JSON response to integrate with other systems (if needed) and log to CloudWatch for monitoring.\nOverview of the BackupDynamoDBAndSendEmail Function The BackupDynamoDBAndSendEmail function performs the following tasks:\nReads all data from the studentData table (fields studentid, name, class, birthdate, email) using the Scan operation. Temporarily stores the data as a JSON file in the /tmp directory of the Lambda environment. Uploads the JSON file to an S3 bucket with a timestamped filename (e.g., backups/backup-20250707-0409.json). Creates a pre-signed URL (expires in 1 hour) to access the backup file. Sends a notification email via SES with a beautiful HTML content, containing the download link and expiration time. Returns a JSON response confirming the backup status and email sending. Prerequisites You need to complete the preparation steps in section 2 (IAM Role DynamoDBBackupRole, DynamoDB studentData table, SES email verification, S3 bucket student-backup-20250706). Ensure your AWS account is set up and the AWS region is us-east-1.\nDetailed Steps Access AWS Management Console\nOpen your browser and log in to the AWS Management Console with your AWS account.\nIn the top search bar, type Lambda and select AWS Lambda to access the management interface.\nEnsure you are working in the correct AWS region (e.g., us-east-1), check the region in the top-right corner of the AWS Console. This region must match the DynamoDB studentData table, the S3 student-backup-20250706 bucket, and SES.\nFigure 1: AWS Console Interface with Lambda search bar.\nNavigate to the Functions Section\nIn the AWS Lambda main interface, look at the left navigation menu.\nSelect Functions to see the list of existing Lambda functions. If no functions are created, the list will be empty.\nFigure 2: Navigation menu with Functions option.\nStart Creating the Function\nIn the Functions interface, click the Create function button in the top-right corner to start creating a new function.\nFigure 3: Create function button in the Functions interface.\nConfigure Basic Function Information\nIn the Function type section, select Author from scratch to write your own code.\nIn the Function name section, enter BackupDynamoDBAndSendEmail. This name will be used when integrating with other services (e.g., CloudWatch Events/EventBridge for automatic backups).\nIn the Runtime section, select Python 3.13 (the required latest Python version). If Python 3.13 is unavailable, select the latest supported version (e.g., Python 3.12 or 3.11).\nIn the Architecture section, select x86_64 to ensure compatibility with the standard architecture.\nFigure 4: Basic function configuration interface.\nIn the Permissions section, select Use an existing role.\nFrom the list of roles, choose DynamoDBBackupRole (created in section 2.3). This role includes the policies AWSLambdaBasicExecutionRole, AmazonDynamoDBReadOnlyAccess, AmazonS3FullAccess, AmazonSESFullAccess, and CloudFrontFullAccess. Note: CloudFrontFullAccess is not used in the current code but is retained as per previous instructions. Keep the other settings as default and click Create function to create the function.\nFigure 5: Select DynamoDBBackupRole and click Create function.\nCheck Function Creation Status\nAfter clicking Create function, you will be directed to the detail page for the BackupDynamoDBAndSendEmail function. The interface will show a message like: \u0026ldquo;Successfully created the function BackupDynamoDBAndSendEmail. You can now change its code and configuration. To invoke your function with a test event, choose Test.\u0026rdquo; If you don’t see the message or encounter an error, verify that the DynamoDBBackupRole exists and that your AWS account has the lambda:CreateFunction permission. Configure the Code\nIn the function details page for BackupDynamoDBAndSendEmail, go to the Code tab and scroll down to the Code source section. Delete the default code in lambda_function.py and paste the following code: import boto3 import datetime import json from botocore.exceptions import ClientError dynamodb = boto3.resource(\u0026#39;dynamodb\u0026#39;) ses = boto3.client(\u0026#39;ses\u0026#39;) s3_client = boto3.client(\u0026#39;s3\u0026#39;) def lambda_handler(event, context): # Access DynamoDB table table = dynamodb.Table(\u0026#39;studentData\u0026#39;) response = table.scan() items = response[\u0026#39;Items\u0026#39;] # Store data in a temporary file in Lambda backup_file = \u0026#39;/tmp/backup.json\u0026#39; with open(backup_file, \u0026#39;w\u0026#39;) as f: json.dump(items, f) # Upload the file to S3 s3_bucket = \u0026#39;student-backup-20250706\u0026#39; # Replace with your actual bucket name s3_key = f\u0026#39;backups/backup-{datetime.datetime.now().strftime(\u0026#34;%Y%m%d-%H%M%S\u0026#34;)}.json\u0026#39; s3_client.upload_file(backup_file, s3_bucket, s3_key) # Create pre-signed URL (expires in 1 hour) presigned_url = s3_client.generate_presigned_url( \u0026#39;get_object\u0026#39;, Params={\u0026#39;Bucket\u0026#39;: s3_bucket, \u0026#39;Key\u0026#39;: s3_key}, ExpiresIn=3600 ) # Create an HTML email sender = \u0026#39;baothangvip@gmail.com\u0026#39; recipient = \u0026#39;nguyentribaothang@gmail.com\u0026#39; subject = \u0026#39;Student Data Backup Notification\u0026#39; expiry_time = (datetime.datetime.now() + datetime.timedelta(hours=1)).strftime(\u0026#39;%Y-%m-%d %H:%M:%S\u0026#39;) html_body = f\u0026#34;\u0026#34;\u0026#34; \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;vi\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;style\u0026gt; body {{ font-family: Arial, sans-serif; color: #333; line-height: 1.6; }} .container {{ max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9f9f9; border-radius: 8px; }} .header {{ background-color: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 8px 8px 0 0; }} .content {{ padding: 20px; background-color: white; border-radius: 0 0 8px 8px; }} .button {{ display: inline-block; padding: 10px 20px; background-color: #4CAF50; color: white !important; text-decoration: none; border-radius: 5px; margin-top: 20px; }} .footer {{ font-size: 12px; color: #777; text-align: center; margin-top: 20px; }} \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;Student Data Backup\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;Dear Customer,\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;The student data has been successfully backed up and stored on AWS S3.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Download the backup file here:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;a href=\u0026#34;{presigned_url}\u0026#34; class=\u0026#34;button\u0026#34;\u0026gt;Download Backup File\u0026lt;/a\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Note:\u0026lt;/strong\u0026gt; This link will expire on {expiry_time}.\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;footer\u0026#34;\u0026gt; \u0026lt;p\u0026gt;This is an automated email. Please do not reply to this email directly.\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; \u0026#34;\u0026#34;\u0026#34; try: response = ses.send_email( Source=sender, Destination={\u0026#39;ToAddresses\u0026#39;: [recipient]}, Message={ \u0026#39;Subject\u0026#39;: {\u0026#39;Data\u0026#39;: subject}, \u0026#39;Body\u0026#39;: { \u0026#39;Html\u0026#39;: {\u0026#39;Data\u0026#39;: html_body}, \u0026#39;Text\u0026#39;: {\u0026#39;Data\u0026#39;: f\u0026#39;Backup file: {presigned_url}\\nExpires at: {expiry_time}\u0026#39;} } } ) print(f\u0026#34;Email sent! Message ID: {response[\u0026#39;MessageId\u0026#39;]}\u0026#34;) except ClientError as e: print(f\u0026#34;Error sending email: {e}\u0026#34;) return { \u0026#39;statusCode\u0026#39;: 500, \u0026#39;body\u0026#39;: json.dumps({\u0026#39;message\u0026#39;: f\u0026#39;Backup successful but email failed: {str(e)}\u0026#39;}) } return { \u0026#39;statusCode\u0026#39;: 200, \u0026#39;body\u0026#39;: json.dumps({\u0026#39;message\u0026#39;: \u0026#39;Backup and email sent successfully!\u0026#39;}) } Explanation of the Improved Code:\nLogging: Added logging to record detailed logs to CloudWatch (INFO and ERROR levels), replacing print for easier monitoring. Pagination Handling: Added a while loop to handle pagination for the Scan operation, ensuring that all data from large tables is fetched. CORS: Added Access-Control-Allow-Origin: '*' header in all responses to integrate with API Gateway. Error Handling: Added try-except blocks for the Scan, file saving, S3 upload, and pre-signed URL creation steps, returning detailed error messages with a 500 status code. AWS Region: Specified region_name='us-east-1' for DynamoDB, S3, and SES to ensure consistency. HTML Email: Kept the beautiful HTML content with inline CSS, but added logging for email sending status. Check and Modify:\nAWS Region: Replace region_name='us-east-1' in the dynamodb, ses, and s3_client initialization lines if you are using another region (e.g., us-west-2). Email: Replace baothangvip@gmail.com (sender) and nguyentribaothang@gmail.com (recipient) with verified SES emails (step 2.5). If SES is in sandbox mode, both emails need to be verified. S3 Bucket: Replace student-backup-20250706 with your actual bucket name (to be created in the next step). Click Deploy to save and deploy the code.\nFigure 6: BackupDynamoDBAndSendEmail code editing interface.\nAfter deployment, the interface will display the message: \u0026ldquo;Successfully updated the function BackupDynamoDBAndSendEmail.\u0026rdquo;\nConfigure Timeout and Memory\nIn the Configuration tab \u0026gt; General configuration, click Edit. Set Timeout: 60 seconds (enough for Scan, file saving, S3 upload, and email sending). Set Memory: 256 MB (to handle large tables and store temporarily in /tmp). Click Save to save the changes. Reason: The Scan operation on large tables and storing files in /tmp may require more resources than getStudentData or insertStudentData. Test the Function\nIn the Test tab, click Create new test event. Name the event (e.g., testBackupDynamoDB). Use the sample JSON (it can be left empty as the function does not require specific input): {} Click Create to save the test event, then click Test to run the function. Check the result: If successful, the function returns: { \u0026#34;statusCode\u0026#34;: 200, \u0026#34;body\u0026#34;: \u0026#34;{\\\u0026#34;message\\\u0026#34;: \\\u0026#34;Backup and email sent successfully!\\\u0026#34;}\u0026#34;, \u0026#34;headers\u0026#34;: { \u0026#34;Content-Type\u0026#34;: \u0026#34;application/json\u0026#34;, \u0026#34;Access-Control-Allow-Origin\u0026#34;: \u0026#34;*\u0026#34; } } Check the student-backup-20250706 bucket in the S3 Console (go to S3 \u0026gt; Buckets \u0026gt; student-backup-20250706 \u0026gt; Objects) to verify the backup file (e.g., backups/backup-20250707-0409.json). Check the recipient\u0026rsquo;s email inbox (nguyentribaothang@gmail.com, including Spam/Junk) to view the notification email with HTML content like: \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;vi\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;style\u0026gt; body { font-family: Arial, sans-serif; color: #333; line-height: 1.6; } .container { max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9f9f9; border-radius: 8px; } .header { background-color: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 8px 8px 0 0; } .content { padding: 20px; background-color: white; border-radius: 0 0 8px 8px; } .button { display: inline-block; padding: 10px 20px; background-color: #4CAF50; color: white !important; text-decoration: none; border-radius: 5px; margin-top: 20px; } .footer { font-size: 12px; color: #777; text-align: center; margin-top: 20px; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;Student Data Backup\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;content\u0026#34;\u0026gt; \u0026lt;p\u0026gt;Dear Customer,\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;The student data has been successfully backed up and stored on AWS S3.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Download the backup file here:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;a href=\u0026#34;[pre-signed-url]\u0026#34; class=\u0026#34;button\u0026#34;\u0026gt;Download Backup File\u0026lt;/a\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Note:\u0026lt;/strong\u0026gt; This link will expire on [expiry_time].\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;footer\u0026#34;\u0026gt; \u0026lt;p\u0026gt;This is an automated email. Please do not reply to this email directly.\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Click the link in the email to verify that the backup file can be downloaded. Check the log in CloudWatch (go to Monitor \u0026gt; Logs \u0026gt; select log group /aws/lambda/BackupDynamoDBAndSendEmail) to view detailed information (number of records, Message ID of the email). If there are errors, check the common issues: \u0026ldquo;AccessDenied\u0026rdquo; (DynamoDB): Check that the DynamoDBBackupRole has the Scan permission. \u0026ldquo;AccessDenied\u0026rdquo; (S3): Check the PutObject permission in AmazonS3FullAccess and ensure the student-backup-20250706 bucket exists. \u0026ldquo;Email address is not verified\u0026rdquo; (SES): Ensure baothangvip@gmail.com and nguyentribaothang@gmail.com are verified in SES. \u0026ldquo;NoSuchBucket\u0026rdquo;: Ensure the student-backup-20250706 bucket has been created (to be set up in the next step). \u0026ldquo;ResourceNotFoundException\u0026rdquo;: Ensure the studentData table exists (step 2.4). Important Notes Factor Details IAM Role The DynamoDBBackupRole (created in step 2.3) is suitable for the function. However, CloudFrontFullAccess is not used. For least privilege, consider removing or replacing it with a custom policy if needed. - Go to IAM \u0026gt; Policies \u0026gt; Create Policy. - Choose JSON, paste the policy above (replace student-backup-20250706 with the actual bucket name). - Name it (e.g., S3BackupStudentData) and attach it to DynamoDBBackupRole. SES Sandbox Ensure both sender (baothangvip@gmail.com) and recipient (nguyentribaothang@gmail.com) emails are verified in SES (step 2.5). If SES is in sandbox mode, both emails must be verified. Exit the sandbox to send emails to any address: - Go to SES \u0026gt; Account dashboard \u0026gt; Request production access. - Fill in the form as instructed in step 2.5. If not out of sandbox, try using the same verified email for both sender and recipient. S3 Bucket Ensure the student-backup-20250706 bucket is created (to be configured in the next step). If not, the function will throw a NoSuchBucket error. Ensure the bucket has a backups/ folder, or the code will create it (if PutObject permission is granted). CORS The Access-Control-Allow-Origin: '*' header is added to support integration with API Gateway (if the function is called from a web interface). Ensure CORS is configured in API Gateway (to be discussed in later steps). AWS Region Ensure the region in the code (us-east-1) matches the region of the studentData table, the S3 bucket, and SES. If using another region (e.g., us-west-2), update region_name in the dynamodb, ses, and s3_client initialization lines. Error Handling If the function reports errors, check the logs in CloudWatch (go to Monitor \u0026gt; Logs \u0026gt; select the log group /aws/lambda/BackupDynamoDBAndSendEmail). Common errors: - \u0026ldquo;AccessDenied\u0026rdquo; (DynamoDB): Missing Scan permission. - \u0026ldquo;AccessDenied\u0026rdquo; (S3): Missing PutObject permission or the bucket does not exist. - \u0026ldquo;Email address is not verified\u0026rdquo; (SES): Email not verified. - \u0026ldquo;ResourceNotFoundException\u0026rdquo;: studentData table not created. Use CloudTrail or IAM Access Advisor to pinpoint permission issues. Optimization - Added pagination handling for Scan (as improved in the code). - Used logging instead of print (as added). - Increased memory (256 MB) and timeout (60 seconds) for handling large tables. - For enhanced security, verify the SES domain (see AWS SES Documentation - DKIM) and update the sender email (e.g., no-reply@system.edu.vn). - If the studentData table is large, consider using DynamoDB Streams for incremental backups rather than using the Scan operation on the whole table. Early Testing After creating and deploying the function, run tests to verify the backup file in S3, the notification email, and the logs in CloudWatch before integrating with CloudWatch Events/EventBridge (for scheduled backups). Practical Tip: Add sample data to the studentData table, check the S3 bucket and recipient\u0026rsquo;s email (including Spam/Junk) to verify results.\nConclusion The Lambda function BackupDynamoDBAndSendEmail has been created to back up student data from the studentData table to S3 and send a notification email with a file download link. The function is ready for integration with CloudWatch Events/EventBridge for scheduled backups.\nNext Step: Proceed to Configuring CloudWatch Events/EventBridge to continue!\n"
},
{
	"uri": "//localhost:1313/2-preparation-steps/2.3-create-iam-role-for-dynamodb-backup/",
	"title": "Create IAM Role for DynamoDB Backup",
	"tags": [],
	"description": "",
	"content": " Objective: Create the IAM role DynamoDBBackupRole for the Lambda function BackupDynamoDBAndSendEmail, granting permissions to read and write data to the DynamoDB table studentData, store backup files in S3, send emails via SES, log data to CloudWatch, and support potential interactions with CloudFront.\nThe function BackupDynamoDBAndSendEmail performs:\nReads student data (Student ID, Full Name, Class, Date of Birth, Email) from the DynamoDB table studentData via the Scan operation. Stores a JSON file in an S3 bucket (e.g., student-backup-20250706). Creates a pre-signed URL for the backup file and sends a notification email via SES (e.g., to nguyentribaothang@gmail.com). Logs data to CloudWatch for monitoring. This role needs:\nPermissions to read and write data to DynamoDB (AmazonDynamoDBFullAccess). Permissions to store and create URLs on S3 (AmazonS3FullAccess). Permissions to send emails via SES (AmazonSESFullAccess). Permissions to log data to CloudWatch (AWSLambdaBasicExecutionRole). Permissions for CloudFront (CloudFrontFullAccess) for potential future features. Note: CloudFrontFullAccess is not currently used but is retained for future functionalities (e.g., managing CloudFront distributions).\nDetailed Steps Below are the detailed steps to create the IAM role DynamoDBBackupRole:\n1. Access the AWS Management Console Open your browser and log in to the AWS Management Console with your AWS account.\nIn the search bar, type IAM and select Identity and Access Management (IAM).\nEnsure you are in the correct AWS region (e.g., us-east-1), check in the top right corner.\nFigure 1: AWS Console interface with the IAM search bar.\n2. Navigate to the Roles Section In the IAM interface, find the left-hand navigation menu.\nSelect Roles to view the list of IAM roles. If no roles exist, the list will be empty.\nFigure 2: Navigation menu with the Roles option.\n3. Start the Role Creation Process In the Roles interface, click the Create Role button in the top-right corner.\nFigure 3: Create Role button in the Roles interface.\n4. Choose Trusted Entity Type In the Select trusted entity section, choose AWS Service to specify that the role is for an AWS service.\nIn the Use case section, select Lambda from the list of services.\nClick Next to move to the permission configuration step.\nFigure 4: Choosing AWS Service and Lambda in Use case.\n5. Grant Permissions to the Role In the Permissions section, add the following five policies:\nAmazonDynamoDBFullAccess:\nType AmazonDynamoDBFullAccess in the search bar. Select the AmazonDynamoDBFullAccess policy. Description: Grants read and write access to DynamoDB, supporting operations like Scan and other operations if needed.\nFigure 5: Selecting the AmazonDynamoDBFullAccess policy.\nAmazonS3FullAccess:\nType AmazonS3FullAccess in the search bar. Select the AmazonS3FullAccess policy. Description: Grants permissions to store backup files in S3 (PutObject) and create pre-signed URLs (GeneratePresignedUrl).\nFigure 6: Selecting the AmazonS3FullAccess policy.\nAmazonSESFullAccess:\nType AmazonSESFullAccess in the search bar. Select the AmazonSESFullAccess policy. Description: Grants permission to send emails via SES to notify users with a backup download link (e.g., to nguyentribaothang@gmail.com).\nFigure 7: Selecting the AmazonSESFullAccess policy.\nAWSLambdaBasicExecutionRole:\nType AWSLambdaBasicExecutionRole in the search bar. Select the AWSLambdaBasicExecutionRole policy. Description: Allows the Lambda function to log to CloudWatch for monitoring and debugging.\nFigure 8: Selecting the AWSLambdaBasicExecutionRole policy.\nCloudFrontFullAccess:\nType CloudFrontFullAccess in the search bar. Select the CloudFrontFullAccess policy. Description: Grants permission to manage CloudFront distributions for potential future features.\nFigure 9: Selecting the CloudFrontFullAccess policy.\nVerify the list of Permissions policies to ensure it includes:\nAmazonDynamoDBFullAccess AmazonS3FullAccess AmazonSESFullAccess AWSLambdaBasicExecutionRole CloudFrontFullAccess Click Next.\n6. Name and Review the Role In the Role details section:\nRole Name: Enter DynamoDBBackupRole. Note: The name must match exactly with the Lambda function configuration for BackupDynamoDBAndSendEmail.\nDescription (optional): Enter a description, e.g., \u0026ldquo;IAM role for Lambda function BackupDynamoDBAndSendEmail, granting read and write access to DynamoDB, store backups to S3, send emails via SES, log to CloudWatch, and support CloudFront.\u0026rdquo; Figure 10: Enter role name and description.\nDouble-check:\nTrusted entity: AWS Service (Lambda). Permissions: AmazonDynamoDBFullAccess, AmazonS3FullAccess, AmazonSESFullAccess, AWSLambdaBasicExecutionRole, CloudFrontFullAccess. Click Create Role.\nFigure 11: Create Role button to finalize the creation.\n"
},
{
	"uri": "//localhost:1313/3-creating-lambda-functions/",
	"title": "Creating Lambda Functions",
	"tags": [],
	"description": "",
	"content": " Objective: Create and configure three Lambda functions in AWS to support the main features of the student information management system:\ngetStudentData: Retrieve all student data from the DynamoDB studentData table. insertStudentData: Store student information in the DynamoDB table and send a confirmation email via SES. BackupDynamoDBAndSendEmail: Backup data from the DynamoDB table to S3 and send a notification email with a backup file download link. Each function will be created through the AWS Management Console, using the programming language Python 3.12 (or the latest supported version), assigned the corresponding IAM Role (created in sections 2.1, 2.2, 2.3), and configured to integrate with other AWS services (DynamoDB, SES, S3). The steps below ensure that learners can deploy the functions easily while optimizing performance and security.\nInitial Requirements You need to complete the preparation steps in section 2 (IAM Roles, DynamoDB table, SES) before creating the Lambda functions. Ensure your AWS account is ready.\nConfiguration Steps Below are the specific steps to configure the Lambda functions:\nStep Content Description 3.1 Create the getStudentData Function Create the Lambda function to retrieve all student data from the DynamoDB studentData table using the Scan operation. 3.2 Create the insertStudentData Function Create the Lambda function to store student information in the DynamoDB studentData table and send a confirmation email via SES. 3.3 Create the BackupDynamoDBAndSendEmail Function Create the Lambda function to back up data from the DynamoDB studentData table to S3 and send a notification email with a pre-signed URL. Note: Follow the steps in order to ensure that the functions are configured correctly. Each step will be detailed in the corresponding documents.\nConclusion After completing these configuration steps, you will have:\nThe getStudentData function to retrieve student data. The insertStudentData function to store data and send a confirmation email. The BackupDynamoDBAndSendEmail function to back up data and send notifications. Ready to continue?\nGo to Create the getStudentData Function to start configuring the first Lambda function!\n"
},
{
	"uri": "//localhost:1313/6-configuring-s3-buckets/6.3-enabling-static-website-hosting/",
	"title": "Session Management",
	"tags": [],
	"description": "",
	"content": "Work with Amazon System Manager - Session Manager Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon System Manager - Session Manager . Perform creating public and private instance connections.\nContent Introduction Preparation Connect to EC2 instance Manage session logs Port Forwarding Clean up resources "
},
{
	"uri": "//localhost:1313/4-creating-a-restful-api/4.3-creating-a-usage-plan/",
	"title": "Set Up Usage Plan",
	"tags": [],
	"description": "",
	"content": " Objective: Create a Usage Plan named StudentUsagePlan in AWS API Gateway to control and limit access to the student API (created in section 4.1) via the StudentApiKey (created in section 4.2). The Usage Plan will apply rate limits (Rate: 5 requests/second, Burst: 10 requests) and a quota (1000 requests/day), ensuring cost control, preventing abuse, and securing the endpoints (GET /students, POST /students, POST /backup) when accessed from the web interface (running on CloudFront).\nOverview of Usage Plan in API Gateway A Usage Plan is a mechanism in API Gateway for managing how clients use the API via API Key, including: Rate Limiting: Limits the number of requests per second (Rate) and the maximum number of simultaneous requests (Burst). Quota: Limits the total number of requests in a given time period (e.g., day, week, month). In this system, StudentUsagePlan will: Link with the StudentApiKey to authenticate requests. Apply to the student API and stage (e.g., prod, to be created in section 4.8). Ensure the web interface only sends valid requests with the API Key within the predefined limits. Usage Plan helps protect the API from abuse attacks (like DDoS) and controls the cost of using API Gateway. Prerequisites You need to complete section 4.1 (create the student API), section 4.2 (create the StudentApiKey API Key), and section 3 (create the Lambda functions getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, the DynamoDB table studentData, the S3 bucket student-backup-20250706, and SES email verification). Ensure your AWS account is set up, and the AWS region is us-east-1.\nDetailed Steps Access AWS Management Console\nOpen your browser and log in to AWS Management Console with your AWS account.\nIn the search bar at the top, type API Gateway and select the Amazon API Gateway service to access the management interface.\nCheck the AWS region: Make sure you are working in the primary AWS region (e.g., us-east-1), and check the region at the top right corner of the AWS Console. This region must match the student API (created in section 4.1) and the Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail).\nFigure 1: AWS Console Interface with API Gateway Search Bar.\nNavigate to the Usage Plans Section\nIn the main Amazon API Gateway interface, look at the left navigation menu.\nSelect Usage Plans to view the list of existing Usage Plans. If you haven\u0026rsquo;t created any plans, the list will be empty.\nThe interface will show options to create or manage Usage Plans.\nFigure 2: Navigation Menu with Usage Plans Option.\nStart the Usage Plan Creation Process\nIn the Usage Plans interface, click the Create (or Create usage plans depending on the Console version) button at the top right to begin creating a new Usage Plan.\nFigure 3: Create Button in the Usage Plans Interface.\nConfigure the Usage Plan\nIn the Create Usage Plan section:\nName: Enter StudentUsagePlan exactly. This name helps you easily identify the plan when linking it with the API Key and stage. Description: Enter Usage Plan to control access to StudentManagementAPI (or a similar description for clarity). Enable throttling: Select to enable rate limiting. Rate: Enter 5 (5 requests/second). Burst: Enter 10 (10 simultaneous requests maximum). Explanation: Rate limits the number of requests per second that the client (with the API Key) can send. Burst limits the maximum number of requests that can be processed simultaneously, allowing for a burst of requests. These values are suitable for a small-scale application like a student management system. Figure 4: Usage Plan Configuration Interface.\nEnable quota: Select to enable quota limits. Quota: Enter 1000 and choose requests per Day (1000 requests/day). Explanation: Quota limits the total number of requests per day, helping control costs and prevent abuse. Keep the other settings at their default values (e.g., don\u0026rsquo;t enable Enable usage plan metrics unless you need detailed monitoring). Click Next to continue.\nFigure 5: Click Create Button.\nCheck the Status of the Usage Plan Creation\nAfter clicking Create, you will see the message: \u0026ldquo;Successfully created usage plan ‘StudentUsagePlan’.\u0026rdquo;\nIn the Usage Plans list, select StudentUsagePlan to view the details.\nVerify:\nThrottling: Rate = 5 requests/second, Burst = 10 requests. Quota: 1000 requests/day. API Keys: StudentApiKey is linked. If you don\u0026rsquo;t see the message or encounter an error:\nCheck the IAM permissions for your AWS account to include apigateway:POST to create Usage Plans. Make sure you are in the correct AWS region (us-east-1). Refresh the page or check the Usage Plans list again. Figure 6: Usage Plan Details Page After Creation.\nImportant Notes Element Details Linking with Stage The Usage Plan will be linked with the prod stage of the student API in section 4.9. After deploying the API (section 4.8), you need to go back to StudentUsagePlan to add the student API and the prod stage. - In Associated APIs and Stages, select Add API Stage, and choose the student API and prod stage. API Key Security Make sure the StudentApiKey is copied and stored safely (section 4.2). Do not embed the API Key directly in the JavaScript code of the web interface. Use environment variables or AWS Secrets Manager: - Go to AWS Secrets Manager \u0026gt; Store a new secret \u0026gt; Choose Other type of secret \u0026gt; Enter the API Key. - Name the secret (e.g., student-api-key) and retrieve it in the web interface through the AWS SDK. Rate and Quota Limits Rate: 5 requests/second and Burst: 10 requests are suitable for a small-scale application. If more users are required, increase the values (e.g., Rate = 100, Burst = 200). Quota: 1000 requests/day is sufficient for testing. If needed, increase the quota (e.g., 10,000 requests/day) in production. Error Handling If you encounter an error \u0026ldquo;AccessDenied\u0026rdquo;: - Check if your AWS account IAM permissions include apigateway:POST, apigateway:PUT to create and link Usage Plans. - Make sure the StudentApiKey exists (section 4.2). If the client receives a 429 \u0026quot;Too Many Requests\u0026quot; error when calling the API, check: - Requests exceed Rate or Burst. - Quota of 1000 requests/day has been exceeded (check in Usage Plans \u0026gt; Usage). If the Usage Plan does not appear, refresh the page or check the AWS region again. Optimization - Enable CloudWatch Metrics for the Usage Plan to track the number of requests: - In StudentUsagePlan, select Enable usage plan metrics. - Check in CloudWatch \u0026gt; Metrics \u0026gt; API Gateway \u0026gt; UsagePlanId. - Consider using AWS WAF with API Gateway to protect against DDoS attacks or API Key abuse. - If you need many clients (e.g., multiple web applications), create additional API Keys and link them with the same StudentUsagePlan. Early Testing - After creating StudentUsagePlan, verify the plan appears in the Usage Plans list, and StudentApiKey is linked. - After deploying the API (section 4.8), test the Usage Plan by calling the endpoint with the API Key using Postman or curl. - If you receive a 403 \u0026quot;Forbidden\u0026quot; error, check if the API Key is linked with the Usage Plan and if the method requires API Key Required: true (section 4.4, 4.5, 4.6). Web Interface Integration Testing After linking the Usage Plan to the prod stage (section 4.9), use the API Key in the web interface to call the endpoints (GET /students, POST /students, POST /backup). Practical Tip: Verify that the StudentUsagePlan is correctly configured with Rate, Burst, and Quota before linking it to the prod stage. Monitor the number of requests via CloudWatch after testing the API.\nConclusion The StudentUsagePlan has been successfully created in AWS API Gateway, with Rate (5 requests/second), Burst (10 requests), and Quota (1000 requests/day) limits, ready to be linked to the student API and the prod stage.\nNext step: Go to Create GET Method to Retrieve Data to continue!\n"
},
{
	"uri": "//localhost:1313/7-deploying-cloudfront/7.3-creating-cloudfront-invalidation/",
	"title": "Website Serverless",
	"tags": [],
	"description": "",
	"content": "Work with Amazon System Manager - Session Manager Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon System Manager - Session Manager . Perform creating public and private instance connections.\nContent Introduction Preparation Connect to EC2 instance Manage session logs Port Forwarding Clean up resources "
},
{
	"uri": "//localhost:1313/4-creating-a-restful-api/",
	"title": "Configuring RESTful API with API Key Security",
	"tags": [],
	"description": "",
	"content": " Objective: Create a RESTful API using AWS API Gateway to integrate with Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail), allowing the web interface (running on CloudFront) to access, store, and back up student data. The API will be secured with an API Key, use a Usage Plan to limit access, and enable CORS to support communication with the web interface. The API will be deployed on a specific stage (e.g., prod) and linked with the API Key to ensure that only valid requests are processed.\nPrerequisites You need to complete the steps in section 3 (create Lambda functions getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, DynamoDB table studentData, S3 bucket student-backup-20250706, SES email verification). Ensure your AWS account is set up, and the AWS region is us-east-1.\nConfiguration Steps Below are the specific steps to configure the RESTful API:\nStep Content Description 4.1 Create a new REST API on API Gateway Create a new REST API in AWS API Gateway to integrate with Lambda functions. 4.2 Create API Key to secure access Create an API Key to secure API requests from the web interface. 4.3 Set up Usage Plan Set up a Usage Plan to limit the number of API requests and manage access. 4.4 Create GET method to fetch data Create a GET method for the /students endpoint to call the getStudentData function and retrieve student data. 4.5 Create POST method to store data Create a POST method for the /students endpoint to call the insertStudentData function and store student information. 4.6 Create Resource \u0026amp; Method for data backup Create a resource and POST method for the /backup endpoint to call the BackupDynamoDBAndSendEmail function. 4.7 Enable CORS to support frontend access Enable CORS to support cross-origin requests from the web interface on CloudFront. 4.8 Deploy the API to a specific stage Deploy the API to a stage (e.g., prod) for use in the production environment. 4.9 Link API Key to Usage Plan \u0026amp; link with REST API and Stage Link the API Key to the Usage Plan and stage to ensure only valid requests are processed. Note: Follow the steps in order to ensure the API is configured correctly. Each step will be detailed in the corresponding documentation.\nConclusion By completing these configuration steps, you will have:\nA RESTful API integrated with Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail). The API secured with an API Key and Usage Plan. CORS support for the web interface on CloudFront. Ready to proceed?\nGo to Create a new REST API on API Gateway to start configuring the first API!\n"
},
{
	"uri": "//localhost:1313/4-creating-a-restful-api/4.4-creating-a-get-method/",
	"title": "Create GET Method to Retrieve Data",
	"tags": [],
	"description": "",
	"content": " Objective: Create a GET method on the /students resource in the student API (created in section 4.1) to integrate with the getStudentData Lambda function (created in section 3.1), allowing the retrieval of the student list from the studentData DynamoDB table. The method will require an API Key (StudentApiKey, created in section 4.2) in the x-api-key header for security, and prepare for enabling CORS (section 4.7) so the web interface (running on CloudFront) can make requests.\nOverview of the GET Method The GET /students method will call the getStudentData Lambda function to fetch all records from the studentData DynamoDB table (fields: studentid, name, class, birthdate, email). The getStudentData function will return a JSON response with the header Access-Control-Allow-Origin: '*' to support CORS, suitable for the web interface. API Key Required ensures that only requests with a valid StudentApiKey will be processed. After creation, the API needs to be deployed (section 4.8) for the GET method to take effect. Prerequisites You need to complete section 4.1 (create the student API), section 4.2 (create the StudentApiKey API Key), section 4.3 (create the StudentUsagePlan Usage Plan), and section 3 (create the Lambda functions getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, the studentData DynamoDB table, the student-backup-20250706 S3 bucket, SES email verification). Ensure your AWS account is set up and the AWS region is us-east-1.\nDetailed Steps Access AWS Management Console\nOpen your browser and log in to AWS Management Console with your AWS account.\nIn the search bar at the top, type API Gateway and select the Amazon API Gateway service to access the management interface.\nCheck the AWS region: Ensure you\u0026rsquo;re working in the primary AWS region (assumed to be us-east-1 for synchronization with previous sections), and check the region at the top right corner of the AWS Console. This region must match the student API, the getStudentData Lambda function, the studentData DynamoDB table, the student-backup-20250706 S3 bucket, and SES.\nFigure 1: AWS Console Interface with API Gateway Search Bar.\nNavigate to the APIs Section\nIn the main Amazon API Gateway interface, look at the left navigation menu.\nSelect APIs to view the list of existing APIs.\nThe list will show the student API (created in section 4.1). If not visible, check the AWS region again or refresh the page.\nFigure 2: Navigation Menu with APIs Option.\nSelect the student API\nIn the APIs list, find and select the student API.\nYou\u0026rsquo;ll be taken to the student API management page, displaying options like Resources, Stages, API Keys, etc.\nSelect Resources from the left menu to start configuring the resource and method.\nFigure 3: API Management Page for student with Resources Option.\nCreate the /students Resource\nIn the Resources interface, you\u0026rsquo;ll see the root /.\nClick Actions \u0026gt; Create Resource to create a new resource.\nConfigure the resource:\nResource Name: Enter students. Resource Path: Enter /students (or leave it as the default, which will automatically be /students). Enable API Gateway CORS: Select to prepare for enabling CORS (section 4.7). Click Create Resource to create the resource.\nCheck: The /students resource will appear under the root / in the resource tree.\nFigure 4: Create /students Resource Interface.\nCreate the GET Method\nIn the resource tree, select the /students resource.\nClick Actions \u0026gt; Create Method.\nFrom the dropdown under /students, select GET and click the checkmark (✔) to confirm.\nNote: If the dropdown doesn\u0026rsquo;t show GET, ensure you\u0026rsquo;ve selected the correct /students resource.\nIntegration Type: Select Lambda Function to integrate with the Lambda function.\nFigure 5: Create GET Method Interface.\nConfigure Lambda Integration\nIn the GET method configuration interface:\nUse Lambda Proxy integration: Select (to send the entire HTTP request to the Lambda function and receive a JSON response with headers). Lambda Region: Select us-east-1 (or your AWS region, which must match the region of the getStudentData function). Lambda Function: Enter getStudentData. Note: If the getStudentData function doesn\u0026rsquo;t appear in the suggestion list, enter it manually and ensure the function exists in Lambda (section 3.1). Click Save to save the configuration. If AWS prompts for permissions, click OK to allow API Gateway to invoke the getStudentData Lambda function. AWS will automatically add the IAM policy to the Lambda function\u0026rsquo;s role (usually LambdaGetStudentRole from section 3.1) with the lambda:InvokeFunction permission.\nFigure 6: Lambda Integration Configuration Interface.\nEnable API Key Requirement\nIn the Method Request interface for GET /students:\nClick Edit next to Authorization. Select NONE (API Key will handle authentication, no need for Cognito or IAM Authorizer). In API Key Required, select true to require the API Key in the x-api-key header. Explanation: This ensures that any requests sent to GET /students must include the StudentApiKey (created in section 4.2) in the x-api-key header. Click Save or the checkmark (✔) to save the configuration. Figure 7: Enable API Key Required Interface.\nCheck the Status of Method Creation\nAfter configuring and clicking Save, you\u0026rsquo;ll see the message: \u0026ldquo;Successfully created method ‘GET’. Redeploy your API for the update to take effect.\u0026rdquo;\nImportant Note: The GET method will not work until you deploy the API to a stage (section 4.8).\nTo check the configuration:\nIn Resources, select GET under /students. Verify: Integration Request: Displays Lambda Function: getStudentData. Method Request: API Key Required: true. If errors occur: \u0026ldquo;Lambda function not found\u0026rdquo;: Check that the getStudentData function exists in Lambda \u0026gt; Functions. \u0026ldquo;AccessDenied\u0026rdquo;: Check if your AWS IAM role has the apigateway:PUT permission to create methods. \u0026ldquo;Permission denied\u0026rdquo;: Ensure API Gateway has permission to invoke getStudentData (AWS automatically adds permission when you click OK). Figure 8: Success Message After Creating GET Method.\nImportant Notes Element Details Lambda Proxy Integration Lambda Proxy integration allows sending the entire HTTP request (headers, query parameters, body) to the getStudentData function and receiving a JSON response with headers (like Access-Control-Allow-Origin: '*'). Ensure the getStudentData function (section 3.1) returns the response in the correct format. API Key Security With API Key Required: true, requests to GET /students must include the header x-api-key: \u0026lt;StudentApiKey\u0026gt;. For enhanced security, store the API Key in AWS Secrets Manager (see section 4.2). CORS The GET method must support CORS for the web interface to make cross-origin requests. This will be configured in detail in section 4.7 (enabling CORS with the OPTIONS method). Ensure the getStudentData function returns the Access-Control-Allow-Origin: '*' header (or a specific CloudFront domain, e.g., https://d12345678.cloudfront.net). AWS Region Ensure the us-east-1 region matches the region of the getStudentData function, the studentData table, and the student API. If using a different region (e.g., us-west-2), select the correct region in the Lambda Region. Error Handling - If you encounter the error \u0026ldquo;Lambda function not found\u0026rdquo;: - Check that the getStudentData function exists in Lambda \u0026gt; Functions. - Ensure the AWS region matches (us-east-1). - If you encounter a 403 \u0026quot;Forbidden\u0026quot; error when calling the API (after deployment): - Check API Key Required: true and ensure the StudentApiKey is valid. - Ensure the API Key is linked to the Usage Plan (sections 4.3, 4.9). - If you receive a 500 error from Lambda, check the logs in CloudWatch (log group /aws/lambda/getStudentData) for debugging. Optimization - Add the Access-Control-Allow-Origin header in the Method Response to ensure CORS works correctly: - In Method Response for GET /students, add Status Code 200 with the header Access-Control-Allow-Origin: '*'. - In Integration Response, map the response from Lambda to return a properly formatted JSON response. - Consider using AWS WAF with API Gateway to protect against DDoS attacks or API Key abuse. - If the studentData table is large, ensure the getStudentData function handles pagination (as in the improved code from section 3.1) to avoid exceeding the Scan limit. Early Testing - After creating the GET method, verify the configuration in Resources \u0026gt; GET /students (Integration Request, Method Request). - After deploying the API (section 4.8), test the GET method using Postman or curl. - If you receive a 403 \u0026quot;Forbidden\u0026quot; error, check the API Key or API Key Required configuration. - If you receive a 500 error, check the CloudWatch logs for the getStudentData function. Web Interface Integration Testing After deploying the API (section 4.8) and linking the Usage Plan (section 4.9), use the API Key in the web interface (using Tailwind CSS, running on CloudFront) to call the GET /students endpoint. Practical Tip: Verify the Integration Request and API Key Required configurations before deploying the API. Test the JSON response from the getStudentData function using Postman to ensure the student data is returned in the correct format.\nConclusion The GET /students method has been successfully created in the student API, integrated with the getStudentData Lambda function and requiring the StudentApiKey API Key, ready for deployment and use in the web interface.\nNext step: Go to Create POST Method to Store Data to continue!\n"
},
{
	"uri": "//localhost:1313/2-preparation-steps/2.4-createtable-in-dynamodb/",
	"title": "Create Table in DynamoDB",
	"tags": [],
	"description": "",
	"content": " Objective: Set up the studentData table in DynamoDB to store student information, including Student ID (studentid), Full Name, Class, Date of Birth, and Email, using studentid (String type) as the primary key to ensure fast and efficient queries in a serverless architecture.\nDynamoDB, AWS\u0026rsquo; NoSQL database, provides automatic scaling and low latency, ideal for student information management applications. The studentData table will serve as the foundation for integrating with AWS services such as Lambda, API Gateway, and SES.\nDetailed Steps Below are the detailed steps to create and configure the studentData table:\n1. Access the AWS Management Console Open your browser and log in to the AWS Management Console.\nIn the search bar, type DynamoDB and select DynamoDB to enter the management interface.\nFigure 1: AWS Console interface with the DynamoDB search bar.\n2. Navigate to the Tables Section In the DynamoDB interface, find the left-hand navigation menu.\nSelect Tables to view the list of existing tables. If no tables exist, the list will be empty.\nFigure 2: Navigation menu with the Tables option.\n3. Start the Table Creation Process In the Tables interface, click the Create Table button in the top-right corner.\nFigure 3: Create Table button in the Tables interface.\n4. Configure the Table Details In the Table Details section:\nTable Name: Enter studentData. Note: The table name must match exactly with the name used in the Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail).\nPartition Key: Enter studentid, select String as the type. Primary Key: Ensure each student has a unique identifier (e.g., SV001, SV002).\nSort Key: Leave blank (not needed, as queries will be based on studentid). Settings: Use default options:\nChoose On-Demand for Capacity mode to automatically adjust resources, saving costs and simplifying management. No need to add Secondary Indexes or custom Encryption (default is sufficient for this application). Verify the information:\nTable Name: studentData Partition Key: studentid (String) Figure 4: Table configuration interface with Table Name and Partition Key.\n5. Create the Table Click Create Table at the bottom of the page.\nFigure 5: Create Table button to confirm.\nDynamoDB will create the table in about 20-30 seconds, depending on the AWS region (e.g., us-east-1).\nFigure 6: Interface showing table creation status.\n6. Check the Table Status After clicking Create Table, you will return to the Tables list.\nFind the studentData table. The initial status will be Creating.\nWait for about 30 seconds, then refresh the page (click Refresh or press F5).\nOnce the status changes to Active, the table has been created successfully.\nNotification: The interface will show \u0026ldquo;The studentData table was created successfully\u0026rdquo;.\nFigure 7: The studentData table with Active status.\n7. Verify the Table Configuration Click on the studentData table to view details. Check: Table ARN: For example, arn:aws:dynamodb:us-east-1:your-account-id:table/studentData. Partition Key: studentid (String). Capacity Mode: On-Demand. Sort Key: None. Other attributes (Full Name, Class, Date of Birth, Email) are dynamic attributes, no need for pre-declaration. Important Notes Factor Details Table Name Must be studentData (case-sensitive) to match the Lambda code. Incorrect names will cause query errors. AWS Region Create the table in the same AWS region as other services (e.g., us-east-1). Check the region in the top-right corner of the AWS Console. Creation Time If the Creating status lasts longer than 30 seconds, check your network connection or refresh the page. If an error occurs, delete the table and try again. Optimization For large data (\u0026gt;500 MB), consider enabling Point-in-time Recovery (PITR) in the Backups tab for recovery support. Backup via Lambda and S3 is sufficient for this application. Check Early Once the table is in Active status, go to the Items tab and select Create Item to enter a sample record: - studentid: SV001 - name: Nguyễn Văn A - class: CNTT1 - birthdate: 2000-01-01 - email: example@gmail.com Verify the data displays correctly. Practical Tip: Check the table configuration immediately after creation to ensure accuracy before integrating with Lambda.\nConclusion The studentData table is the foundation for storing and managing student information in the serverless application. With the primary key studentid and On-Demand capacity mode, the table ensures high performance, flexible scaling, and low latency. The table is now ready to integrate with Lambda, API Gateway, and SES.\nNext Step: Proceed to Configure SES to set up the email service!\n"
},
{
	"uri": "//localhost:1313/6-configuring-s3-buckets/6.4-setting-bucket-policy-for-public-access/",
	"title": "Session Management",
	"tags": [],
	"description": "",
	"content": "Work with Amazon System Manager - Session Manager Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon System Manager - Session Manager . Perform creating public and private instance connections.\nContent Introduction Preparation Connect to EC2 instance Manage session logs Port Forwarding Clean up resources "
},
{
	"uri": "//localhost:1313/2-preparation-steps/2.5-configureses/",
	"title": "Configure Amazon SES",
	"tags": [],
	"description": "",
	"content": " Objective: Configure Amazon SES to send confirmation emails for the Lambda function insertStudentData (confirmation when saving student data) and BackupDynamoDBAndSendEmail (notification with a backup file download link). Verify the email address (e.g., nguyentribaothang@gmail.com) and exit sandbox mode to send emails to unverified addresses.\nAmazon SES is AWS\u0026rsquo;s email service with high reliability and low cost, used for:\nSending confirmation emails when adding students to the DynamoDB studentData table. Sending notification emails containing the pre-signed URL of the backup file from S3. Note: The default SES account is in sandbox mode, which only allows sending emails to verified addresses. Exiting sandbox mode is necessary to send emails to unverified student addresses.\nDetailed Steps Below are the detailed steps to configure SES:\n1. Access the AWS Management Console Open your browser and log in to the AWS Management Console.\nIn the search bar, type SES and select Amazon Simple Email Service (SES).\nEnsure you are in an AWS region that supports SES (e.g., us-east-1), check in the top right corner.\nFigure 1: AWS Console interface with the SES search bar.\n2. Navigate to Verified Identities In the SES interface, find the left-hand navigation menu.\nSelect Verified identities to view the list of verified email addresses or domains. If none exist, the list will be empty.\nFigure 2: Navigation menu with the Verified identities option.\n3. Start the Identity Creation Process In the Verified identities interface, click Create identity in the top-right corner.\nFigure 3: Create Identity button in the Verified identities interface.\n4. Configure the Email Address In the Identity type section, select Email address.\nIn the Email address field, enter the source email address (e.g., nguyentribaothang@gmail.com).\nNote: Use an email you have access to for verification. Avoid using sample emails like example@gmail.com.\nLeave the default settings (no need for Feedback notifications or DKIM settings).\nClick Create identity to send the verification request.\nFigure 4: Email configuration interface.\n5. Check and Verify the Email AWS SES will send a verification email to the entered address (e.g., nguyentribaothang@gmail.com).\nLog in to your email account, check your Inbox or Spam/Junk folder for an email from AWS (subject may be \u0026ldquo;Amazon Web Services - Email Address Verification Request\u0026rdquo;).\nClick the verification link in the email to complete the process.\nReturn to SES and refresh the Verified identities page. Confirm the status is Verified.\nFigure 5: Checking the Verified status of the email.\n6. Check Sandbox Mode and Request Exit from Sandbox Check sandbox: In SES, go to Account dashboard or Sending statistics. Check the Account status. If it shows \u0026ldquo;Your account is in the sandbox\u0026rdquo;, the account is limited to sending emails to verified addresses only. Request to exit sandbox: In the Account dashboard, click Edit your account details or Request production access. Fill out the form: Use case description: \u0026ldquo;Send confirmation emails when saving student information and backup notifications from DynamoDB.\u0026rdquo; Mail type: Choose Transactional. Website URL: Enter the application URL (if available) or write \u0026ldquo;Website under development.\u0026rdquo; Sender email address: Enter the verified email (e.g., nguyentribaothang@gmail.com). Additional information: \u0026ldquo;Need to send emails to unverified student addresses for the student information management system.\u0026rdquo; Submit the request. AWS will approve it within 24-48 hours, notifying via email. Temporary workaround: In sandbox mode, verify additional receiving emails (follow steps 4–5) or modify the Lambda code to only send emails to verified addresses. 7. Verify and Test SES Go back to Verified identities, check the email status (e.g., nguyentribaothang@gmail.com) is Verified.\nIn SES, select Send a test email (if available), send a test email to the verified email to test functionality.\nIf the status is still Pending, check your email (Inbox/Spam) or recreate the identity.\nFigure 6: Confirming Verified status and testing email sending.\nImportant Notes Factor Details Valid Email Use an email you have access to (e.g., nguyentribaothang@gmail.com). If you don’t receive the verification email within 5-10 minutes, check Spam/Junk or contact AWS Support. Sandbox Mode In sandbox mode, only send emails to verified addresses. Exit sandbox mode to send emails to student addresses (unverified), or the insertStudentData function will report an AccessDenied error. AWS Region Configure SES in a region that supports it (e.g., us-east-1), matching with Lambda. Check the list of supported SES regions in AWS SES Documentation. Error Handling If you don’t receive the verification email, check DNS settings or contact your email provider. If Lambda reports \u0026ldquo;Email address is not verified\u0026rdquo;, check the verification status in SES or CloudWatch logs. Optimization Consider verifying the domain or setting up DKIM for security. See AWS SES Documentation - DKIM. Test Early Test sending an email from SES before integrating with Lambda to ensure proper functionality. Practical Tip: After verifying the email, send a test email from SES to check before running the Lambda functions.\nConclusion Configuring SES with a verified email (e.g., nguyentribaothang@gmail.com) and exiting sandbox mode (if necessary) ensures that the Lambda functions insertStudentData and BackupDynamoDBAndSendEmail can send confirmation emails and notifications successfully. SES is now ready for integration into the serverless application.\nNext Step: Proceed to Configure Lambda Functions to set up the Lambda functions!\n"
},
{
	"uri": "//localhost:1313/4-creating-a-restful-api/4.5-creating-a-post-method/",
	"title": "Create POST Method to Store Data",
	"tags": [],
	"description": "",
	"content": " Objective: Create a POST method on the /students resource in the student API (created in section 4.1) to integrate with the insertStudentData Lambda function (created in section 3.2), allowing student information to be stored in the studentData DynamoDB table and a confirmation email to be sent via SES. The method will require an API Key (StudentApiKey, created in section 4.2) in the x-api-key header for security and prepare for enabling CORS (section 4.7) so the web interface (running on CloudFront) can make requests.\nOverview of the POST Method The POST /students method will call the insertStudentData Lambda function to store a student record (fields: studentid, name, class, birthdate, email) into the studentData DynamoDB table and send a confirmation email via SES. The insertStudentData function will return a JSON response with the header Access-Control-Allow-Origin: '*' to support CORS, suitable for the web interface. API Key Required ensures that only requests with a valid StudentApiKey will be processed. After creation, the API needs to be deployed (section 4.8) for the POST method to take effect. Prerequisites You need to complete section 4.1 (create the student API), section 4.2 (create the StudentApiKey API Key), section 4.3 (create the StudentUsagePlan Usage Plan), section 4.4 (create the GET /students method), and section 3 (create the Lambda functions getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, the studentData DynamoDB table, the student-backup-20250706 S3 bucket, SES email verification). Ensure your AWS account is set up and the AWS region is us-east-1.\nDetailed Steps Access AWS Management Console\nOpen your browser and log in to AWS Management Console with your AWS account.\nIn the search bar at the top, type API Gateway and select the Amazon API Gateway service to access the management interface.\nCheck the AWS region: Ensure you\u0026rsquo;re working in the primary AWS region (assumed to be us-east-1 for synchronization with previous sections), and check the region at the top right corner of the AWS Console. This region must match the student API, the insertStudentData Lambda function, the studentData DynamoDB table, the student-backup-20250706 S3 bucket, and SES.\nFigure 1: AWS Console Interface with API Gateway Search Bar.\nNavigate to the APIs Section\nIn the main Amazon API Gateway interface, look at the left navigation menu.\nSelect APIs to view the list of existing APIs.\nThe list will show the student API (created in section 4.1). If not visible, check the AWS region again or refresh the page.\nFigure 2: Navigation Menu with APIs Option.\nSelect the student API\nIn the APIs list, find and select the student API.\nYou\u0026rsquo;ll be taken to the student API management page, displaying options like Resources, Stages, API Keys, etc.\nSelect Resources from the left menu to continue configuring the resource and method.\nFigure 3: API Management Page for student with Resources Option.\nUse the /students Resource\nIn the Resources interface, you will see the root / and the /students resource (created in section 4.4 for the GET method).\nIf the /students resource doesn\u0026rsquo;t exist:\nClick Actions \u0026gt; Create Resource. Configure the resource: Resource Name: Enter students. Resource Path: Enter /students (or leave the default, which will automatically be /students). Enable API Gateway CORS: Select to prepare for enabling CORS (section 4.7). Click Create Resource to create it. Select the /students resource in the resource tree to create the POST method.\nFigure 4: Use /students Resource Interface.\nCreate the POST Method\nIn the resource tree, select the /students resource.\nClick Actions \u0026gt; Create Method.\nFrom the dropdown under /students, select POST and click the checkmark (✔) to confirm.\nNote: If the dropdown doesn\u0026rsquo;t show POST, ensure you\u0026rsquo;ve selected the correct /students resource.\nIn the POST method configuration interface:\nIntegration Type: Select Lambda Function to integrate with the Lambda function. Use Lambda Proxy integration: Select (to send the entire HTTP request, including headers and body, to the Lambda function and receive a JSON response with headers). Lambda Region: Select us-east-1 (or your AWS region, which must match the region of the insertStudentData function). Lambda Function: Enter insertStudentData. Note: If the insertStudentData function doesn\u0026rsquo;t appear in the suggestion list, enter it manually and ensure the function exists in Lambda (section 3.2). Click Save to save the configuration. If AWS prompts for permissions, click OK to allow API Gateway to invoke the insertStudentData Lambda function. AWS will automatically add the IAM policy to the Lambda function\u0026rsquo;s role (usually LambdaInsertStudentRole from section 3.2) with the lambda:InvokeFunction permission.\nFigure 5: Create POST Method Interface.\nEnable API Key Required\nIn the Method Request interface for POST /students:\nClick Edit next to Authorization. Select NONE (API Key will handle authentication, no need for Cognito or IAM Authorizer). In API Key Required, select true to require the API Key in the x-api-key header. Explanation: This ensures that any request sent to POST /students must include the StudentApiKey (created in section 4.2) in the x-api-key header. Click Save or the checkmark (✔) to save the configuration. Figure 6: Enable API Key Required Interface.\nCheck the Status of Method Creation\nAfter configuring and clicking Save, you\u0026rsquo;ll see the message: \u0026ldquo;Successfully created method ‘POST’. Redeploy your API for the update to take effect.\u0026rdquo;\nImportant Note: The POST method will not work until you deploy the API to a stage (section 4.8).\nTo check the configuration:\nIn Resources, select POST under /students. Verify: Integration Request: Displays Lambda Function: insertStudentData. Method Request: API Key Required: true. If errors occur: \u0026ldquo;Lambda function not found\u0026rdquo;: Check that the insertStudentData function exists in Lambda \u0026gt; Functions and the AWS region matches (us-east-1). \u0026ldquo;AccessDenied\u0026rdquo;: Check if your AWS IAM role has the apigateway:PUT permission to create methods. \u0026ldquo;Permission denied\u0026rdquo;: Ensure API Gateway has permission to invoke insertStudentData (AWS automatically adds permission when you click OK). Figure 7: Success Message After Creating POST Method. Important Notes Element Details Lambda Proxy Integration Lambda Proxy integration allows sending the entire HTTP request (headers, body) to the insertStudentData function and receiving a JSON response with headers (like Access-Control-Allow-Origin: '*'). Ensure the insertStudentData function (section 3.2) correctly handles the input JSON format and returns a valid response. API Key Security With API Key Required: true, requests to POST /students must include the header x-api-key: \u0026lt;StudentApiKey\u0026gt;. For enhanced security, store the API Key in AWS Secrets Manager (see section 4.2). CORS The POST method must support CORS for the web interface to make cross-origin requests. This will be configured in detail in section 4.7 (enabling CORS with the OPTIONS method). Ensure the insertStudentData function returns the Access-Control-Allow-Origin: '*' header (or a specific CloudFront domain, e.g., https://d12345678.cloudfront.net). AWS Region Ensure the us-east-1 region matches the insertStudentData function, the studentData table, SES, and the student API. If using a different region (e.g., us-west-2), select the correct region in the Lambda Region. Error Handling - If you encounter the error \u0026ldquo;Lambda function not found\u0026rdquo;: - Check that the insertStudentData function exists in Lambda \u0026gt; Functions. - Ensure the AWS region matches (us-east-1). - If you encounter a 403 \u0026quot;Forbidden\u0026quot; error when calling the API (after deployment): - Check API Key Required: true and ensure the StudentApiKey is valid. - Ensure the API Key is linked to the Usage Plan (sections 4.3, 4.9). - If you encounter 400, 409, or 500 errors from Lambda, check the logs in CloudWatch (log group /aws/lambda/insertStudentData) for debugging: - 400: Invalid JSON body (missing studentid, name, etc.). - 409: studentid already exists (due to ConditionExpression). - 500: DynamoDB or SES error (e.g., email not verified in SES). Optimization - Add the Access-Control-Allow-Origin header in Method Response to ensure CORS works correctly: - In Method Response for POST /students, add Status Code 200, 400, 409, 500 with the header Access-Control-Allow-Origin: '*'. - In Integration Response, map the response from Lambda to handle status codes. - Consider using AWS WAF with API Gateway to protect against DDoS attacks or API Key abuse. - If input validation is needed, add a Request Validator in Method Request to check the JSON body for required fields (studentid, name, class, birthdate, email). Early Testing - After creating the POST method, verify the configuration in Resources \u0026gt; POST /students (Integration Request, Method Request). - After deploying the API (section 4.8), test the POST method using Postman or curl. - Check the studentData DynamoDB table (go to DynamoDB \u0026gt; Tables \u0026gt; studentData \u0026gt; Explore items) to verify the new record. - Check the recipient\u0026rsquo;s mailbox (including Spam/Junk) for the confirmation email from SES (e.g., student4@example.com). - If you encounter a 403 \u0026quot;Forbidden\u0026quot; error, check the API Key and API Key Required configuration. - If you encounter 400, 409, or 500 errors, check the CloudWatch logs for the insertStudentData function. Web Interface Integration Testing After deploying the API (section 4.8) and linking the Usage Plan (section 4.9), use the API Key in the web interface (using Tailwind CSS, running on CloudFront) to call the POST /students endpoint. Practical Tip: Verify the Integration Request and API Key Required configurations before deploying the API. Test the data in the studentData table and the confirmation email from SES using Postman to ensure the insertStudentData function works correctly.\nConclusion The POST /students method has been successfully created in the student API, integrated with the insertStudentData Lambda function and requiring the StudentApiKey API Key, ready for deployment and use in the web interface.\nNext step: Go to Create Resource \u0026amp; Method for Backup Feature to continue!\n"
},
{
	"uri": "//localhost:1313/6-configuring-s3-buckets/6.5-updating-bucket-policy-to-support-backup/",
	"title": "Session Management",
	"tags": [],
	"description": "",
	"content": "Work with Amazon System Manager - Session Manager Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon System Manager - Session Manager . Perform creating public and private instance connections.\nContent Introduction Preparation Connect to EC2 instance Manage session logs Port Forwarding Clean up resources "
},
{
	"uri": "//localhost:1313/5-designing-the-website-interface/",
	"title": "Write the Website Interface",
	"tags": [],
	"description": "",
	"content": " Objective: Build the web interface for the Student Data Management application using HTML, Tailwind CSS, and JavaScript (with jQuery) to:\nAllow users to input and save student information (student ID, full name, class, birthdate, email) via the POST /students endpoint. Display the list of students from the GET /students endpoint. Trigger data backup via the POST /backup endpoint.\nThe interface will be deployed on Amazon S3 (static bucket, section 2.4) and distributed through CloudFront (section 6), integrated with the student API (stage prod, section 4.8) using the Invoke URL and StudentApiKey (section 4.2) with CORS security (section 4.7). Overview of the Web Interface index.html: Provides the interface structure with an input form, function buttons (Save Student Data, View All Students, Backup Data), and a table displaying the list of students. styles.css: Uses Tailwind CSS and customizes with the Poppins font, gradient colors, animations, and responsive design. scripts.js: Handles the logic for calling the API (GET /students, POST /students, POST /backup) with jQuery, including input validation, HTML encoding to prevent XSS, and handling API responses/errors. AWS Integration: Replace API_ENDPOINT with the Invoke URL (e.g., https://abc123.execute-api.us-east-1.amazonaws.com/prod) from section 4.8. Replace API_KEY with the value of StudentApiKey from section 4.2, securely stored in AWS Secrets Manager or as an environment variable. Improvements: Enhance security by storing the API_KEY in AWS Secrets Manager. Improve user experience with interface notifications (instead of alerts). Add stricter input validation. Optimize responsiveness and animations. Prerequisites You need to complete the steps in section 2.4 (create the static S3 bucket), section 4.1 (create the student API), section 4.2 (create the StudentApiKey API Key), section 4.3 (create the StudentUsagePlan Usage Plan), section 4.4 (create the GET /students method), section 4.5 (create the POST /students method), section 4.6 (create the /backup resource and POST /backup method), section 4.7 (enable CORS), section 4.8 (deploy the API to the prod stage), section 4.9 (link StudentApiKey to StudentUsagePlan and associate with the student API on stage prod), and section 3 (create the Lambda functions getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, studentData DynamoDB table, student-backup-20250706 S3 bucket, SES email verification). Ensure your AWS account is ready and the AWS region is us-east-1. You also need access to S3, CloudFront, and API Gateway.\nDetailed Actions Configure the index.html File The index.html file defines the interface with an input form, function buttons, and a table displaying students. \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Student Data Management\u0026lt;/title\u0026gt; \u0026lt;script src=\u0026#34;https://cdn.tailwindcss.com\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;styles.css\u0026#34;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body class=\u0026#34;min-h-screen flex items-center justify-center p-6\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;form-container card\u0026#34;\u0026gt; \u0026lt;h1 class=\u0026#34;text-4xl font-bold text-center mb-8\u0026#34;\u0026gt;Student Management\u0026lt;/h1\u0026gt; \u0026lt;div class=\u0026#34;space-y-6\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;grid grid-cols-1 md:grid-cols-2 gap-6\u0026#34;\u0026gt; \u0026lt;div\u0026gt; \u0026lt;label for=\u0026#34;studentid\u0026#34; class=\u0026#34;block text-sm mb-1\u0026#34;\u0026gt;Student ID\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;studentid\u0026#34; id=\u0026#34;studentid\u0026#34; class=\u0026#34;w-full\u0026#34; placeholder=\u0026#34;Enter student ID\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;label for=\u0026#34;name\u0026#34; class=\u0026#34;block text-sm mb-1\u0026#34;\u0026gt;Full Name\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;name\u0026#34; id=\u0026#34;name\u0026#34; class=\u0026#34;w-full\u0026#34; placeholder=\u0026#34;Enter full name\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;label for=\u0026#34;class\u0026#34; class=\u0026#34;block text-sm mb-1\u0026#34;\u0026gt;Class\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;class\u0026#34; id=\u0026#34;class\u0026#34; class=\u0026#34;w-full\u0026#34; placeholder=\u0026#34;Enter class\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;label for=\u0026#34;birthdate\u0026#34; class=\u0026#34;block text-sm mb-1\u0026#34;\u0026gt;Birthdate\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;date\u0026#34; name=\u0026#34;birthdate\u0026#34; id=\u0026#34;birthdate\u0026#34; class=\u0026#34;w-full\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;md:col-span-2\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;email\u0026#34; class=\u0026#34;block text-sm mb-1\u0026#34;\u0026gt;Email\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;email\u0026#34; id=\u0026#34;email\u0026#34; class=\u0026#34;w-full\u0026#34; placeholder=\u0026#34;Enter email\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;button id=\u0026#34;savestudent\u0026#34; class=\u0026#34;btn-primary w-full\u0026#34;\u0026gt;Save Student Data\u0026lt;/button\u0026gt; \u0026lt;p id=\u0026#34;studentSaved\u0026#34; class=\u0026#34;text-center text-green-600 font-medium text-lg\u0026#34;\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;button id=\u0026#34;getstudents\u0026#34; class=\u0026#34;btn-primary btn-secondary w-full\u0026#34;\u0026gt;View All Students\u0026lt;/button\u0026gt; \u0026lt;button id=\u0026#34;backupstudents\u0026#34; class=\u0026#34;btn-primary w-full bg-green-600 text-white p-3 rounded-xl font-semibold hover:bg-green-700\u0026#34;\u0026gt;Backup Data\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;showStudents\u0026#34; class=\u0026#34;mt-8 overflow-x-auto\u0026#34;\u0026gt; \u0026lt;table id=\u0026#34;studentTable\u0026#34; class=\u0026#34;w-full\u0026#34;\u0026gt; \u0026lt;thead\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;th class=\u0026#34;text-sm font-semibold\u0026#34;\u0026gt;Student ID\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-sm font-semibold\u0026#34;\u0026gt;Full Name\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-sm font-semibold\u0026#34;\u0026gt;Class\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-sm font-semibold\u0026#34;\u0026gt;Birthdate\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-sm font-semibold\u0026#34;\u0026gt;Email\u0026lt;/th\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/thead\u0026gt; \u0026lt;tbody\u0026gt;\u0026lt;/tbody\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;scripts.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Note: Ensure the file is uploaded to the static S3 bucket (section 2.4) and distributed through CloudFront (section 6). Configure the styles.css File The styles.css file customizes the interface with Tailwind CSS, the Poppins font, and animations. @import url(\u0026#39;https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700\u0026amp;display=swap\u0026#39;); body { background: linear-gradient(135deg, #4c1d95 0%, #ec4899 100%); font-family: \u0026#39;Poppins\u0026#39;, sans-serif; color: #1f2937; } .form-container { background: rgba(255, 255, 255, 0.97); backdrop-filter: blur(12px); border-radius: 2rem; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); padding: 2.5rem; max-width: 48rem; margin: 2rem auto; } h1 { background: linear-gradient(to right, #7c3aed, #db2777); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 700; letter-spacing: -0.025em; } input { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 0.75rem; padding: 0.75rem 1rem; transition: all 0.3s ease; } input:focus { outline: none; border-color: #7c3aed; box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2); } .btn-primary { background: linear-gradient(90deg, #7c3aed, #db2777); border-radius: 0.75rem; padding: 0.75rem; font-weight: 600; color: white; transition: all 0.3s ease; } .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); background: linear-gradient(90deg, #6d28d9, #be185d); } .btn-secondary { background: linear-gradient(90deg, #6b7280, #4b5563); } .btn-secondary:hover { background: linear-gradient(90deg, #4b5563, #374151); } table { border-radius: 1rem; overflow: hidden; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); } thead { background: linear-gradient(to right, #ede9fe, #fce7f3); } th, td { padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb; } tbody tr { transition: background-color 0.3s ease; } tbody tr:hover { background-color: #f5f3ff; } .card { animation: slideUp 0.5s ease-out; } @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } } label { font-weight: 500; color: #374151; } Note: Ensure the file is uploaded to the static S3 bucket (section 2.4) and distributed through CloudFront (section 6). Configure the scripts.js File The scripts.js file handles the logic for making API calls with jQuery, including data validation, HTML escaping, and handling responses/errors. var API_ENDPOINT = \u0026#34;https://710o05k9b6.execute-api.us-east-1.amazonaws.com/prod\u0026#34;; var API_KEY = \u0026#34;hWKpVcoY6246mLB7DdrYb3nWRsYqnLBp35zIxZcd\u0026#34;; // Function to escape HTML to prevent XSS function escapeHTML(str) { return String(str) .replace(/\u0026amp;/g, \u0026#39;\u0026amp;amp;\u0026#39;) .replace(/\u0026lt;/g, \u0026#39;\u0026amp;lt;\u0026#39;) .replace(/\u0026gt;/g, \u0026#39;\u0026amp;gt;\u0026#39;) .replace(/\u0026#34;/g, \u0026#39;\u0026amp;quot;\u0026#39;) .replace(/\u0026#39;/g, \u0026#39;\u0026amp;apos;\u0026#39;); } // Handle saving student data (POST) document.getElementById(\u0026#34;savestudent\u0026#34;).onclick = function () { var inputData = { studentid: $(\u0026#39;#studentid\u0026#39;).val(), name: $(\u0026#39;#name\u0026#39;).val(), class: $(\u0026#39;#class\u0026#39;).val(), birthdate: $(\u0026#39;#birthdate\u0026#39;).val(), email: $(\u0026#39;#email\u0026#39;).val() }; // Validate fields and email format const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/; if (!inputData.studentid || !inputData.name || !inputData.class || !inputData.birthdate || !inputData.email) { alert(\u0026#34;Please fill in all the fields.\u0026#34;); return; } if (!emailPattern.test(inputData.email)) { alert(\u0026#34;Invalid email format.\u0026#34;); return; } console.log(\u0026#34;POST data:\u0026#34;, { body: JSON.stringify(inputData) }); $.ajax({ url: API_ENDPOINT, type: \u0026#39;POST\u0026#39;, data: JSON.stringify({ body: JSON.stringify(inputData) }), contentType: \u0026#39;application/json\u0026#39;, headers: { \u0026#39;x-api-key\u0026#39;: API_KEY }, success: function (response) { console.log(\u0026#34;POST response:\u0026#34;, response); let message = \u0026#34;Student data has been saved!\u0026#34;; if (response \u0026amp;\u0026amp; response.statusCode === 400) { try { const error = JSON.parse(response.body || \u0026#34;{}\u0026#34;); message = `Error: ${escapeHTML(error.message || \u0026#34;Unknown error\u0026#34;)}`; } catch (e) { console.error(\u0026#34;Body parsing error:\u0026#34;, e); message = \u0026#34;Error: Unknown\u0026#34;; } } else if (response \u0026amp;\u0026amp; typeof response.body === \u0026#39;string\u0026#39;) { try { const data = JSON.parse(response.body); if (data \u0026amp;\u0026amp; data.name \u0026amp;\u0026amp; data.studentid) { message = `Saved student: ${escapeHTML(data.name)} (${escapeHTML(data.studentid)})`; } else { console.warn(\u0026#34;Response body doesn\u0026#39;t contain name or studentid:\u0026#34;, data); } } catch (e) { console.error(\u0026#34;Body parsing error:\u0026#34;, e); } } else { console.warn(\u0026#34;No body or non-string body response:\u0026#34;, response); } document.getElementById(\u0026#34;studentSaved\u0026#34;).textContent = message; }, error: function (xhr) { let errorMessage = \u0026#34;Unknown\u0026#34;; try { const error = JSON.parse(xhr.responseText || \u0026#34;{}\u0026#34;); errorMessage = error.message || errorMessage; } catch (e) { errorMessage = xhr.responseText || errorMessage; } alert(\u0026#34;Error while saving: \u0026#34; + errorMessage); } }); }; // Handle fetching all students (GET) document.getElementById(\u0026#34;getstudents\u0026#34;).onclick = function () { $.ajax({ url: API_ENDPOINT, type: \u0026#39;GET\u0026#39;, contentType: \u0026#39;application/json\u0026#39;, headers: { \u0026#39;x-api-key\u0026#39;: API_KEY }, success: function (response) { console.log(\u0026#34;GET response:\u0026#34;, response); // Log for debugging $(\u0026#39;#studentTable tbody\u0026#39;).empty(); let students = response; // Check if the response is an object containing body if (response \u0026amp;\u0026amp; typeof response.body === \u0026#39;string\u0026#39;) { try { students = JSON.parse(response.body); } catch (e) { console.error(\u0026#34;Body parsing error:\u0026#34;, e); alert(\u0026#34;Returned data is not in JSON format.\u0026#34;); return; } } // Check if students is an array if (Array.isArray(students)) { if (students.length === 0) { alert(\u0026#34;No student data.\u0026#34;); } else { jQuery.each(students, function (i, data) { $(\u0026#34;#studentTable tbody\u0026#34;).append( `\u0026lt;tr\u0026gt; \u0026lt;td class=\u0026#39;p-4\u0026#39;\u0026gt;${escapeHTML(data.studentid)}\u0026lt;/td\u0026gt; \u0026lt;td class=\u0026#39;p-4\u0026#39;\u0026gt;${escapeHTML(data.name)}\u0026lt;/td\u0026gt; \u0026lt;td class=\u0026#39;p-4\u0026#39;\u0026gt;${escapeHTML(data.class)}\u0026lt;/td\u0026gt; \u0026lt;td class=\u0026#39;p-4\u0026#39;\u0026gt;${escapeHTML(data.birthdate)}\u0026lt;/td\u0026gt; \u0026lt;td class=\u0026#39;p-4\u0026#39;\u0026gt;${escapeHTML(data.email)}\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt;` ); }); } } else { console.warn(\u0026#34;Returned data is not an array:\u0026#34;, students); alert(\u0026#34;Returned data is not in the correct format.\u0026#34;); } }, error: function (xhr) { let errorMessage = \u0026#34;Unknown\u0026#34;; try { const error = JSON.parse(xhr.responseText || \u0026#34;{}\u0026#34;); errorMessage = error.message || errorMessage; } catch (e) { errorMessage = xhr.responseText || errorMessage; } alert(\u0026#34;Error fetching student data: \u0026#34; + errorMessage); } }); }; document.getElementById(\u0026#34;backupstudents\u0026#34;).onclick = function(){ $.ajax({ url: API_ENDPOINT + \u0026#34;/backup\u0026#34;, type: \u0026#39;POST\u0026#39;, data: JSON.stringify({}), contentType: \u0026#39;application/json; charset=utf-8\u0026#39;, headers: { \u0026#39;x-api-key\u0026#39;: API_KEY }, success: function (response) { alert(\u0026#34;Backup successful! Check your email for the backup file.\u0026#34;); }, error: function () { alert(\u0026#34;Error performing data backup.\u0026#34;); } }); }; Note: Ensure to replace API_ENDPOINT and API_KEY with actual values from section 4.8 and 4.2. Replace API_ENDPOINT and API_KEY API_ENDPOINT: Replace https://abc123.execute-api.us-east-1.amazonaws.com/prod with the Invoke URL from section 4.8 (retrieve from API Gateway \u0026gt; Stages \u0026gt; prod \u0026gt; Invoke URL). API_KEY: Replace xxxxxxxxxxxxxxxxxxxx with the StudentApiKey value from section 4.2. For better security, store StudentApiKey in AWS Secrets Manager and retrieve it in a serverless environment (e.g., Lambda or CloudFront Functions). Example to retrieve API Key from AWS Secrets Manager: const AWS = require(\u0026#39;aws-sdk\u0026#39;); const secretsManager = new AWS.SecretsManager({ region: \u0026#39;us-east-1\u0026#39; }); async function getApiKey() { const data = await secretsManager.getSecretValue({ SecretId: \u0026#39;student-api-key\u0026#39; }).promise(); return JSON.parse(data.SecretString).apiKey; } In the client-side environment, store API_KEY in environment variables (e.g., .env with Vite/React) or configure CloudFront to automatically add the x-api-key header. Important Notes Factor Details API Key Security Do not hardcode API_KEY directly in scripts.js. Use AWS Secrets Manager or CloudFront Functions to add the x-api-key header automatically. CORS Ensure CORS is correctly enabled (section 4.7) with Access-Control-Allow-Origin: https://d12345678.cloudfront.net. If encountering CORS errors, check headers in Method Response and Lambda (sections 3.1, 3.2, 3.3). AWS Region Ensure the region us-east-1 matches with student API, stage prod, Lambda functions, DynamoDB studentData, S3 student-backup-20250706, SES, and CloudFront. Optimization - Minimize the styles.css and scripts.js files before uploading them to S3 to speed up loading. - Use CloudFront cache to store static content, set a reasonable TTL (e.g., 86400 seconds). - Add Request Validator in API Gateway (section 4.5) to check the JSON body of POST /students. - Enable CloudWatch Logs for API Gateway (section 4.8): In API Gateway \u0026gt; Stages \u0026gt; prod \u0026gt; Logs/Tracing, select Enable CloudWatch Logs. Error Checking - If the interface doesn’t load: Check S3 public access and CloudFront origin. - If the API returns 403: Check StudentApiKey and StudentUsagePlan (section 4.9). - If the API returns 429: Check the limits in StudentUsagePlan (section 4.3). - If the API returns 500: Check the CloudWatch logs for Lambda. - If the table is empty or data isn’t displaying: Check the response from GET /students in Developer Tools \u0026gt; Network. API Integration Testing - Use Developer Tools to check API requests. - Check DynamoDB studentData to verify new records. - Check S3 student-backup-20250706 to verify the backup file. - Check email (including Spam/Junk) to verify notifications from SES. Best Practice Tip: Before deploying to S3, test the interface locally using npx serve or a static server to ensure that API requests work correctly. Use Developer Tools \u0026gt; Network to verify the x-api-key header and the response from the API. Check the data in DynamoDB, S3, and SES after each action.\nConclusion The web interface has been built with index.html, styles.css, and scripts.js, successfully integrated with the student API (stage prod) using Invoke URL and StudentApiKey. The application supports data entry, displays a list of students, and performs data backup, ready to be deployed on S3 and distributed through CloudFront.\nNext step: Proceed to Configuring CloudFront and Deploying the Web Interface to complete the integration!\n"
},
{
	"uri": "//localhost:1313/6-configuring-s3-buckets/",
	"title": "Configuring S3 Bucket for Storing and Serving the Website",
	"tags": [],
	"description": "",
	"content": " Objective: Configure two Amazon S3 Buckets for:\nStoring and serving the web interface: Create the student-web-20250706 bucket to store static files (index.html, styles.css, scripts.js from section 5), enable Static Website Hosting, and configure public access permissions to serve the interface via CloudFront (section 7). Data backup: Configure the student-backup-20250706 bucket (created in section 2.4) to store backup files from the POST /backup endpoint (section 4.6), ensuring the BackupDynamoDBAndSendEmail Lambda function has write permissions to the bucket.\nThis configuration integrates with the student API (stage prod, section 4.8) and ensures the web interface (using Tailwind CSS) works smoothly with the GET /students, POST /students, and POST /backup endpoints. Initial Requirements You need to complete section 2.4 (create the student-backup-20250706 bucket), section 3.3 (create the BackupDynamoDBAndSendEmail Lambda function with the DynamoDBBackupRole role), section 4.1 (create the student API), section 4.2 (create the StudentApiKey), section 4.3 (create the StudentUsagePlan), section 4.4 (create the GET /students method), section 4.5 (create the POST /students method), section 4.6 (create the /backup resource and POST /backup method), section 4.7 (enable CORS), section 4.8 (deploy the API to the prod stage), section 4.9 (link the StudentApiKey to StudentUsagePlan and associate with the student API in the prod stage), and section 5 (build the web interface with index.html, styles.css, scripts.js). Ensure that your AWS account has permissions to access S3, Lambda, API Gateway, and the AWS region is us-east-1.\nConfiguration Steps Below are the specific steps to configure the S3 Bucket:\nStep Content Description 6.1 Create a new S3 Bucket Create the student-web-20250706 bucket to store static files (index.html, styles.css, scripts.js). 6.2 Upload the web interface assets to S3 (HTML/CSS/JS) Upload the static files from section 5 to the student-web-20250706 bucket. 6.3 Enable Static Website Hosting Enable Static Website Hosting in the student-web-20250706 bucket to serve the web interface. 6.4 Configure Bucket Policy for public access Update the Bucket Policy for student-web-20250706 to allow CloudFront to access the content (s3:GetObject). 6.5 Update Bucket Policy to support data backup (Backup) Update the Bucket Policy for student-backup-20250706 to allow the BackupDynamoDBAndSendEmail Lambda function to write files (s3:PutObject). Note: Follow the steps in order to ensure the S3 Bucket configuration is correct. Each step will be explained in detail in the corresponding documentation.\nConclusion By completing these configuration steps, you will have:\nThe student-web-20250706 bucket storing and serving the static web interface, ready to integrate with CloudFront. The student-backup-20250706 bucket supporting the storage of backup files from the POST /backup endpoint, integrated with the BackupDynamoDBAndSendEmail Lambda function. A fully integrated system with the student API (stage prod) and a web interface using Tailwind CSS. Ready to continue?\nGo to Create a new S3 Bucket to start configuring the student-web-20250706 bucket!\n"
},
{
	"uri": "//localhost:1313/4-creating-a-restful-api/4.6-creating-a-backup-resource-and-method/",
	"title": "Create Resource and Method for Data Backup",
	"tags": [],
	"description": "",
	"content": " Objective: Create the resource /backup and the POST method in the student API (created in section 4.1) to integrate with the Lambda function BackupDynamoDBAndSendEmail (created in section 3.3). This will allow backing up all data from the DynamoDB studentData table to the S3 bucket student-backup-20250706 and sending an email notification via SES. The method will require an API Key (StudentApiKey, created in section 4.2) in the x-api-key header for security, and prepare for enabling CORS (section 4.7) so that the web interface (running on CloudFront) can send requests.\nOverview of the Resource and POST Method The /backup resource and POST /backup method will invoke the Lambda function BackupDynamoDBAndSendEmail to: Back up all records from the DynamoDB studentData table (fields: studentid, name, class, birthdate, email) into a JSON file in the S3 bucket student-backup-20250706. Send an email notification via SES to a designated address (e.g., admin or a user). The BackupDynamoDBAndSendEmail function returns a JSON response with the header Access-Control-Allow-Origin: '*' to support CORS, suitable for the web interface. API Key Required ensures that only requests with a valid StudentApiKey will be processed. After creation, the API needs to be deployed (section 4.8) for the POST method to take effect. Prerequisites You need to complete section 4.1 (create student API), section 4.2 (create StudentApiKey), section 4.3 (create StudentUsagePlan), section 4.4 (create GET /students method), section 4.5 (create POST /students method), and section 3 (create Lambda functions getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, DynamoDB studentData table, S3 bucket student-backup-20250706, SES email verification). Ensure that your AWS account is set up and the AWS region is us-east-1.\nDetailed Actions Access AWS Management Console\nOpen your browser and log into the AWS Management Console with your AWS account.\nIn the search bar at the top, type API Gateway and select the Amazon API Gateway service to access the management interface.\nCheck the AWS region: Make sure you are working in the primary AWS region (assumed us-east-1 for synchronization with previous sections), check the region in the top-right corner of the AWS Console. This region must match the student API, the BackupDynamoDBAndSendEmail Lambda function, studentData DynamoDB table, student-backup-20250706 S3 bucket, and SES.\nFigure 1: AWS Console interface with the API Gateway search bar.\nNavigate to APIs\nIn the main interface of Amazon API Gateway, look at the left navigation menu.\nSelect APIs to view the list of existing APIs.\nThe list should display the student API (created in section 4.1). If not, check the AWS region again or refresh the page.\nFigure 2: Navigation menu with the APIs option.\nSelect the student API\nIn the APIs list, find and select the student API.\nYou will be redirected to the API management page for student, showing options like Resources, Stages, API Keys, etc.\nSelect Resources from the left menu to start configuring the resource and method.\nFigure 3: Student API management page with the Resources option.\nCreate the /backup Resource\nIn the Resources interface, you will see a resource tree with the root / and the /students resource (created in section 4.4).\nClick Actions \u0026gt; Create Resource to create a new resource.\nConfigure the resource:\nResource Name: Enter backup. Resource Path: Enter /backup (or leave it as default, it will automatically be /backup). Enable API Gateway CORS: Select to prepare for enabling CORS (section 4.7). Click Create Resource to create it.\nCheck: The /backup resource will appear under the root / in the resource tree.\nFigure 4: Click the Create button.\nFigure 5: Resource configuration interface for /backup.\nCreate the POST Method\nIn the resource tree, select the /backup resource.\nClick Actions \u0026gt; Create Method.\nIn the dropdown below /backup, select POST and click the check mark (✔) to confirm.\nNote: If the dropdown doesn\u0026rsquo;t show POST, ensure you have selected the correct resource /backup.\nFigure 6: Create POST method interface.\nConfigure Lambda Integration\nIn the POST method configuration interface:\nIntegration Type: Choose Lambda Function to integrate with the Lambda function. Use Lambda Proxy integration: Select (to send the entire HTTP request, including headers and body, to the Lambda function and receive a JSON response with headers). Lambda Region: Select us-east-1 (or your AWS region, it must match the region of the BackupDynamoDBAndSendEmail Lambda). Lambda Function: Enter BackupDynamoDBAndSendEmail. Note: If the BackupDynamoDBAndSendEmail function does not appear in the suggestions list, enter it manually and ensure the function exists in Lambda (section 3.3). Click Save to save the configuration. If AWS asks for permissions, click OK to allow API Gateway to invoke the BackupDynamoDBAndSendEmail Lambda function. AWS will automatically add the appropriate IAM policy to the Lambda function\u0026rsquo;s role (typically DynamoDBBackupRole from section 3.3) with the lambda:InvokeFunction permission.\nFigure 7: Lambda integration configuration interface.\nFigure 8: Click the Save button after configuration.\nEnable API Key Required\nIn the Method Request interface of POST /backup:\nClick Edit next to Authorization. Select NONE (API Key will handle authentication, no need for Cognito or IAM Authorizer). In API Key Required, select true to require the API Key in the x-api-key header. Explanation: This ensures that all requests to POST /backup must include the StudentApiKey (created in section 4.2) in the x-api-key header. Click Save or the check mark (✔) to save the configuration. Figure 9: Enable API Key Required interface.\nCheck the Method Creation Status\nAfter configuring and clicking Save, you will see the message: \u0026ldquo;Successfully created method ‘POST’. Redeploy your API for the update to take effect.\u0026rdquo;\nImportant Note: The POST method will not work until you deploy the API to a stage (section 4.8).\nTo verify the configuration:\nIn Resources, select POST under /backup. Verify: Integration Request: Shows Lambda Function: BackupDynamoDBAndSendEmail. Method Request: API Key Required: true. If you encounter errors: \u0026ldquo;Lambda function not found\u0026rdquo;: Check that the BackupDynamoDBAndSendEmail function exists in Lambda \u0026gt; Functions and that the AWS region matches (us-east-1). \u0026ldquo;AccessDenied\u0026rdquo;: Check that the IAM role of the AWS account has the apigateway:PUT permission to create the method. \u0026ldquo;Permission denied\u0026rdquo;: Ensure that API Gateway has permission to call BackupDynamoDBAndSendEmail (AWS will automatically add permissions when you click OK). Figure 10: Success message after creating the POST method.\nImportant Notes Factor Details Lambda Proxy Integration Lambda Proxy integration allows sending the entire HTTP request (headers, body) to the BackupDynamoDBAndSendEmail function and receiving a JSON response with headers (such as Access-Control-Allow-Origin: '*'). Ensure that the BackupDynamoDBAndSendEmail function (section 3.3) properly handles the backup and email sending. API Key Security With API Key Required: true, requests sent to POST /backup must include the x-api-key: \u0026lt;StudentApiKey\u0026gt; header. To enhance security, store the API Key in AWS Secrets Manager (see section 4.2). CORS The POST method needs to support CORS for the web interface to send cross-origin requests. This will be detailed in section 4.7 (enable CORS with the OPTIONS method). Ensure the BackupDynamoDBAndSendEmail function returns the header Access-Control-Allow-Origin: '*' (or a specific CloudFront domain, e.g., https://d12345678.cloudfront.net). AWS Region Ensure the region us-east-1 matches the BackupDynamoDBAndSendEmail function, studentData DynamoDB table, student-backup-20250706 S3 bucket, SES, and the student API. If using a different region (e.g., us-west-2), select the correct region in Lambda Region. Error Handling - If you get the error \u0026ldquo;Lambda function not found\u0026rdquo;: - Check that the BackupDynamoDBAndSendEmail function exists in Lambda \u0026gt; Functions. - Ensure the AWS region matches (us-east-1). - If you get a 403 \u0026quot;Forbidden\u0026quot; error when calling the API (after deploying): - Check that API Key Required: true and the StudentApiKey API Key are valid. - Ensure the API Key is linked to the Usage Plan (section 4.3, 4.9). - If you get a 500 error from Lambda, check the logs in CloudWatch (log group /aws/lambda/BackupDynamoDBAndSendEmail) to debug: - NoSuchBucket: Check that the S3 bucket student-backup-20250706 exists. - AccessDenied: Check that the DynamoDBBackupRole role has the s3:PutObject, dynamodb:Scan, and ses:SendEmail permissions. - Email address not verified: Check that the source email (no-reply@system.edu.vn) and the recipient email (admin@system.edu.vn) are verified in SES (section 2.5). Optimization - Add the header Access-Control-Allow-Origin in Method Response to ensure CORS works correctly: - In the Method Response for POST /backup, add Status Code 200, 500 with the header Access-Control-Allow-Origin: '*'. - In the Integration Response, map the response from Lambda to handle status codes. - Consider using AWS WAF with API Gateway to protect against DDoS attacks or API Key abuse. - If the studentData table is large, ensure that the BackupDynamoDBAndSendEmail function handles pagination for the Scan (e.g., using LastEvaluatedKey) to avoid exceeding limits. Early Testing - After creating the POST method, verify the configuration in Resources \u0026gt; POST /backup (Integration Request, Method Request). - After deploying the API (section 4.8), test the POST method with Postman or curl. - Check the S3 bucket student-backup-20250706 (go to S3 \u0026gt; Buckets \u0026gt; student-backup-20250706 \u0026gt; Objects) to verify the backup file (e.g., backup-20250707-124500.json). - Check the inbox (including Spam/Junk) of the recipient email (e.g., admin@system.edu.vn) to verify the email notification from SES. - If you receive a 403 \u0026quot;Forbidden\u0026quot; error, check the API Key and API Key Required configuration. - If you receive a 500 error, check the CloudWatch logs of the BackupDynamoDBAndSendEmail function. Web Interface Integration Testing After deploying the API (section 4.8) and linking the Usage Plan (section 4.9), use the API Key in the web interface (using Tailwind CSS, running on CloudFront) to call the POST /backup endpoint. Practical Tip: Verify the Integration Request and API Key Required configurations before deploying the API. Test the backup file in the student-backup-20250706 S3 bucket and the email notification from SES using Postman to ensure the BackupDynamoDBAndSendEmail function works properly.\nConclusion The /backup resource and POST /backup method have been successfully created in the student API, integrated with the BackupDynamoDBAndSendEmail Lambda function, and require the StudentApiKey API Key, ready to be deployed and used in the web interface.\nNext step: Move to Enable CORS to support the web interface to continue!\n"
},
{
	"uri": "//localhost:1313/4-creating-a-restful-api/4.7-enabling-cors/",
	"title": "Enable CORS to Support Frontend Access",
	"tags": [],
	"description": "",
	"content": " Objective: Enable CORS (Cross-Origin Resource Sharing) on the student API (created in section 4.1) to allow the web interface (running on CloudFront, using Tailwind CSS) to send requests to the GET /students, POST /students, and POST /backup endpoints. CORS will be configured on the /students and /backup resources by adding the OPTIONS method and setting the necessary headers (Access-Control-Allow-Methods, Access-Control-Allow-Headers, Access-Control-Allow-Origin), ensuring smooth and secure integration with the frontend.\nOverview of CORS in API Gateway CORS is a security mechanism of the browser that requires the server (API Gateway) to allow cross-origin requests from a different domain (e.g., https://d12345678.cloudfront.net) compared to the API domain (e.g., https://api-id.execute-api.us-east-1.amazonaws.com). In this system, CORS needs to be enabled for the /students (GET, POST) and /backup (POST) resources so that the web interface can: Send a GET /students request to retrieve the student list (function getStudentData, section 4.4). Send a POST /students request to save student information (function insertStudentData, section 4.5). Send a POST /backup request to back up the data (function BackupDynamoDBAndSendEmail, section 4.6). Enabling CORS requires: Adding the OPTIONS method for each resource to handle preflight requests from the browser. Setting the CORS headers (Access-Control-Allow-Origin, Access-Control-Allow-Methods, Access-Control-Allow-Headers) in the OPTIONS, GET, and POST responses. Ensuring that the Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail) return the header Access-Control-Allow-Origin: '*'. After enabling CORS, the API needs to be deployed (section 4.8) for the changes to take effect. Prerequisites You need to complete section 4.1 (create student API), section 4.2 (create StudentApiKey), section 4.3 (create StudentUsagePlan), section 4.4 (create GET /students method), section 4.5 (create POST /students method), section 4.6 (create /backup resource and POST /backup method), and section 3 (create Lambda functions getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, DynamoDB studentData table, S3 bucket student-backup-20250706, SES email verification). Ensure that your AWS account is set up and the AWS region is us-east-1.\nDetailed Actions Access AWS Management Console\nOpen your browser and log into the AWS Management Console with your AWS account.\nIn the search bar at the top, type API Gateway and select the Amazon API Gateway service to access the management interface.\nCheck the AWS region: Make sure you are working in the primary AWS region (assumed us-east-1 for synchronization with previous sections), check the region in the top-right corner of the AWS Console. This region must match the student API, the Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail), studentData DynamoDB table, student-backup-20250706 S3 bucket, and SES.\nFigure 1: AWS Console interface with the API Gateway search bar.\nNavigate to APIs\nIn the main interface of Amazon API Gateway, look at the left navigation menu.\nSelect APIs to view the list of existing APIs.\nThe list should display the student API (created in section 4.1). If not, check the AWS region again or refresh the page.\nFigure 2: Navigation menu with the APIs option.\nSelect the student API\nIn the APIs list, find and select the student API.\nYou will be redirected to the API management page for student, showing options like Resources, Stages, API Keys, etc.\nSelect Resources from the left menu to start configuring CORS.\nFigure 3: Student API management page with the Resources option.\nEnable CORS for the /students Resource\nIn the Resources interface, you will see a resource tree with the root / and the /students resource (created in section 4.4).\nSelect the /students resource.\nClick Actions \u0026gt; Enable CORS.\nIn the Enable CORS interface:\nAccess-Control-Allow-Methods: Select GET, POST, and OPTIONS. Explanation: GET and POST correspond to the methods created (sections 4.4, 4.5). OPTIONS is the preflight method that the browser sends to check CORS before sending the actual request (GET or POST). Access-Control-Allow-Headers: Keep the default or ensure it includes Content-Type, x-api-key (as the methods require the API Key in the x-api-key header, sections 4.4, 4.5). Example: Content-Type,x-api-key,Authorization. Access-Control-Allow-Origin: Enter '*' (to allow all domains) or a specific CloudFront domain (e.g., https://d12345678.cloudfront.net) for enhanced security. Access-Control-Max-Age: Keep the default (600 seconds) for the browser to cache the preflight response. Click Enable CORS and replace existing CORS headers to apply.\nAWS will automatically:\nCreate an OPTIONS method for the /students resource. Configure Mock Integration for OPTIONS with the response containing the necessary CORS headers. Update the Method Response for GET and POST to include the Access-Control-Allow-Origin header. Click Save to save the configuration.\nFigure 4: Enable CORS for the /students resource.\nEnable CORS for the /backup Resource\nIn the Resources interface, select the /backup resource (created in section 4.6).\nClick Actions \u0026gt; Enable CORS.\nIn the Enable CORS interface:\nAccess-Control-Allow-Methods: Select POST, OPTIONS. Explanation: POST corresponds to the method created (section 4.6). OPTIONS handles the preflight request for /backup. Access-Control-Allow-Headers: Ensure it includes Content-Type, x-api-key. Access-Control-Allow-Origin: Enter '*' or the specific CloudFront domain (e.g., https://d12345678.cloudfront.net). Access-Control-Max-Age: Keep the default (600 seconds). Click Enable CORS and replace existing CORS headers to apply.\nAWS will automatically create the OPTIONS method for /backup and update the Method Response for POST.\nClick Save to save the configuration.\nFigure 5: Enable CORS for the /backup resource.\nVerify the Status of CORS Activation\nAfter enabling CORS, you will see the message: \u0026ldquo;Successfully enabled CORS\u0026rdquo; for each resource (/students, /backup).\nTo verify the configuration:\nIn Resources, select the /students resource: Verify the OPTIONS method appears with Mock Integration. In the Method Response for GET, POST, and OPTIONS, check the Access-Control-Allow-Origin: '*' header. In the Integration Response for OPTIONS, check that the response includes: { \u0026#34;Access-Control-Allow-Origin\u0026#34;: \u0026#34;*\u0026#34;, \u0026#34;Access-Control-Allow-Methods\u0026#34;: \u0026#34;GET,POST,OPTIONS\u0026#34;, \u0026#34;Access-Control-Allow-Headers\u0026#34;: \u0026#34;Content-Type,x-api-key,Authorization\u0026#34; } Repeat the checks for the /backup resource (only POST and OPTIONS). If you encounter errors:\n\u0026ldquo;CORS headers already exist\u0026rdquo;: Select Replace existing CORS headers to overwrite. \u0026ldquo;AccessDenied\u0026rdquo;: Check that the IAM role for the AWS account has the apigateway:PUT permission to edit the method. \u0026ldquo;OPTIONS method not found\u0026rdquo;: Ensure that you clicked Enable CORS correctly. Important Note: CORS will not work until you deploy the API to a stage (section 4.8).\nFigure 6: Success message after enabling CORS.\nImportant Notes Factor Details Correct CORS Configuration - Access-Control-Allow-Origin: Use '*' to allow all domains (suitable for testing). In production, specify a specific CloudFront domain (e.g., https://d12345678.cloudfront.net) for enhanced security. - Access-Control-Allow-Headers: Ensure it includes x-api-key since the methods require an API Key (StudentApiKey, section 4.2). - Access-Control-Allow-Methods: Include OPTIONS to handle preflight requests. Integration with Lambda The Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail) must return the header Access-Control-Allow-Origin: '*' in the response to avoid CORS errors. This is configured in the Lambda code in sections 3.1, 3.2, 3.3. API Key Security Requests to the endpoints (GET /students, POST /students, POST /backup) must include the x-api-key: \u0026lt;StudentApiKey\u0026gt; header. Store the API Key in AWS Secrets Manager for enhanced security (see section 4.2). AWS Region Ensure the region us-east-1 matches the student API, the Lambda functions, studentData DynamoDB table, student-backup-20250706 S3 bucket, and SES. Error Handling - If the web interface reports a CORS error (e.g., \u0026ldquo;No \u0026lsquo;Access-Control-Allow-Origin\u0026rsquo; header\u0026rdquo;): - Check that Method Response for GET, POST, and OPTIONS includes the Access-Control-Allow-Origin header. - Check that the Integration Response for OPTIONS returns the correct CORS headers. - Ensure the Lambda functions return Access-Control-Allow-Origin: '*'. - If you encounter a 403 \u0026quot;Forbidden\u0026quot; error when calling the API: - Check that the StudentApiKey is valid and linked to the Usage Plan (sections 4.3, 4.9). - Ensure API Key Required: true is set in the Method Request (sections 4.4, 4.5, 4.6). - If you encounter a 500 error from Lambda, check the logs in CloudWatch (log groups /aws/lambda/getStudentData, /aws/lambda/insertStudentData, /aws/lambda/BackupDynamoDBAndSendEmail). Optimization - Specify the CloudFront domain in Access-Control-Allow-Origin instead of '*' for enhanced security. - Consider using AWS WAF with API Gateway to protect against DDoS attacks or API Key abuse. - If you need detailed preflight request checking, enable CloudWatch Logs for API Gateway: - In API Gateway \u0026gt; Settings \u0026gt; CloudWatch Logs, select Enable CloudWatch Logs and set the log level (e.g., INFO). - Add Request Validator for POST /students and POST /backup to validate the JSON body (see section 4.5). Early Testing - After enabling CORS, verify that the OPTIONS method appears in Resources for /students and /backup. - After deploying the API (section 4.8), test CORS by calling the endpoint from the web interface or using Postman/curl. - Check from the web interface (open Developer Tools \u0026gt; Network in the browser) to verify that no CORS errors occur when calling GET /students, POST /students, or POST /backup. - If you receive a CORS error, check the headers in Method Response and Integration Response, or the CloudWatch logs for API Gateway. Web Interface Integration Testing After deploying the API (section 4.8) and linking the Usage Plan (section 4.9), call the endpoints (GET /students, POST /students, POST /backup) from the web interface (using Tailwind CSS, running on CloudFront). Practical Tip: Verify the Method Response and Integration Response configurations for OPTIONS before deploying the API. Test the endpoints from the web interface using Developer Tools to ensure no CORS errors and that the data is returned correctly.\nConclusion CORS has been successfully enabled on the /students and /backup resources in the student API, allowing the web interface to call the GET /students, POST /students, and POST /backup endpoints without encountering CORS errors.\nNext step: Move to Deploy API for production use to continue!\n"
},
{
	"uri": "//localhost:1313/7-deploying-cloudfront/",
	"title": "Website Serverless",
	"tags": [],
	"description": "",
	"content": "Work with Amazon System Manager - Session Manager Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon System Manager - Session Manager . Perform creating public and private instance connections.\nContent Introduction Preparation Connect to EC2 instance Manage session logs Port Forwarding Clean up resources "
},
{
	"uri": "//localhost:1313/4-creating-a-restful-api/4.8-deploying-the-api/",
	"title": "Deploy the API to a Specific Stage",
	"tags": [],
	"description": "",
	"content": " Objective: Deploy the student API (created in section 4.1) to the prod stage in AWS API Gateway to activate the GET /students (section 4.4), POST /students (section 4.5), and POST /backup (section 4.6) methods, along with CORS configuration (section 4.7). After deployment, copy the Invoke URL (e.g., https://abc123.execute-api.us-east-1.amazonaws.com/prod) to be used in the web interface (running on CloudFront, using Tailwind CSS) to call the endpoints with the API Key StudentApiKey (section 4.2).\nOverview of API Deployment in API Gateway A stage is a deployment environment (e.g., prod, dev, test) in API Gateway, representing an active version of the API at a given time. Deploying the API to the prod stage will: Activate the GET /students, POST /students, and POST /backup methods, integrated with Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail). Apply the CORS configuration (section 4.7) so the web interface can send cross-origin requests. Require the API Key StudentApiKey in the x-api-key header for the methods (due to API Key Required being enabled in sections 4.4, 4.5, and 4.6). The Invoke URL is the root URL of the stage (e.g., https://abc123.execute-api.us-east-1.amazonaws.com/prod), combined with the resource paths (/students, /backup) to create the full endpoints: GET https://abc123.execute-api.us-east-1.amazonaws.com/prod/students POST https://abc123.execute-api.us-east-1.amazonaws.com/prod/students POST https://abc123.execute-api.us-east-1.amazonaws.com/prod/backup After deployment, the Invoke URL will be used in the web interface to call the API with the API Key. Prerequisites You need to complete section 4.1 (create student API), section 4.2 (create StudentApiKey), section 4.3 (create StudentUsagePlan), section 4.4 (create GET /students method), section 4.5 (create POST /students method), section 4.6 (create /backup resource and POST /backup method), section 4.7 (enable CORS), and section 3 (create Lambda functions getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, DynamoDB studentData table, S3 bucket student-backup-20250706, SES email verification). Ensure your AWS account is ready and the AWS region is us-east-1.\nDetailed Actions Access AWS Management Console\nOpen your browser and log into the AWS Management Console with your AWS account.\nIn the search bar at the top, type API Gateway and select the Amazon API Gateway service to access the management interface.\nCheck the AWS region: Ensure you are working in the primary AWS region (assumed us-east-1 to synchronize with previous sections), check the region in the top-right corner of the AWS Console. This region must match the student API, the Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail), studentData DynamoDB table, student-backup-20250706 S3 bucket, and SES.\nFigure 1: AWS Console interface with the API Gateway search bar.\nNavigate to APIs\nIn the main interface of Amazon API Gateway, look at the left navigation menu.\nSelect APIs to view the list of existing APIs.\nThe list should display the student API (created in section 4.1). If not, check the AWS region again or refresh the page.\nFigure 2: Navigation menu with the APIs option.\nSelect the student API\nIn the APIs list, find and select the student API.\nYou will be redirected to the API management page for student, showing options like Resources, Stages, API Keys, etc.\nFigure 3: Student API management page.\nDeploy the API\nIn the API management page for student, select Resources from the left menu. Click Actions \u0026gt; Deploy API to open the deployment interface. Figure 4: Click the Deploy API button.\nIn the Deploy API interface:\nDeployment stage: Select New Stage. Stage name: Enter prod (in lowercase, no special characters). Stage description: (Optional) Enter Production stage for StudentManagementAPI for a clear description. Deployment description: (Optional) Enter Initial deployment for prod stage to note the deployment version. Click Deploy to deploy the API to the prod stage.\nNote:\nIf the prod stage already exists (from a previous deployment), select prod in the Deployment stage dropdown instead of creating a new one, then click Deploy to update it. Every time you change the API configuration (method, CORS, etc.), you need to redeploy to apply the changes. Figure 5: Deploy API to the prod stage interface.\nCheck the Deployment Status\nAfter clicking Deploy, you will see the message: \u0026ldquo;Successfully created deployment for student. This deployment is active for prod.\u0026rdquo;\nIn the left menu, select Stages to view the list of stages.\nSelect the prod stage to check the details:\nVerify that the Invoke URL appears at the top of the page (e.g., https://abc123.execute-api.us-east-1.amazonaws.com/prod). Check the resources (/students, /backup) and methods (GET, POST, OPTIONS) that have been deployed. If you do not see the message or encounter an error:\n\u0026ldquo;AccessDenied\u0026rdquo;: Check that the AWS account\u0026rsquo;s IAM role has the apigateway:POST permission to deploy the API. \u0026ldquo;Stage already exists\u0026rdquo;: If the prod stage already exists, select the existing stage and redeploy. \u0026ldquo;No methods deployed\u0026rdquo;: Ensure that the GET /students, POST /students, POST /backup, and OPTIONS methods have been created (sections 4.4, 4.5, 4.6, 4.7). Figure 6: Deployment status message and prod stage details.\nCopy the Invoke URL\nIn Stages \u0026gt; prod, copy the Invoke URL (e.g., https://abc123.execute-api.us-east-1.amazonaws.com/prod). Store the Invoke URL in a safe place (e.g., configuration file, environment variable, or AWS Secrets Manager) to use in the web interface. Use the Invoke URL: Combine the Invoke URL with the resource path to create the full endpoint: GET https://abc123.execute-api.us-east-1.amazonaws.com/prod/students POST https://abc123.execute-api.us-east-1.amazonaws.com/prod/students POST https://abc123.execute-api.us-east-1.amazonaws.com/prod/backup These endpoints will be called from the web interface with the header x-api-key: \u0026lt;StudentApiKey\u0026gt;. Important Notes Factor Details API Key Security Each request to the endpoints must include the x-api-key header with the value StudentApiKey (created in section 4.2). Store the API Key in AWS Secrets Manager for enhanced security, avoiding direct embedding in JavaScript code. CORS Ensure CORS has been properly enabled (section 4.7) with the OPTIONS method and the Access-Control-Allow-Origin: '*' header (or specific CloudFront domain). The Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail) must return the Access-Control-Allow-Origin: '*' header in the response (configured in sections 3.1, 3.2, 3.3). AWS Region Ensure the us-east-1 region matches the student API, Lambda functions, studentData DynamoDB table, student-backup-20250706 S3 bucket, and SES. Error Handling - If you encounter a 403 \u0026quot;Forbidden\u0026quot; error when calling the endpoint: - Check that the StudentApiKey is valid and linked to the Usage Plan (sections 4.3, 4.9). - Ensure API Key Required: true is set in Method Request (sections 4.4, 4.5, 4.6). - If you encounter a 404 \u0026quot;Not Found\u0026quot; error: - Check that the Invoke URL is correct and the resource paths (/students, /backup) are configured. - Ensure the API has been deployed to the prod stage. - If you encounter a CORS error: - Check the CORS configuration (section 4.7) and the Access-Control-Allow-Origin header in Method Response and Lambda. - If you encounter a 500 error from Lambda, check the logs in CloudWatch (log groups /aws/lambda/getStudentData, /aws/lambda/insertStudentData, /aws/lambda/BackupDynamoDBAndSendEmail). Optimization - Enable CloudWatch Logs for the prod stage to monitor API requests: - In Stages \u0026gt; prod \u0026gt; Logs/Tracing, select Enable CloudWatch Logs and set the log level (e.g., INFO). - Check the logs in CloudWatch \u0026gt; Log groups \u0026gt; /aws/apigateway/student-prod. - Consider using AWS WAF with API Gateway to protect against DDoS attacks or API Key abuse. - If additional stages are needed (e.g., dev, test), create more stages in Stages and deploy separately for testing. Early Testing - After deployment, verify the prod stage appears in Stages with the correct Invoke URL. - Test the endpoints using Postman or curl. - Expected results: - GET /students: Returns the student list from the DynamoDB studentData table. - POST /students: Saves a new record to DynamoDB and sends a confirmation email via SES. - POST /backup: Creates a backup file in S3 student-backup-20250706 and sends a notification email. - Check from the web interface (open Developer Tools \u0026gt; Network in the browser) to verify that there are no CORS or 403 errors. - If you encounter errors, check the API Key, CORS configuration, or CloudWatch logs. Web Interface Integration Testing Use the Invoke URL in the web interface to call the endpoints, ensuring the x-api-key header is sent correctly (using Tailwind CSS, running on CloudFront). Practical Tip: After deployment, check the Invoke URL using Postman before integrating with the web interface. Verify the data in DynamoDB studentData, S3 bucket student-backup-20250706, and SES email to ensure the endpoints are working correctly.\nConclusion The student API has been successfully deployed to the prod stage with the Invoke URL ready for use in the web interface, supporting the GET /students, POST /students, and POST /backup methods.\nNext step: Move to Linking API Key to Usage Plan to continue!\n"
},
{
	"uri": "//localhost:1313/8-setting-up-system-backup/8.2-creating-eventbridge-rule-for-backup/",
	"title": "Website Serverless",
	"tags": [],
	"description": "",
	"content": "Work with Amazon System Manager - Session Manager Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon System Manager - Session Manager . Perform creating public and private instance connections.\nContent Introduction Preparation Connect to EC2 instance Manage session logs Port Forwarding Clean up resources "
},
{
	"uri": "//localhost:1313/8-setting-up-system-backup/",
	"title": "Website Serverless",
	"tags": [],
	"description": "",
	"content": "Work with Amazon System Manager - Session Manager Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon System Manager - Session Manager . Perform creating public and private instance connections.\nContent Introduction Preparation Connect to EC2 instance Manage session logs Port Forwarding Clean up resources "
},
{
	"uri": "//localhost:1313/4-creating-a-restful-api/4.9-linking-api-key-to-usage-plan-and-stage/",
	"title": "Link API Key to Usage Plan &amp; Associate with REST API and Stage",
	"tags": [],
	"description": "",
	"content": " Objective: Link the StudentApiKey (created in section 4.2) to the StudentUsagePlan (created in section 4.3) and associate it with the student API (created in section 4.1) on the prod stage (created in section 4.8). This ensures that requests to the endpoints (GET /students, POST /students, POST /backup) must include the StudentApiKey in the x-api-key header and adhere to the limits of the StudentUsagePlan (Rate: 5 requests/second, Burst: 10 requests, Quota: 1000 requests/day). This configuration allows the web interface (running on CloudFront, using Tailwind CSS) to access the API securely and with control.\nOverview of API Key and Usage Plan in API Gateway API Key (StudentApiKey) is an authentication string used to control access to the API methods (GET /students, POST /students, POST /backup), requiring the x-api-key header in each request. Usage Plan (StudentUsagePlan) manages access limits (Rate, Burst, Quota) and links the API Key with a specific API/stage. Linking StudentApiKey to StudentUsagePlan and the student API on the prod stage ensures: Only requests with a valid StudentApiKey are processed. Requests adhere to the limits: 5 requests/second (Rate), 10 concurrent requests (Burst), and 1000 requests/day (Quota). The web interface can safely call the endpoints with CORS support (section 4.7) and Invoke URL (section 4.8). After completing the steps, the endpoints will be ready for use in the web interface with API Key security. Prerequisites You need to complete the steps in section 4.1 (create the student API), section 4.2 (create the StudentApiKey API Key), section 4.3 (create the StudentUsagePlan Usage Plan), section 4.4 (create the GET /students method), section 4.5 (create the POST /students method), section 4.6 (create the /backup resource and POST /backup method), section 4.7 (enable CORS), section 4.8 (deploy the API to the prod stage), and section 3 (create the Lambda functions getStudentData, insertStudentData, BackupDynamoDBAndSendEmail, studentData DynamoDB table, student-backup-20250706 S3 bucket, SES email verification). Ensure your AWS account is ready and the AWS region is us-east-1.\nDetailed Actions Access AWS Management Console\nOpen your browser and log in to AWS Management Console with your AWS account.\nIn the search bar at the top of the page, type API Gateway and select Amazon API Gateway to access the management interface.\nCheck the AWS region: Make sure you\u0026rsquo;re working in the correct AWS region (assumed us-east-1 to match previous steps), and verify the region in the top-right corner of the AWS Console. This region must match with the student API, Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail), studentData DynamoDB table, student-backup-20250706 S3 bucket, and SES.\nFigure 1: AWS Console interface with the API Gateway search bar.\nNavigate to the API Keys Section\nIn the main interface of Amazon API Gateway, look at the left navigation menu.\nSelect API Keys to view the list of existing API Keys.\nThe list should display StudentApiKey (created in section 4.2). If it\u0026rsquo;s not visible, check your AWS region or refresh the page.\nFigure 2: Navigation menu with the API Keys option.\nSelect the StudentApiKey\nIn the API Keys list, find and select StudentApiKey.\nYou will be taken to the detail page of StudentApiKey, where you can see information like Value (the API key value, which may be hidden), Usage Plans, and configuration options.\nFigure 3: Detail page of StudentApiKey.\nLink StudentApiKey to the Usage Plan\nOn the detail page of StudentApiKey, click Add to Usage Plan (or Actions \u0026gt; Add to Usage Plan, depending on your Console version).\nIn the Add key to usage plan section:\nUsage Plan: Select StudentUsagePlan from the dropdown (created in section 4.3). Note: If StudentUsagePlan does not appear, check if the Usage Plan has been created in the same AWS region (us-east-1). Click Save to link StudentApiKey to StudentUsagePlan.\nCheck: After saving, in the detail page of StudentApiKey, the Usage Plans section will show StudentUsagePlan.\nFigure 4: Linking StudentApiKey to StudentUsagePlan.\nCheck the Status of the API Key Link\nAfter clicking Save, you should see the message: \u0026ldquo;Successfully added \u0026lsquo;StudentApiKey\u0026rsquo; to \u0026lsquo;StudentUsagePlan\u0026rsquo;.\u0026rdquo;\nIf you don\u0026rsquo;t see the message or encounter an error:\n\u0026ldquo;Usage Plan not found\u0026rdquo;: Check if StudentUsagePlan exists in Usage Plans (section 4.3). \u0026ldquo;AccessDenied\u0026rdquo;: Check the IAM role of your AWS account for apigateway:PUT permission to link the API Key. \u0026ldquo;API Key already added\u0026rdquo;: If StudentApiKey was already linked, this message may appear; skip and continue to the next step. Figure 5: Status message of linking the API Key.\nNavigate to the Usage Plans Section\nIn the left menu of Amazon API Gateway, select Usage Plans to see the list of Usage Plans.\nThe list should display StudentUsagePlan (created in section 4.3). If it\u0026rsquo;s not visible, check your AWS region or refresh the page.\nFigure 6: Navigation menu with the Usage Plans option.\nSelect StudentUsagePlan\nIn the Usage Plans list, find and select StudentUsagePlan.\nYou will be taken to the detail page of StudentUsagePlan, where you can see information such as Throttling (Rate: 5, Burst: 10), Quota (1000 requests/day), API Keys, and Associated APIs and Stages.\nFigure 7: Detail page of StudentUsagePlan.\nLink API and Stage\nIn the detail page of StudentUsagePlan, click Add API Stage (or Actions \u0026gt; Add API Stage, depending on your Console version). Figure 8: Clicking the Add API Stage button.\nIn the Add API Stage interface:\nAPI: Select student from the dropdown (created in section 4.1). Stage: Select prod from the dropdown (created in section 4.8). Note: If student or prod does not appear, check that the student API and prod stage have been created in the same AWS region (us-east-1). Click Add to Usage Plan to link.\nCheck: In the detail page of StudentUsagePlan, the Associated APIs and Stages section will show student:prod.\nFigure 9: Linking API and Stage interface.\nCheck the Status of API and Stage Link\nAfter clicking Add to Usage Plan, you should see the message: \u0026ldquo;Successfully added stage \u0026lsquo;prod\u0026rsquo; to usage plan.\u0026rdquo;\nTo verify:\nIn Usage Plans \u0026gt; StudentUsagePlan: Check that API Keys displays StudentApiKey. Check that Associated APIs and Stages displays student:prod. If you don\u0026rsquo;t see the message or encounter an error: \u0026ldquo;API or Stage not found\u0026rdquo;: Check if the student API and prod stage exist (sections 4.1, 4.8). \u0026ldquo;AccessDenied\u0026rdquo;: Check if your IAM role has the apigateway:PUT permission to link API/stage. \u0026ldquo;Stage already associated\u0026rdquo;: If student:prod was already linked, this message may appear; skip. Figure 10: Status message of linking API and Stage.\nKey Considerations Factor Details Check Full Configuration - API Key: StudentApiKey is linked to StudentUsagePlan. - Usage Plan: StudentUsagePlan applies Rate limits (5 requests/second), Burst (10 requests), and Quota (1000 requests/day). - API/Stage: student:prod is linked and applies the limits of StudentUsagePlan to the endpoints (GET /students, POST /students, POST /backup). - API Key Required: The methods have API Key Required: true (sections 4.4, 4.5, 4.6). API Key Security Requests to the endpoints must include the x-api-key: \u0026lt;StudentApiKey\u0026gt; header. Store the API Key in AWS Secrets Manager for increased security. CORS Ensure CORS is enabled (section 4.7) with the OPTIONS method and Access-Control-Allow-Origin: '*' header (or specific CloudFront domain). Lambda functions (getStudentData, insertStudentData, BackupDynamoDBAndSendEmail) must return the Access-Control-Allow-Origin: '*' header (configured in sections 3.1, 3.2, 3.3). AWS Region Ensure the us-east-1 region matches with the student API, prod stage, StudentApiKey, StudentUsagePlan, Lambda functions, studentData DynamoDB table, student-backup-20250706 S3 bucket, and SES. Error Handling - If a 403 \u0026quot;Forbidden\u0026quot; error occurs when calling the endpoint: - Check if the StudentApiKey is valid and linked to StudentUsagePlan. - Ensure student:prod is linked to StudentUsagePlan. - Verify API Key Required: true in Method Request (sections 4.4, 4.5, 4.6). - If a 429 \u0026quot;Too Many Requests\u0026quot; error occurs: - Check Rate (5 requests/second), Burst (10 requests), or Quota (1000 requests/day) limits in StudentUsagePlan. - Check usage statistics in Usage Plans \u0026gt; StudentUsagePlan \u0026gt; Usage. - If a 500 error occurs from Lambda, check the logs in CloudWatch (/aws/lambda/getStudentData, /aws/lambda/insertStudentData, /aws/lambda/BackupDynamoDBAndSendEmail). - If no success message appears, check your AWS region or refresh the Console page. Optimization - Enable CloudWatch Metrics for StudentUsagePlan to track the number of requests: - In Usage Plans \u0026gt; StudentUsagePlan, select Enable usage plan metrics. - Check in CloudWatch \u0026gt; Metrics \u0026gt; API Gateway \u0026gt; UsagePlanId. - Consider using AWS WAF with API Gateway to protect against DDoS attacks or API Key abuse. - If more API Keys are needed (e.g., for multiple web applications), create additional API Keys and link them to StudentUsagePlan. Early Verification - After linking StudentApiKey and associating student:prod, check the configuration in Usage Plans \u0026gt; StudentUsagePlan. - Test the endpoints using Postman or curl with the StudentApiKey. - Expected results: - GET /students: Returns student data from DynamoDB studentData. - POST /students: Stores new records in DynamoDB and sends a confirmation email via SES. - POST /backup: Creates a backup file in S3 student-backup-20250706 and sends a notification email. - Check from the web interface (open Developer Tools \u0026gt; Network in your browser) to verify there are no CORS, 403, or 429 errors. Web Interface Integration Check Use the Invoke URL and StudentApiKey in the web interface (using Tailwind CSS, running on CloudFront) to call the endpoints (GET /students, POST /students, POST /backup). Best Practice Tip: After linking StudentApiKey and associating student:prod, test the endpoints using Postman with the x-api-key header before integrating with the web interface. Verify the data in DynamoDB studentData, the S3 bucket student-backup-20250706, and the SES email to ensure the endpoints are working correctly.\nConclusion StudentApiKey has been successfully linked to StudentUsagePlan and associated with the student API on the prod stage, ensuring that the endpoints (GET /students, POST /students, POST /backup) are secured and access-controlled, ready for use in the web interface.\nNext Step: Proceed to Continue configuring or integrating the web interface to complete the system!\n"
},
{
	"uri": "//localhost:1313/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]